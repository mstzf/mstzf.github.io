<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CSS实现水波纹扩散效果</title>
    <url>/posts/css_wave/</url>
    <content><![CDATA[<h2 id="主要CSS"><a href="#主要CSS" class="headerlink" title="主要CSS"></a>主要CSS</h2><ul>
<li>animation</li>
<li>transform: scale()</li>
<li>opacity</li>
<li>nth-child()</li>
</ul>
<h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><img src="https://pic.mstzf.cn/blog/202310102143155.gif" alt="动画" style="zoom:70%;" />

<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .ripple &#123;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            position: absolute;</span><br><span class="line">            top: calc(50% - 100px);</span><br><span class="line">            left: calc(50% - 100px);</span><br><span class="line">            border-radius: 50%;</span><br><span class="line">            background-color: blueviolet;</span><br><span class="line">        &#125;</span><br><span class="line">        /* 根据需求自定义 */</span><br><span class="line">        .content&#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            z-index: 99;</span><br><span class="line">            /* 与.ripple的top和left相同 */</span><br><span class="line">            top: calc(50% - 100px);</span><br><span class="line">            left: calc(50% - 100px);</span><br><span class="line"></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            border-radius: 50%;</span><br><span class="line">            background-color: rgb(42, 42, 180);</span><br><span class="line"></span><br><span class="line">            font-size: 20px;</span><br><span class="line">            font-weight: bold;</span><br><span class="line">            color: #FFF;</span><br><span class="line">            text-align: center;</span><br><span class="line">            line-height: 200px;</span><br><span class="line">        &#125;</span><br><span class="line">        .ripple:nth-child(2)&#123;</span><br><span class="line">            animation: wave 1s linear infinite;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .ripple:nth-child(3)&#123;</span><br><span class="line">            animation: wave 2s linear infinite;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .ripple:nth-child(4)&#123;</span><br><span class="line">            animation: wave 3s linear infinite;</span><br><span class="line">        &#125;</span><br><span class="line">        .ripple:nth-child(5)&#123;</span><br><span class="line">            animation: wave 4s linear infinite;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @keyframes wave &#123;</span><br><span class="line">            from &#123;</span><br><span class="line">                opacity: 1;</span><br><span class="line">                transform: scale(1);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            to &#123;</span><br><span class="line">                opacity: 0;</span><br><span class="line">                transform: scale(1.5);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">    &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;content&quot;&gt;内容&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;ripple&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;ripple&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;ripple&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;ripple&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;ripple&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p><strong>实现的逻辑就是通过<code>animation</code>动画重复将这些元素放大1.5倍，同时将元素变为完全透明，从而达到波纹扩散的效果</strong></p>
]]></content>
      <categories>
        <category>CSS</category>
        <category>波纹效果</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>波纹动画</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS设置元素居中</title>
    <url>/posts/css_center/</url>
    <content><![CDATA[<h2 id="一、利用margin"><a href="#一、利用margin" class="headerlink" title="一、利用margin"></a>一、利用margin</h2><p>将margin设置为：<code>margin:auto</code>；</p>
<p>auto意为自动填充。程序会计算元素两边的边距剩余情况，然后将剩余的边距平均的分配到元素左右两边，从而使元素水平居中但是这样仅仅只能使元素在水平上居中，在垂直方向上任然没有被居中。</p>
<p><img src="https://pic.mstzf.cn/blog/202207091641204.png" alt="image-20220709164120998"></p>
<p>若要利用margin使水平、垂直方向上都居中则可以设置子元素（被居中元素）为绝对布局，设置父元素为相对布局。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* .box1为父元素</span></span><br><span class="line"><span class="comment">.box1-1为子元素 */</span></span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1-1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">140px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">140px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202207091647791.png" alt="image-20220709164746423"></p>
<p>绝对定位的元素的位置相对于最近的已定位祖先元素，如果元素没有已定位的祖先元素，那么它的位置相对于最初的包含块。所以在使用绝对定位时，为了避免元素乱跑，将其父元素设置为相对定位。</p>
<h2 id="二、利用相对定位设置上下左右距离来实现"><a href="#二、利用相对定位设置上下左右距离来实现" class="headerlink" title="二、利用相对定位设置上下左右距离来实现"></a>二、利用相对定位设置上下左右距离来实现</h2><p>在相对定位中设置：</p>
<p>top:50%;</p>
<p>left:50%;</p>
<p>在理论上就可以使元素水平和垂直都居中，但是由于元素坐标判定点位于元素开始位置，而不是正中间，就导致出现下面这种情况</p>
<p><img src="https://pic.mstzf.cn/blog/202207091659895.png" alt="image-20220709165939523"></p>
<p>可以看出仅仅只是黑色方块的起始位置被居中，而不是整体都居中。</p>
<p>可以使用<code>transform: translate(-50%, -50%)</code>;</p>
<p>使元素整体沿x,y轴平移使其居中</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* .box2为父元素</span></span><br><span class="line"><span class="comment">.box2-1为子元素 */</span></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2-1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">140px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">140px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202207091707933.png" alt="image-20220709170725647"></p>
<h2 id="三、通过弹性布局"><a href="#三、通过弹性布局" class="headerlink" title="三、通过弹性布局"></a>三、通过弹性布局</h2><p><code>display:flex</code>;一个功能十分强大的布局方式。</p>
<p>flex的主要属性：</p>
<ol>
<li><strong>flex-direction</strong></li>
<li><strong>flex-wrap</strong></li>
<li><strong>flex-flow</strong></li>
<li><strong>justify-content</strong></li>
<li><strong>align-items</strong></li>
<li><strong>align-content</strong></li>
</ol>
<p>只需要将主轴和交叉轴都设置为居中，整个元素都会被居中</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* .box3为父元素</span></span><br><span class="line"><span class="comment">.box3-1为子元素 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">background-color</span>: orange;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box3-1</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: brown;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">140px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">140px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202207091714935.png" alt="image-20220709171443694"></p>
]]></content>
      <categories>
        <category>CSS</category>
        <category>元素居中</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>元素居中</tag>
      </tags>
  </entry>
  <entry>
    <title>DHT11模块 Arduino代码补充</title>
    <url>/posts/dhtArduino/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>Arduino中已经有关于DHT11的库，但是为了理解模块的运行原理，而写了这个代码，代码中的不足之处还请多多指正。</p>
<p>关于DHT11的原理，在之前的文章中已经提到过，就不再赘述。</p>
<a class="tag-Link" target="_blank" href="https://blog.teohzy.com/posts/dhtcode">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.teohzy.com/posts/dhtcode.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">DHT11温湿度模块部分代码实例</div>
            <div class="tag-link-sitename">TeohZY</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<h2 id="代码部分"><a href="#代码部分" class="headerlink" title="代码部分"></a>代码部分</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> DHT11 15</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">Serial.begin(<span class="number">115200</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  dht();</span><br><span class="line">  delay(<span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">dht</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">double</span> hum,tem;</span><br><span class="line">pinMode(DHT11,OUTPUT);</span><br><span class="line">digitalWrite(DHT11,HIGH);</span><br><span class="line">delay(<span class="number">2</span>);</span><br><span class="line">digitalWrite(DHT11,LOW);</span><br><span class="line">delay(<span class="number">25</span>);</span><br><span class="line">digitalWrite(DHT11,HIGH);</span><br><span class="line">delayMicroseconds(<span class="number">30</span>);</span><br><span class="line">pinMode(DHT11,INPUT);</span><br><span class="line"><span class="keyword">if</span>(!digitalRead(DHT11))&#123;</span><br><span class="line">  Serial.println(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">  <span class="keyword">while</span>(!digitalRead(DHT11));</span><br><span class="line">  delayMicroseconds(<span class="number">10</span>);</span><br><span class="line">  <span class="keyword">while</span>(digitalRead(DHT11));</span><br><span class="line">  <span class="type">int</span> humInt=getData();</span><br><span class="line">  <span class="type">int</span> humDec=getData();</span><br><span class="line">  <span class="type">int</span> temInt=getData();</span><br><span class="line">  <span class="type">int</span> temDec=getData();</span><br><span class="line">  <span class="type">int</span> Check=getData();</span><br><span class="line">  <span class="keyword">if</span>((humInt+humDec+temInt+temDec)==Check)&#123;</span><br><span class="line">    <span class="keyword">if</span>(humDec&lt;<span class="number">10</span>)&#123;</span><br><span class="line">      hum=humInt+humDec/<span class="number">10.0</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(humDec&lt;<span class="number">100</span>)&#123;</span><br><span class="line">      hum=humInt+humDec/<span class="number">100.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(temDec&lt;<span class="number">10</span>)&#123;</span><br><span class="line">      tem=temInt+temDec/<span class="number">10.0</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(temDec&lt;<span class="number">100</span>)&#123;</span><br><span class="line">      tem=temInt+temDec/<span class="number">100.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Serial.print(<span class="string">&quot;温度：&quot;</span>);</span><br><span class="line">    Serial.print(tem);</span><br><span class="line">    Serial.println();</span><br><span class="line">    Serial.print(<span class="string">&quot;湿度：&quot;</span>);</span><br><span class="line">    Serial.print(hum);</span><br><span class="line">    Serial.println();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">  Serial.println(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">getData</span><span class="params">()</span>&#123;</span><br><span class="line">    byte Data;</span><br><span class="line">    byte temp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span> ;i&lt;<span class="number">8</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">while</span>(!digitalRead(DHT11));</span><br><span class="line">    delayMicroseconds(<span class="number">35</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(digitalRead(DHT11))&#123;</span><br><span class="line">      temp=<span class="number">0x01</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      temp=<span class="number">0x00</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Data&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">    Data|=temp;</span><br><span class="line">    <span class="keyword">while</span>(digitalRead(DHT11));</span><br><span class="line">    delayMicroseconds(<span class="number">10</span>);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">return</span> Data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>单片机</category>
        <category>DHT11</category>
      </categories>
      <tags>
        <tag>单片机</tag>
        <tag>DHT11</tag>
      </tags>
  </entry>
  <entry>
    <title>DHT11温湿度模块部分代码实例</title>
    <url>/posts/dhtcode/</url>
    <content><![CDATA[<h2 id="产品概述"><a href="#产品概述" class="headerlink" title="产品概述"></a>产品概述</h2><p>DHT11数字温湿度传感器是一款含有已校准数字信号输出的温湿度 复合传感器。应用专用的数字模块采集技术和温湿度传感技术，可以将获取到的环境温湿度信号通过单总线传输；信号中携带有校验码，一定程度上保证了数据的准确性。</p>
<h2 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h2><table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">最小</th>
<th align="center">最大</th>
</tr>
</thead>
<tbody><tr>
<td align="center">温度范围</td>
<td align="center">-20℃</td>
<td align="center">60℃</td>
</tr>
<tr>
<td align="center">湿度范围</td>
<td align="center">5%RH</td>
<td align="center">95%RH</td>
</tr>
<tr>
<td align="center">电压</td>
<td align="center">3.3V</td>
<td align="center">5.5V</td>
</tr>
<tr>
<td align="center">电流</td>
<td align="center">0.06mA</td>
<td align="center">1.0mA</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">精确度</th>
</tr>
</thead>
<tbody><tr>
<td align="center">温度</td>
<td align="center">±2℃</td>
</tr>
<tr>
<td align="center">湿度</td>
<td align="center">±5%RH</td>
</tr>
</tbody></table>
<p><strong>引脚说明：</strong></p>
<ol>
<li><p>VDD 供电3.3～5.5V DC</p>
</li>
<li><p>DATA 串行数据，单总线</p>
</li>
<li><p>NC 空脚</p>
</li>
<li><p>GND 接地，电源负极</p>
</li>
</ol>
<h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><p><strong>数据时序图</strong></p>
<p><img src="https://pic.mstzf.cn/blog/202203181524900.png" alt="image-20220318152411531"></p>
<ul>
<li><p>起始信号：微处理器把数据总线（SDA）拉低一段时间至少 18ms（最大不得超过 30ms）,在拉高20us-40us，通知传感器准备数据。</p>
</li>
<li><p>响应信号：传感器把数据总线（SDA）拉低 83µs，再拉高 87µs 以响应主机的起始信号。</p>
</li>
<li><p>数据格式：收到主机起始信号后，传感器一次性从数据总线（SDA）串出 40 位数据，高位先出</p>
<p><img src="https://pic.mstzf.cn/blog/202211262058089.png" alt="image-20221126205849766"></p>
<p><img src="https://pic.mstzf.cn/blog/202211262059054.png" alt="image-20221126205921333"></p>
<p>当检测到这一位数据的高电平后，我们要看这段高电平究竟会持续多长时间，0信号的高电平持续26-28us,1信号则持续70us。所以在上一步检测到高电平之后我们不妨等一等，等个30us看看高电平是不是还是存在，若还是高电平，那这一位信号就是1信号，若已经变低了，就是0信号，将这个1或0赋值给一个变量。</p>
</li>
<li><p>温度：温度高位为温度整数部分数据，温度低位为温度小数部分数据，且温度低位 Bit8 为 1 则表示负温度，否则 为正温度</p>
</li>
<li><p>湿度：湿度高位为湿度整数部分数据，湿度低位为湿度小数部分数</p>
</li>
<li><p>校验位：校验位＝湿度高位+湿度低位+温度高位+温度低位</p>
</li>
</ul>
<p>以上内容来自<a href="http://aosong.com/userfiles/files/media/DHT11-V1_3%E8%AF%B4%E6%98%8E%E4%B9%A6%EF%BC%88%E8%AF%A6%E7%BB%86%E7%89%88%EF%BC%89.pdf">奥松电子DHT11官方文档</a>，详细内容请查看文档</p>
<h2 id="代码实例"><a href="#代码实例" class="headerlink" title="代码实例"></a>代码实例</h2><p><strong>树莓派Python3代码实例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#！/usr/bin/python3  coding=utf-8</span><br><span class="line">import RPi.GPIO as GPIO</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">data = 18   # DHT11的data引脚连接到的树莓派的GPIO引脚，使用BCM编号</span><br><span class="line">tmp=[]      # 用来存放读取到的数据</span><br><span class="line">a,b=0,0</span><br><span class="line"></span><br><span class="line">def delayMicrosecond(t):    # 微秒级延时函数</span><br><span class="line">    start,end=0,0           # 声明变量</span><br><span class="line">    start=time.time()       # 记录开始时间</span><br><span class="line">    t=(t-3)/1000000     # 将输入t的单位转换为秒，-3是时间补偿</span><br><span class="line">    while end-start&lt;t:  # 循环至时间差值大于或等于设定值时</span><br><span class="line">        end=time.time()     # 记录结束时间</span><br><span class="line"></span><br><span class="line">def DHT11():</span><br><span class="line">    GPIO.setmode(GPIO.BCM)      # 设置为BCM编号模式</span><br><span class="line">    GPIO.setwarnings(False)</span><br><span class="line">    del tmp[0:]                 # 删除列表</span><br><span class="line">    time.sleep(1)               # 延时1秒</span><br><span class="line">    GPIO.setup(data, GPIO.OUT)  # 设置GPIO口为输出模式</span><br><span class="line">    #GPIO.output(data,GPIO.HIGH) # 设置GPIO输出高电平</span><br><span class="line">    #delayMicrosecond(10*1000)   # 延时10毫秒</span><br><span class="line">    GPIO.output(data,GPIO.LOW)  # 设置GPIO输出低电平</span><br><span class="line">    delayMicrosecond(25*1000)   # 延时25毫秒        </span><br><span class="line">    GPIO.output(data,GPIO.HIGH) # 设置GPIO输出高电平</span><br><span class="line">    GPIO.setup(data, GPIO.IN)   # 设置GPIO口为输入模式   </span><br><span class="line">    a=time.time()           # 记录循环开始时间</span><br><span class="line">    while GPIO.input(data): # 一直循环至输入为低电平</span><br><span class="line">        b=time.time()       # 记录结束时间</span><br><span class="line">        if (b-a)&gt;0.1:       # 判断循环时间是否超过0.1秒，避免程序进入死循环卡死</span><br><span class="line">            break           # 跳出循环</span><br><span class="line">          </span><br><span class="line">    a=time.time()</span><br><span class="line">    while GPIO.input(data)==0:  # 一直循环至输入为高电平</span><br><span class="line">        b=time.time()</span><br><span class="line">        if (b-a)&gt;0.1:</span><br><span class="line">            break</span><br><span class="line">                  </span><br><span class="line">    a=time.time()</span><br><span class="line">    while GPIO.input(data): # 一直循环至输入为低电平</span><br><span class="line">        b=time.time()</span><br><span class="line">        if (b-a)&gt;=0.1:</span><br><span class="line">            break   </span><br><span class="line">              </span><br><span class="line">    for i in range(40):         # 循环40次，接收温湿度数据</span><br><span class="line">        a=time.time()</span><br><span class="line">        while GPIO.input(data)==0:  #一直循环至输入为高电平</span><br><span class="line">            b=time.time()</span><br><span class="line">            if (b-a)&gt;0.1:</span><br><span class="line">                break</span><br><span class="line">                         </span><br><span class="line">        delayMicrosecond(28)    # 延时28微秒</span><br><span class="line">              </span><br><span class="line">        if GPIO.input(data):    # 超过28微秒后判断是否还处于高电平</span><br><span class="line">            tmp.append(1)       # 记录接收到的bit为1</span><br><span class="line">                  </span><br><span class="line">            a=time.time()</span><br><span class="line">            while GPIO.input(data): # 一直循环至输入为低电平</span><br><span class="line">                b=time.time()</span><br><span class="line">                if (b-a)&gt;0.1:</span><br><span class="line">                    break</span><br><span class="line">        else:</span><br><span class="line">            tmp.append(0)       # 记录接收到的bit为0</span><br><span class="line">            </span><br><span class="line">            humidity_bit=tmp[0:8]       # 分隔列表，第0到7位是湿度整数数据</span><br><span class="line">    humidity_point_bit=tmp[8:16]# 湿度小数</span><br><span class="line">    temperature_bit=tmp[16:24]  # 温度整数</span><br><span class="line">    temperature_point_bit=tmp[24:32]    # 温度小数</span><br><span class="line">    check_bit=tmp[32:40]        # 校验数据</span><br><span class="line"> </span><br><span class="line">    humidity_int=0</span><br><span class="line">    humidity_point=0</span><br><span class="line">    temperature_int=0</span><br><span class="line">    temperature_point=0</span><br><span class="line">    check=0</span><br><span class="line"></span><br><span class="line">    for i in range(8):          # 二进制转换为十进制</span><br><span class="line">        humidity_int+=humidity_bit[i]*2**(7-i)</span><br><span class="line">        humidity_point+=humidity_point_bit[i]*2**(7-i)</span><br><span class="line">        temperature_int+=temperature_bit[i]*2**(7-i)</span><br><span class="line">        temperature_point+=temperature_point_bit[i]*2**(7-i)</span><br><span class="line">        check+=check_bit[i]*2**(7-i)</span><br><span class="line">  </span><br><span class="line">    humidity=humidity_int+humidity_point/10</span><br><span class="line">    temperature=temperature_int+temperature_point/10</span><br><span class="line">  </span><br><span class="line">    check_tmp=humidity_int+humidity_point+temperature_int+temperature_point</span><br><span class="line">  </span><br><span class="line">    if check==check_tmp and temperature!=0 and temperature!=0:  # 判断数据是否正常</span><br><span class="line">        print(&quot;Temperature is &quot;, temperature,&quot;℃\nHumidity is &quot;,humidity,&quot;%&quot;)# 打印温湿度数据</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;error&quot;)</span><br><span class="line">while True:   </span><br><span class="line">    DHT11()</span><br><span class="line">    GPIO.cleanup()</span><br><span class="line">    time.sleep(5)</span><br></pre></td></tr></table></figure>

<p><strong>树莓派C语言代码实例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//</span><br><span class="line">//mydht11.c</span><br><span class="line">//gcc dht11.c -o dht11 -lwiringPi</span><br><span class="line">//代码非原创，已经找不到原作者了，感谢大佬</span><br><span class="line">//</span><br><span class="line">#include &lt;wiringPi.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"> </span><br><span class="line">typedef unsigned char uint8;</span><br><span class="line">typedef unsigned int  uint16;</span><br><span class="line">typedef unsigned long uint32;</span><br><span class="line"> </span><br><span class="line">#define HIGH_TIME 32</span><br><span class="line"> </span><br><span class="line">int pinNumber = 1;  //use gpio1 to read data</span><br><span class="line">uint32 databuf;</span><br><span class="line"> </span><br><span class="line">uint8 readSensorData(void)</span><br><span class="line">&#123;</span><br><span class="line">    uint8 crc; </span><br><span class="line">    uint8 i;</span><br><span class="line"> </span><br><span class="line">    pinMode(pinNumber,OUTPUT); // set mode to output</span><br><span class="line">    digitalWrite(pinNumber, 1); // output a low level</span><br><span class="line">    delayMicroseconds(4);</span><br><span class="line">    digitalWrite(pinNumber, 0); // output a high level </span><br><span class="line">    delay(25);</span><br><span class="line">    digitalWrite(pinNumber, 1); // output a low level</span><br><span class="line">    delayMicroseconds(60); </span><br><span class="line">    pinMode(pinNumber, INPUT); // set mode to input</span><br><span class="line">    pullUpDnControl(pinNumber,PUD_UP);</span><br><span class="line"> </span><br><span class="line">    if(digitalRead(pinNumber)==0) //SENSOR ANS</span><br><span class="line">    &#123;</span><br><span class="line">        while(!digitalRead(pinNumber)); //wait to high</span><br><span class="line">        delayMicroseconds(80);</span><br><span class="line">        for(i=0;i&lt;32;i++)</span><br><span class="line">        &#123;</span><br><span class="line">          while(digitalRead(pinNumber)); //data clock start</span><br><span class="line">          while(!digitalRead(pinNumber)); //data start</span><br><span class="line">          delayMicroseconds(HIGH_TIME);</span><br><span class="line">          databuf*=2;</span><br><span class="line">          if(digitalRead(pinNumber)==1) //1</span><br><span class="line">          &#123;</span><br><span class="line">            databuf++;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        for(i=0;i&lt;8;i++)</span><br><span class="line">        &#123;</span><br><span class="line">          while(digitalRead(pinNumber)); //data clock start</span><br><span class="line">          while(!digitalRead(pinNumber)); //data start</span><br><span class="line">          delayMicroseconds(HIGH_TIME);</span><br><span class="line">          crc*=2;  </span><br><span class="line">          if(digitalRead(pinNumber)==1) //1</span><br><span class="line">          &#123;</span><br><span class="line">            crc++;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      return 1;</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">      return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">int main (void)</span><br><span class="line">&#123;</span><br><span class="line">    if (-1 == wiringPiSetup()) &#123;</span><br><span class="line">      //printf(&quot;Setup wiringPi failed!&quot;);</span><br><span class="line">      return 1;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    pinMode(pinNumber, OUTPUT); // set mode to output</span><br><span class="line">    digitalWrite(pinNumber, 1); // output a high level </span><br><span class="line"> </span><br><span class="line">    //while(1) </span><br><span class="line">    //&#123;</span><br><span class="line">    pinMode(pinNumber,OUTPUT); // set mode to output</span><br><span class="line">    digitalWrite(pinNumber, 1); // output a high level </span><br><span class="line">    //delay(3000);</span><br><span class="line">    if(readSensorData())</span><br><span class="line">    &#123;</span><br><span class="line">      printf(&quot;OK!\n&quot;);</span><br><span class="line">      printf(&quot;RH:%d.%d\n&quot;,(databuf&gt;&gt;24)&amp;0xff,(databuf&gt;&gt;16)&amp;0xff); </span><br><span class="line">      printf(&quot;TMP:%d.%d\n&quot;,(databuf&gt;&gt;8)&amp;0xff,databuf&amp;0xff);</span><br><span class="line">      databuf=0;</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">      printf(&quot;Error!\n&quot;);</span><br><span class="line">      databuf=0;</span><br><span class="line">    &#125;</span><br><span class="line">    //&#125;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ESP32C语言代码实例（ESP-IDF官方编译烧写工具）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &quot;freertos/FreeRTOS.h&quot;</span><br><span class="line">#include &quot;freertos/task.h&quot;</span><br><span class="line">#include &quot;driver/gpio.h&quot;</span><br><span class="line">#include &quot;sdkconfig.h&quot;</span><br><span class="line">#define DHT11_PIN (15) //可通过宏定义，修改引脚</span><br><span class="line">#define DHT11_CLR gpio_set_level(DHT11_PIN, 0) //设为低电平</span><br><span class="line">#define DHT11_SET gpio_set_level(DHT11_PIN, 1) //设为高电平</span><br><span class="line">#define DHT11_IN gpio_set_direction(DHT11_PIN, GPIO_MODE_INPUT) //设为输入模式</span><br><span class="line">#define DHT11_OUT gpio_set_direction(DHT11_PIN, GPIO_MODE_OUTPUT) //设为输出模式</span><br><span class="line">uint8_t DHT11Data[4] = &#123;0&#125;;</span><br><span class="line">uint8_t Temp, Humi;</span><br><span class="line">// us延时函数，误差不能太大</span><br><span class="line">void DelayUs(uint32_t nCount)</span><br><span class="line">&#123;</span><br><span class="line">    ets_delay_us(nCount);</span><br><span class="line">&#125;</span><br><span class="line">//DHT11初始化</span><br><span class="line">void DHT11_Start(void)</span><br><span class="line">&#123;</span><br><span class="line">    /***************************</span><br><span class="line">     * </span><br><span class="line">     * 主机发送给DHT11复位信号</span><br><span class="line">     * </span><br><span class="line">     * 首先主机拉低总线至少 18ms，然后再拉高总线，延时 20~40us，取中间值 30us，此时复位信号发送完毕。 </span><br><span class="line">     * </span><br><span class="line">     * **********************************/</span><br><span class="line">    DHT11_OUT; //设置端口方向 </span><br><span class="line">    DHT11_CLR; //拉低端口</span><br><span class="line">    DelayUs(19 * 1000);</span><br><span class="line">    //   vTaskDelay(19 * portTICK_RATE_MS); //持续最低18ms;</span><br><span class="line">    DHT11_SET;   //主机拉高端口</span><br><span class="line">    DelayUs(30); //总线由上拉电阻拉高，主机延时30uS;</span><br><span class="line">    /********************************</span><br><span class="line">     * DHT11发送响应信号</span><br><span class="line">     * </span><br><span class="line">     * DHT11 检测到复位信号后，触发一次采样，</span><br><span class="line">     * 并拉低总线 80us 表示响应信号，告诉主机数据已经准备好了；</span><br><span class="line">     * 然后 DHT11 拉高总线 80us，</span><br><span class="line">     * 之后开始传输数据。如果检测到响应信号为高电平，</span><br><span class="line">     * 则 DHT11 初始化失败，</span><br><span class="line">     * 请检查线路是否连接正常。</span><br><span class="line">     * </span><br><span class="line">     *******************************/</span><br><span class="line">    DHT11_IN;    //设置端口方向</span><br><span class="line">    while (!gpio_get_level(DHT11_PIN))</span><br><span class="line">        ; // DHT11等待80us低电平响应信号结束</span><br><span class="line">    while (gpio_get_level(DHT11_PIN))</span><br><span class="line">        ; // DHT11   将总线拉高80us</span><br><span class="line">&#125;</span><br><span class="line">uint8_t DHT11_ReadValue(void)</span><br><span class="line">&#123;</span><br><span class="line">    uint8_t i, sbuf = 0;</span><br><span class="line">    for (i = 8; i &gt; 0; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        sbuf &lt;&lt;= 1;</span><br><span class="line">        while (!gpio_get_level(DHT11_PIN))</span><br><span class="line">            ;</span><br><span class="line">        DelayUs(40); // 延时 30us 后检测数据线是否还是高电平</span><br><span class="line">        if (gpio_get_level(DHT11_PIN))</span><br><span class="line">        &#123;</span><br><span class="line">            sbuf |= 1;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            sbuf |= 0;</span><br><span class="line">        &#125;</span><br><span class="line">        while (gpio_get_level(DHT11_PIN))</span><br><span class="line">            ;</span><br><span class="line">    &#125;</span><br><span class="line">    return sbuf;</span><br><span class="line">&#125;</span><br><span class="line">uint8_t DHT11_ReadTemHum(uint8_t *buf)</span><br><span class="line">&#123;</span><br><span class="line">    uint8_t check;</span><br><span class="line">    buf[0] = DHT11_ReadValue();</span><br><span class="line">    buf[1] = DHT11_ReadValue();</span><br><span class="line">    buf[2] = DHT11_ReadValue();</span><br><span class="line">    buf[3] = DHT11_ReadValue();</span><br><span class="line">    check = DHT11_ReadValue();</span><br><span class="line">    if (check == buf[0] + buf[1] + buf[2] + buf[3])</span><br><span class="line">        return 1;</span><br><span class="line">    else</span><br><span class="line">        return 0;</span><br><span class="line">&#125;</span><br><span class="line">void app_main(void)</span><br><span class="line">&#123;</span><br><span class="line">    // printf(&quot;ESP32 DHT11 TEST:%s,%s!\r\n&quot;, __DATE__, __TIME__);</span><br><span class="line">    gpio_pad_select_gpio(DHT11_PIN);</span><br><span class="line">    while (1)</span><br><span class="line">    &#123;</span><br><span class="line">        DHT11_Start();</span><br><span class="line">        if (DHT11_ReadTemHum(DHT11Data))</span><br><span class="line">        &#123;</span><br><span class="line">            Temp = DHT11Data[2];</span><br><span class="line">            Humi = DHT11Data[0];</span><br><span class="line">            printf(&quot;ESP32 DHT11 TEST:%s,%s!\r\n&quot;, __DATE__, __TIME__);</span><br><span class="line">            printf(&quot;Temp=%d.%d, Humi=%d.%d\r\n&quot;, Temp,DHT11Data[3],Humi,DHT11Data[1]);</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            printf(&quot;DHT11 Error!\r\n&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        vTaskDelay(5000 / portTICK_PERIOD_MS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>附录：</p>
<p><strong>树莓派GPIO</strong></p>
<img src="https://pic.mstzf.cn/blog/202203181519095.jpg" alt="树莓派GPIO" style="zoom:45%;" /></li>
</ul>
]]></content>
      <categories>
        <category>单片机</category>
        <category>DHT11</category>
      </categories>
      <tags>
        <tag>单片机</tag>
        <tag>DHT11</tag>
      </tags>
  </entry>
  <entry>
    <title>ESP32通过SmartConfig扫码配网</title>
    <url>/posts/ESP-SmartConfig-AP/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>对于ESP配网方式和SmartConfig的介绍，在ESP-IDF编程指南中已经介绍得很详细了，这里就不在赘述。</p>
<a class="tag-Link" target="_blank" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/api-reference/provisioning/index.html">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/api-reference/provisioning/index.html.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">ESP配网API</div>
            <div class="tag-link-sitename">ESPRESSIF</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p>这里主要来介绍一下在Arduino中怎么使用SmartConfig来实现微信扫码配网，配网失败的一些解决办法，主要代码参考了CSDN上的一篇文章（不能确定是不是原作者，对贡献代码的人都表示感谢）</p>
<a class="tag-Link" target="_blank" href="https://blog.csdn.net/u014091490/article/details/105178037">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.csdn.net/u014091490/article/details/105178037.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">ESP8266/ESP32 SmartConfig一键配网+自动重连+微信扫码配网</div>
            <div class="tag-link-sitename">lw1997的博客-CSDN博客_esp32蓝牙配网</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p><strong>我只是在代码的原基础上做了简单的添加，指定了SmartConfig的Type</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;WiFi.h&quot;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">SmartConfig</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  WiFi.mode(WIFI_AP_STA);</span><br><span class="line">  Serial.println(<span class="string">&quot;\r\nWait for Smartconfig...&quot;</span>);</span><br><span class="line">  WiFi.beginSmartConfig(SC_TYPE_ESPTOUCH_AIRKISS);  <span class="comment">//我做了修改的部分添加了“SC_TYPE_ESPTOUCH_AIRKISS”</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    Serial.print(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">    delay(<span class="number">500</span>);                   <span class="comment">// wait for a second</span></span><br><span class="line">    <span class="keyword">if</span> (WiFi.smartConfigDone())</span><br><span class="line">    &#123;</span><br><span class="line">      Serial.println(<span class="string">&quot;SmartConfig Success&quot;</span>);</span><br><span class="line">      Serial.<span class="built_in">printf</span>(<span class="string">&quot;SSID:%s\r\n&quot;</span>, WiFi.SSID().c_str());</span><br><span class="line">      Serial.<span class="built_in">printf</span>(<span class="string">&quot;PSW:%s\r\n&quot;</span>, WiFi.psk().c_str());</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">AutoConfig</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    WiFi.begin();</span><br><span class="line">    <span class="comment">//如果觉得时间太长可改</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> wstatus = WiFi.status();</span><br><span class="line">        <span class="keyword">if</span> (wstatus == WL_CONNECTED)</span><br><span class="line">        &#123;</span><br><span class="line">	        Serial.println(<span class="string">&quot;WIFI SmartConfig Success&quot;</span>);</span><br><span class="line">	        Serial.<span class="built_in">printf</span>(<span class="string">&quot;SSID:%s&quot;</span>, WiFi.SSID().c_str());</span><br><span class="line">	        Serial.<span class="built_in">printf</span>(<span class="string">&quot;, PSW:%s\r\n&quot;</span>, WiFi.psk().c_str());</span><br><span class="line">	        Serial.print(<span class="string">&quot;LocalIP:&quot;</span>);</span><br><span class="line">	        Serial.print(WiFi.localIP());</span><br><span class="line">	        Serial.print(<span class="string">&quot; ,GateIP:&quot;</span>);</span><br><span class="line">	        Serial.println(WiFi.gatewayIP());</span><br><span class="line">	        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">	        Serial.print(<span class="string">&quot;WIFI AutoConfig Waiting......&quot;</span>);</span><br><span class="line">	        Serial.println(wstatus);</span><br><span class="line">	        delay(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Serial.println(<span class="string">&quot;WIFI AutoConfig Faild!&quot;</span> );</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line">  delay(<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">if</span> (!AutoConfig())</span><br><span class="line">  &#123;</span><br><span class="line">  	SmartConfig();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在使用作者源代码的时候，微信扫码和ESPTouch APP都没有成功，然后看到说要指定连接的类型，就可以解决</p>
<p><img src="https://pic.mstzf.cn/blog/202302052318411.png" alt="image-20230205231815105"></p>
<p>根据自己的需求选合适的类型就行。</p>
<h2 id="关于连接工具"><a href="#关于连接工具" class="headerlink" title="关于连接工具"></a>关于连接工具</h2><h3 id="微信扫码"><a href="#微信扫码" class="headerlink" title="微信扫码"></a>微信扫码</h3><p>官方给的工具网址为：<a href="https://iot.espressif.cn/configWXDeviceWiFi.html">https://iot.espressif.cn/configWXDeviceWiFi.html</a></p>
<p>可以利用网址链接转二维码工具生成二维码，像我生成的二维码：</p>
<p><img src="https://pic.mstzf.cn/blog/202302052324728.png" alt="QRcode_SP — 2"></p>
<h3 id="利用ESPTouch"><a href="#利用ESPTouch" class="headerlink" title="利用ESPTouch"></a>利用ESPTouch</h3><p>可以到ESP官网下载软件，有Android和iOS版本</p>
<a class="tag-Link" target="_blank" href="https://www.espressif.com.cn/zh-hans/products/software/esp-touch/resources">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/www.espressif.com.cn/zh-hans/products/software/esp-touch/resources.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">资源 | 乐鑫科技</div>
            <div class="tag-link-sitename">ESPRESSIF</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<h3 id="乐鑫信息科技微信公众号"><a href="#乐鑫信息科技微信公众号" class="headerlink" title="乐鑫信息科技微信公众号"></a>乐鑫信息科技微信公众号</h3><p><img src="https://pic.mstzf.cn/blog/202302052355857.png" alt="image-20230205235550535"></p>
<p><img src="https://pic.mstzf.cn/blog/202302052355745.png" alt="image-20230205235507900"></p>
]]></content>
      <categories>
        <category>ESP</category>
        <category>SmartConfig扫码配网</category>
      </categories>
      <tags>
        <tag>ESP</tag>
        <tag>SmartConfig扫码配网</tag>
      </tags>
  </entry>
  <entry>
    <title>接入每天60S看世界API</title>
    <url>/posts/60s_newsAPI/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>目前在网上已经有很多博主出了对博客引入这个API的教程，内容也已经比较详细，但是很多通过直接获取整张图片的形式；这样做省去了很多不必要的麻烦，只是图片在加载的时候会比较缓慢，而且在静态博客框架下开启图片懒加载后有几率发生图片加载失败的情况。还有一些博主也使用了直接请求文字内容的教程，而这些很多都是针对基于PHP搭建的博客，不能用于静态博客。</p>
<h2 id="XMLHttpRequest求情Http"><a href="#XMLHttpRequest求情Http" class="headerlink" title="XMLHttpRequest求情Http"></a>XMLHttpRequest求情Http</h2><p>XMLHttpRequest是JavaScript中自带Http请求函数，可以快速调出浏览器调试界面发请求。在小规模的情况下可以有效减少其他依赖快速的接入接口。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>open(“method”,”URL”,[asyncFlag],[“userName”],[“password”])</td>
<td>建立对服务器的调用。method参数可以是GET、POST或PUT。url参数可以是相对URL或绝对URL。这个方法还包括3个可选的参数，是否异步，用户名，密码</td>
</tr>
<tr>
<td>setRequestHeader(“header”, “value”)</td>
<td>把指定首部设置为所提供的值。在设置任何首部之前必须先调用open()。设置header并和请求一起发送 (‘post’方法一定要 )</td>
</tr>
<tr>
<td>send(content)</td>
<td>向服务器发送请求</td>
</tr>
</tbody></table>
<p>在代码中主要值使用了XMLHttpRequest中的这几个方法，更多方法可以到 (<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest#%E6%96%B9%E6%B3%95">XMLHttpRequest - Web API 接口参考 | MDN (mozilla.org)</a> 中查看更多方法使用技巧</p>
<h2 id="开始引入"><a href="#开始引入" class="headerlink" title="开始引入"></a>开始引入</h2><ol>
<li><p>注册<a href="https://admin.alapi.cn/user/login">ALAPI</a> 账号获取Token</p>
<img src="https://pic.mstzf.cn/blog/202204222036791.png" alt="image-20220422203645128" style="zoom:80%;" />

<p>注册账号后到用户管理界面获取Token并保存，在后面的代码部分会使用到</p>
</li>
<li><p>代码部分</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;flex-direction: column;align-items: center;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&quot;color: red;font-size: 2.5em;&quot;</span>&gt;</span>每天60s看世界<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;head-img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;news&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:90%; color: blue;font-size: 1.4em;&quot;</span>&gt;</span>新闻正在加载<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> news = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#news&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> headImg = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#head-img&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span></span><br><span class="line"><span class="language-javascript">        xhr.<span class="title function_">open</span>(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://v2.alapi.cn/api/zaobao&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        xhr.<span class="title function_">send</span>(<span class="string">&#x27;token=粘贴刚刚获取到的Token&amp;format=json&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        xhr.<span class="title function_">addEventListener</span>(<span class="string">&quot;readystatechange&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> ori = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">this</span>.<span class="property">responseText</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> text = ori.<span class="property">data</span>.<span class="property">news</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> str = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; text.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    str += text[i] + <span class="string">&#x27;&lt;br&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                news.<span class="property">innerHTML</span> = str;</span></span><br><span class="line"><span class="language-javascript">                headImg.<span class="property">src</span> = ori.<span class="property">data</span>.<span class="property">head_image</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>找到代码中<code>xhr.send(&#39;token=粘贴刚刚获取到的Token&amp;format=json&#39;);</code>部分，将刚刚获取到的Token粘贴到中文标注部分。</p>
</li>
</ol>
<h2 id="引入到博客中"><a href="#引入到博客中" class="headerlink" title="引入到博客中"></a>引入到博客中</h2><p>将html代码整个的粘贴到新建页面或者其他要添加的地方。</p>
<p><img src="https://pic.mstzf.cn/blog/202204222054985.png" alt="image-20220422205402441"></p>
]]></content>
      <categories>
        <category>小妙招</category>
        <category>引入API</category>
      </categories>
      <tags>
        <tag>小妙招</tag>
        <tag>引入API</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo搜索引擎优化（SEO）</title>
    <url>/posts/hexoblogeso/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>我们费尽心血写出来的各种博客，当然是希望分享给更多的人，让更多的人看到的，但是如果只是在自己的小圈子里面去分享的话，很难有好的浏览量，所以就需要我们去优化搜索，让浏览器收录我们的网址，这样在有人在浏览器搜索对应关键字的时候就有可能将我们的文章推荐给他。</p>
<p>道理虽然是这样，但我自己的浏览数据也一直少得可怜</p>
<img src="https://pic.mstzf.cn/blog/202208071919681.gif" alt="-190f176b0e175c2a" style="zoom:25%;" />

<h2 id="搜索平台收添加搜索平台"><a href="#搜索平台收添加搜索平台" class="headerlink" title="搜索平台收添加搜索平台"></a>搜索平台收添加搜索平台</h2><p><strong><code>站长管理平台地址</code></strong></p>
<hr>
<p><a href="https://www.bing.com/webmasters/">必应站长管理平台</a></p>
<p><a href="www.google.com/webmasters/">谷歌站长管理平台</a></p>
<p><a href="https://ziyuan.baidu.com/site/">百度站长管理平台</a></p>
<hr>
<p>登录到搜索平台的站长管理页面,将自己的域名添加后，还需要进行验证，有三种方式，截图以必应的为例</p>
<img src="https://pic.mstzf.cn/blog/202208072150244.png" alt="image-20220807215026298" style="zoom:80%;" />

<ol>
<li><p>文件验证</p>
<p>下载对应平台的验证文件后，将其保存到网站的根目录，hexo博客框架的话推荐保存到source&#x2F;目录下，这样每次生成静态页面后都会在public文件下存在，当然也可以直接在public&#x2F;下添加，但是在运行<code>hexo clean</code>之后被删除。</p>
<p>其他博客框架添加方法也大同小异，只要确定网站根目录然后添加即可。</p>
<p><strong>最终达到的效果就是：能够通过<code>https://你的域名/下载文件名</code>直接访问到文件内容即可</strong></p>
</li>
<li><p>HTML标签验证</p>
<p>将获取到的Meta粘贴在HTML文件的</p>
<p><code>&lt;head&gt; &lt;/head&gt;</code> 部分中</p>
<p>以下为必应下的Meta样式：</p>
<p><code>&lt;meta name=&quot;msvalidate.01&quot; content=&quot;9565AFED5E9E8A24241BB5E6223CCB04&quot; /&gt;</code></p>
<hr>
<p>我用的是hexo的butterfly主题，添加方法作者大大已经弄好，直接将获取到的值添加就行</p>
<p><a href="https://butterfly.js.org/posts/ceeb73f#%E7%B6%B2%E7%AB%99%E9%A9%97%E8%AD%89">Butterfly 安裝文檔(四) 主題配置-2 | Butterfly</a></p>
<p><img src="https://pic.mstzf.cn/blog/202208072223207.png" alt="image-20220807222317598"></p>
<p>其他主题应该也大同小异</p>
</li>
<li><p>CNAME验证</p>
<p>在DNS域名服务器中，给自己的域名添加新的解析记录</p>
<p><img src="https://pic.mstzf.cn/blog/202208072238373.png" alt="image-20220807223803329"></p>
<p>添加必应的，以我在阿里云购买的域名为例，则需要在DNS下添加</p>
</li>
</ol>
<img src="https://pic.mstzf.cn/blog/202208072243614.png" alt="image-20220807224307466" style="zoom:80%;" />

<p>这里推荐使用方法1，下载文件，因为不需要改变其他文件，也不需要很复杂的操作流程。</p>
<p>不论使用哪种方法，只要验证成功都可。</p>
<h2 id="提交站点地图"><a href="#提交站点地图" class="headerlink" title="提交站点地图"></a>提交站点地图</h2><blockquote>
<p>站点地图是一个网站所有链接的容器。很多网站的连接层次比较深，爬虫很难抓取到，站点地图可以方便爬虫抓取网站页面，通过抓取网站页面，清晰了解网站的架构，网站地图一般存放在根目录下并命名sitemap，为爬虫指路，增加网站重要内容页面的收录。站点地图就是根据网站的结构、框架、内容，生成的导航网页文件。站点地图对于提高用户体验有好处，它们为网站访问者指明方向，并帮助迷失的访问者找到他们想看的页面。</p>
</blockquote>
<p>Hexo 可以通过两个插件来实现自动生成站点地图</p>
<p><strong>百度</strong></p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure>

<p><strong>谷歌、必应</strong></p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>

<p>然后在 hexo 的配置文件<code>_config.yml</code>中添加</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sitemap:</span><br><span class="line">path: sitemap.xml</span><br><span class="line">baidusitemap:</span><br><span class="line">path: baidusitemap.xml</span><br></pre></td></tr></table></figure>

<p>之后每次编译都会自动在&#x2F;public目录下生成<code>sitemap.xml</code>和<code>baidusitemap.xml</code>。</p>
<p>网站提交之后就可以到搜索平台上提交自己的站点地图了</p>
<p>站点地图的URL为：<code>https://你的域名/sitemap.xml</code>和<code>https://你的域名/baidusitemap.xml</code></p>
<p><img src="https://pic.mstzf.cn/blog/202208072314760.png" alt="image-20220807231405726"></p>
<h2 id="添加robots"><a href="#添加robots" class="headerlink" title="添加robots"></a>添加robots</h2><blockquote>
<p>robots是网站跟爬虫间的协议，用简单直接的txt格式文本方式告诉对应的爬虫被允许的权限，也就是说robots.txt是搜索引擎中访问网站的时候要查看的第一个文件。当一个搜索蜘蛛访问一个站点时，它会首先检查该站点根目录下是否存在robots.txt，如果存在，搜索机器人就会按照该文件中的内容来确定访问的范围；如果该文件不存在，所有的搜索蜘蛛将能够访问网站上所有没有被口令保护的页面。</p>
</blockquote>
<p>在&#x2F;source下新建一个文本文档，重命名为：<code>robots.txt</code></p>
<p>内容为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">User-agent: *</span><br><span class="line">Allow: /</span><br><span class="line">Allow：/posts/</span><br><span class="line"></span><br><span class="line">Disallow: /js/</span><br><span class="line">Disallow: /css/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Sitemap: https://域名/sitemap.xml</span><br><span class="line">Sitemap: https://域名/baidusitemap.xml</span><br></pre></td></tr></table></figure>

<p>Allow: 表示可以访问</p>
<p>Disallow：表示不允许访问</p>
<p>Sitemap：表示站点地图</p>
<p>更多详细内容自行百度</p>
<h2 id="修改永久链接"><a href="#修改永久链接" class="headerlink" title="修改永久链接"></a>修改永久链接</h2><p>hexo新建文章后的永久链接为&#x2F;year&#x2F;month&#x2F;undefined，这样的链接格式层数太深，另外就是不方便命名。</p>
<p>对此我的修改方式如下：</p>
<ul>
<li>去除year，在URL中出现年份，要是年份太远的话搜索引擎可能会给较低的优先级</li>
<li>将<code>/</code>替换为<code>-</code>，将深度降低</li>
<li>重新设置了一个urlname</li>
</ul>
<p>最终的permalink被替换成</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">permalink: :month-:day/:urlname/   # :urlname 自定义文章网址名</span><br></pre></td></tr></table></figure>

<p>这样每次新建文章只需要在MarkDown的注释部分（用于生成文章标题，日期标签…）添加一个</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">urlname: 自定义链接中的文章名字部分</span><br></pre></td></tr></table></figure>

<h2 id="在使用MarkDown写文章时的一些小细节"><a href="#在使用MarkDown写文章时的一些小细节" class="headerlink" title="在使用MarkDown写文章时的一些小细节"></a>在使用MarkDown写文章时的一些小细节</h2><ul>
<li>在文章中不要再使用一级标题<code>#</code>，推荐从二级标题<code>##</code>开始使用，不然会有多个<code>&lt;h1&gt;</code>标签的SEO错误</li>
<li>添加keywords，好的关键字可以提高搜索准确率</li>
<li>添加description，并且描述说明的长度应该再25-160字之间</li>
<li>有图片时中括号<code>[]</code>内尽量不要为空，应当有适当注释</li>
</ul>
<div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>有不足、错误之处欢迎大家评论指正</p>
</div>
]]></content>
      <categories>
        <category>小妙招</category>
        <category>seo</category>
      </categories>
      <tags>
        <tag>小妙招</tag>
        <tag>seo</tag>
      </tags>
  </entry>
  <entry>
    <title>Java改变控制台输出文字样式</title>
    <url>/posts/Java-text-style/</url>
    <content><![CDATA[<p>Java在控制台上的输出字体样式其实是可以自己定义的</p>
<p><strong>代码</strong></p>
<p><font color="red" size="5">如果结尾处没有加  <code>\033[m</code>  这次输出后的全部输出都会变成相同样式</font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;\033[30m&quot;</span>+<span class="string">&quot;Hello World 设置m为：30&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[31m&quot;</span>+<span class="string">&quot;Hello World 设置m为：31&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[32m&quot;</span>+<span class="string">&quot;Hello World 设置m为：32&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[33m&quot;</span>+<span class="string">&quot;Hello World 设置m为：33&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[34m&quot;</span>+<span class="string">&quot;Hello World 设置m为：34&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[35m&quot;</span>+<span class="string">&quot;Hello World 设置m为：35&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[36m&quot;</span>+<span class="string">&quot;Hello World 设置m为：36&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[37m&quot;</span>+<span class="string">&quot;Hello World 设置m为：37&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[38m&quot;</span>+<span class="string">&quot;Hello World 设置m为：38&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[39m&quot;</span>+<span class="string">&quot;Hello World 设置m为：39&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[40m&quot;</span>+<span class="string">&quot;Hello World 设置m为：40&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[41m&quot;</span>+<span class="string">&quot;Hello World 设置m为：41&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[42m&quot;</span>+<span class="string">&quot;Hello World 设置m为：42&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[43m&quot;</span>+<span class="string">&quot;Hello World 设置m为：43&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[44m&quot;</span>+<span class="string">&quot;Hello World 设置m为：44&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[45m&quot;</span>+<span class="string">&quot;Hello World 设置m为：45&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[46m&quot;</span>+<span class="string">&quot;Hello World 设置m为：46&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\033[47m&quot;</span>+<span class="string">&quot;Hello World 设置m为：47&quot;</span>+<span class="string">&quot;\033[m&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>样式</strong></p>
<p><img src="https://pic.mstzf.cn/blog/202210122301068.png" alt="image-20221012230119279"></p>
<p><strong>其实,并不用特别的去记什么数字代表什么样式，用一个for循环输出看看就可以知道了</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">99</span>;i++) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;\033[&quot;</span>+i+<span class="string">&quot;m&quot;</span> + <span class="string">&quot;Hello World 设置m为：&quot;</span>+i+ <span class="string">&quot;\033[m&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>学习笔记</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java面向对象</title>
    <url>/posts/java_opp/</url>
    <content><![CDATA[<p>Java是一种相对比较成熟的面向对象编程语言。面向对象是一种较为符合人类思维习惯的编程思想。在Java中一切皆可有对象，我们把具有相同性质、特点的事物抽象成一个类，而每一个具有这些性质、特点的事物就是这个类的一个对象。</p>
<img src="https://pic.mstzf.cn/blog/202204031546377.png" alt="没对象" style="zoom: 70%;" />

<h2 id="面向对象与面向过程"><a href="#面向对象与面向过程" class="headerlink" title="面向对象与面向过程"></a>面向对象与面向过程</h2><ul>
<li><p>面向过程：</p>
<p>面向过程就是分析出解决问题的一个个步骤，在程序中的提现就是写好的一个个执行不同目的的函数，在解决问题的时候，就再一个一个的调用这些步骤（函数）。</p>
<p>就比如说洗衣服这件事，在面向过程的时候，就会被拆分成：放入衣服、加入洗衣液、加入适量水、启动洗衣、排水、甩干、晾衣服。这一些列的过程，最终达到洗衣服的目的。</p>
</li>
<li><p>面向对象：</p>
<p>面向对象是把构成问题事务分解成各个对象，建立对象的目的不是为了完成一个步骤，而是为了描叙某个事物在整个解决问题的步骤中的行为。</p>
<p>再以洗衣服这件事为例，在面向对象的时候洗衣粉主要就被分为了两类对象，第一类对象——人，主要有放入衣服、加入水、晾衣服等属性；第二类对象——洗衣机，主要有洗衣服、甩干衣服等属性。面向对象主要是划分了问题而不是步骤。</p>
</li>
</ul>
<h2 id="面向对象与面向过程的优缺点"><a href="#面向对象与面向过程的优缺点" class="headerlink" title="面向对象与面向过程的优缺点"></a>面向对象与面向过程的优缺点</h2><ul>
<li><p>面向过程：</p>
<p>优点：</p>
<p>流程化使得编程任务明确，在开发之前基本考虑了实现方式和最终结果，具体步骤清楚，便于节点分析。</p>
<p>效率高，面向过程强调代码的短小精悍，善于结合数据结构来开发高效率的程序。比如单片机、嵌入式开发、Linux&#x2F;Unix等一般采用面向过程开发，性能是最重要的因素。 </p>
<p> 缺点：代码重用性低，扩展能力差，后期维护难度比较大。</p>
</li>
<li><p>面向对象</p>
<p>优点：</p>
<p>结构清晰，程序是模块化和结构化，更加符合人类的思维方式；易扩展，代码重用率高，可继承，可覆盖，可以设计出低耦合的系统；由于面向对象有封装、继承、多态性的特性，可以设计出低耦合的系统，使系统更加灵活、更加易于维护 </p>
<p>缺点：</p>
<p>开销大，当要修改对象内部时，对象的属性不允许外部直接存取，所以要增加许多没有其他意义、只负责读或写的行为。这会为编程工作增加负担，增加运行开销，并且使程序显得臃肿。</p>
<p>性能低，由于面向更高的逻辑抽象层，使得面向对象在实现的时候，不得不做出性能上面的牺牲，计算时间和空间存储大小都开销很大。</p>
</li>
</ul>
<h2 id="面向对象的基本特性"><a href="#面向对象的基本特性" class="headerlink" title="面向对象的基本特性"></a>面向对象的基本特性</h2><ul>
<li><p>封装：</p>
<p>是指一种将抽象性函式接口的实现细节部分包装、隐藏起来的方法。</p>
<p>封装可以被认为是一个保护屏障，防止该类的代码和数据被外部类定义的代码随机访问。</p>
<p>良好的封装能够使程序更高效安全。</p>
</li>
<li><p>继承：</p>
<p>继承是Java程序设计中的一项核心技术。继承的基本思想是使用已经存在类中的属性和方法去创建新的类，在新类中可以添加心得属性和方法，让新的类能够适应心得情况而不用重写已经存在的属性方法。</p>
</li>
<li><p>多态：</p>
<p>多态性是面向对象编程的又一个重要特征，它是指在父类中定义的属性和方法被子类继承之后，可以具有不同的数据类型或表现出不同的行为，这使得同一个属性或方法在父类及其各个子类中具有不同的含义。</p>
<p>对面向对象来说，多态分为编译时多态和运行时多态。其中编译时多态是静态的，主要是指方法的重载，它是根据参数列表的不同来区分不同的方法。通过编译之后会变成两个不同的方法，在运行时谈不上多态。而运行时多态是动态的，它是通过动态绑定来实现的，也就是大家通常所说的多态性。（解释来自[C语言中文网](<a href="http://c.biancheng.net/view/1001.html">Java多态性：Java什么是多态？ (biancheng.net)</a>)）</p>
</li>
</ul>
<h2 id="面向对象的五大基本原则"><a href="#面向对象的五大基本原则" class="headerlink" title="面向对象的五大基本原则"></a>面向对象的五大基本原则</h2><ol>
<li><p><strong>单一职责原则（Single Responsibility Principle）</strong></p>
<p>没一个类应该专注于做一件事。指类的功能要单一，不要包罗万象；像人一样不要一心二用。</p>
</li>
<li><p><strong>开放封闭原则OCP(Open－Close Principle)</strong></p>
<p>一个模块在扩展性方面应该是开放的而在更改性方面应该是封闭的</p>
</li>
<li><p><strong>里氏替换原则（Liskov Substitution Principle）</strong></p>
<p>子类应当可以替换父类并出现在父类能够出现的任何地方</p>
</li>
<li><p><strong>依赖倒置原则（Dependence Inversion Principle）</strong></p>
<p>具体依赖抽象，上层依赖下层。</p>
</li>
<li><p><strong>接口隔离原则（Interface Segregation Principle）</strong></p>
<p>模块间要通过抽象接口隔离开，而不是通过具体的类强耦合起来</p>
</li>
</ol>
]]></content>
      <categories>
        <category>学习笔记</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux安装指定版本Nodejs</title>
    <url>/posts/LinuxAddNodejs/</url>
    <content><![CDATA[<h2 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装nodejs</h2><p>通过Linux自带软件库安装的nodejs往往版本较老</p>
<p>可以通过设置代理更新nodejs软件版本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_18.x | sudo bash -</span><br></pre></td></tr></table></figure>

<p><strong>需要安装哪个版本就设置<code>setup_18.x</code>对应版本数字</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install -y nodejs</span><br><span class="line">nodejs -v</span><br><span class="line">查看版本号，测试安装成功</span><br></pre></td></tr></table></figure>

<h2 id="npm更换淘宝镜像"><a href="#npm更换淘宝镜像" class="headerlink" title="npm更换淘宝镜像"></a>npm更换淘宝镜像</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Linux</category>
        <category>Nodejs</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title>MySql入门基础命令</title>
    <url>/posts/mysql_instructions/</url>
    <content><![CDATA[<div class="note info simple"><p><strong>该文章为个人学习笔记，内容仅供参考</strong></p>
</div>

<p><strong>主要参考以下两个网站</strong></p>
<div class="flink"><div class="flink-name">参考网站</div> <div class="flink-list">
          <div class="flink-list-item">
            <a href="https://www.mysqlzh.com/" title="MySQL 5.1中文文档" target="_blank">
              <div class="flink-item-icon">
                <img class="no-lightbox" src="https://www.mysqlzh.com/Application/Home/View/Public/img/mysql-logo.svg" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="MySQL 5.1中文文档" />
              </div>
              <div class="flink-item-name">MySQL 5.1中文文档</div> 
              <div class="flink-item-desc" title="MySql中文网">MySql中文网</div>
            </a>
          </div>
          <div class="flink-list-item">
            <a href="https://www.yiibai.com/" title="易百教程" target="_blank">
              <div class="flink-item-icon">
                <img class="no-lightbox" src="https://www.yiibai.com/static/img/logo.png" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="易百教程" />
              </div>
              <div class="flink-item-name">易百教程</div> 
              <div class="flink-item-desc" title="专注于IT教程和实例">专注于IT教程和实例</div>
            </a>
          </div></div></div>

<h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql -h hostname -u user -p</span><br></pre></td></tr></table></figure>

<p>host：当前服务器主机名</p>
<p>user：用户名</p>
<p>密码：可以直接在p后面直接跟密码，如：-ppasswords；还可以p后留空回车后再输入密码。推荐使用后者，这样更安全。</p>
<h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>创建一个新数据库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE [IF NOT EXISTS] dbname;</span><br></pre></td></tr></table></figure>

<p>显示数据库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure>

<p>选择数据库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">USE dbname</span><br><span class="line"># 或者在连接时选择</span><br><span class="line">mysql -h hostname -u user -p dbname</span><br></pre></td></tr></table></figure>

<h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><p>查看数据库中的表</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW TABLES;</span><br></pre></td></tr></table></figure>

<p>创建新表</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE tableName (listing1 dataType default value listingConstraint,</span><br><span class="line">						listing2 dataType default value listingConstraint,</span><br><span class="line">						listing3 dataType default value listingConstraint,</span><br><span class="line">						listing4 dataType default value listingConstraint,</span><br><span class="line">									......,</span><br><span class="line">						tableConstraint</span><br><span class="line">						);</span><br></pre></td></tr></table></figure>

<p>表名<code>tableName</code>在一个数据库中必须是唯一的，括号内的内容是对每一列的列名和属性的定义通过‘<code>,</code>’隔开每一列，最后一列是对表的约束‘<code>,</code>’可以省略。</p>
<p>表被创建好后可以使用<code>DESCRIBE</code>来查看表中的列名和数据类型等属性。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DESCRIBE TABLES;</span><br></pre></td></tr></table></figure>



<p><img src="https://pic.mstzf.cn/blog/202205111725770.png" alt="image-20220511172552158"></p>
<h2 id="对表中数据的管理"><a href="#对表中数据的管理" class="headerlink" title="对表中数据的管理"></a>对表中数据的管理</h2><h3 id="查找数据"><a href="#查找数据" class="headerlink" title="查找数据"></a>查找数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT 查询内容 FROM 数据表 WHERE 查询条件;</span><br></pre></td></tr></table></figure>

<ul>
<li>查询内容可以是表中的一列或多列，***** 则表示查询表中所有的列</li>
<li>所查询的数据表应为当前数据库中存在的表</li>
<li>查询条件可以做出合适的限定，从而只返回我们想要的数据</li>
<li>在查询NULL内容时，WHERE后的条件不是”列&#x3D;NULL”，而是”列 IS NULL”</li>
</ul>
<h3 id="增加数据"><a href="#增加数据" class="headerlink" title="增加数据"></a>增加数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 单次添加一个新记录</span><br><span class="line">INSERT INTO 数据表 (列名) VALUES (数据内容);</span><br></pre></td></tr></table></figure>

<ul>
<li>列名与数据内容要一一对应</li>
<li>如果每一列都要添加数据，列名可以省略，此时的数据内容则要包含每一列数据</li>
<li>数据内容如果是多项用‘<code>,</code>‘隔开</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 单次添加多个新纪录</span><br><span class="line">LOAD DATA LOCAL INFILE &#x27;fileName&#x27; INTO TABLE tableName;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>将要添加的数据保存到文本文件中，每行表示一个新记录，用定位符（Tab）把每一列分隔开，对于NULL值使用\N来代替。</strong></li>
</ul>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELETE FROM 表名 WHERE 删除条件;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>WHERE 删除条件可以省略，表示删除表中所有行</strong></li>
</ul>
<h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UPDATE 表名 </span><br><span class="line">SET</span><br><span class="line">	列名1=值1，</span><br><span class="line">	列名2=值2，</span><br><span class="line">	...，</span><br><span class="line">WHERE</span><br><span class="line">	条件;</span><br></pre></td></tr></table></figure>

<ul>
<li>SET 后可修改多列，以’<code>,</code>‘分隔开</li>
<li><strong>WHERE 条件可以省略，省略后表示修改所有行中的数据</strong></li>
</ul>
]]></content>
      <categories>
        <category>学习笔记</category>
        <category>MySql入门</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
        <tag>MySql入门</tag>
      </tags>
  </entry>
  <entry>
    <title>NextCloud无法上传大文件问题解决</title>
    <url>/posts/nextcloud__bigFiles/</url>
    <content><![CDATA[<h2 id="NextCloud无法上传大文件问题解决"><a href="#NextCloud无法上传大文件问题解决" class="headerlink" title="NextCloud无法上传大文件问题解决"></a>NextCloud无法上传大文件问题解决</h2><p>限制NextCloud上传大文件的主要因素有两个，一个就是上传文件的大小，以及文件上传超时时间。</p>
<ul>
<li><p>修改PHP文件上传限制</p>
<p>查看PHP配置文件路径</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">php -i |grep php.ini</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202305241733201.png" alt="image-20230524173357726"></p>
<p>修改文件中的<code>upload_max_filesize</code>限制上传文件大小可根据自己的需求设置，我这里设置了16G</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">upload_max_filesize = 16G</span><br></pre></td></tr></table></figure>



<p><img src="https://pic.mstzf.cn/blog/202305241736499.png" alt="image-20230524173638063"></p>
<p>修改文件上传超时时间<code>max_execution_time</code>以及页面数据接收超时时间<code>max_input_time</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">max_execution_time = 3600</span><br><span class="line">max_input_time = 600</span><br></pre></td></tr></table></figure>



<p><img src="https://pic.mstzf.cn/blog/202305241741060.png" alt="image-20230524174058635"></p>
<p>修改post表单接收最大值<code>post_max_size</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">post_max_size = 16G</span><br></pre></td></tr></table></figure>



<p><img src="https://pic.mstzf.cn/blog/202305241743565.png" alt="image-20230524174302142"></p>
</li>
<li><p>修改Nginx文件上传限制</p>
<p>修改Nginx配置文件<code>/etc/nginx/nginx.conf</code></p>
<p>在http或者location下添加</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">client_max_body_size 0;</span><br></pre></td></tr></table></figure>

<p>0表示无限制</p>
<p><img src="https://pic.mstzf.cn/blog/202305241748688.png" alt="image-20230524174801439"></p>
</li>
<li><p>内网穿透多Nginx配置</p>
<p>如果做内网穿透使用HTTPS并且使用了多个Nginx，每个Nginx下都要做文件上传限制配置</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
        <category>云盘</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>云盘</tag>
      </tags>
  </entry>
  <entry>
    <title>SSM开发环境搭建（小白自用）</title>
    <url>/posts/SSM-development-environment/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>将SSM作为后端的的一个项目即将完工，在开发过程中踩了很多坑，与此同时也学习到了新知识，有了不小收获。在遇到麻烦和解决麻烦的路上，受到了很多分享教程博主的帮助。为了将帮助延续下去，我也将自己SSM环境配置的过程做了简单的纪录、分享。</p>
<h2 id="系统软件版本"><a href="#系统软件版本" class="headerlink" title="系统软件版本"></a>系统软件版本</h2><ul>
<li>Windows 10 专业版 22H2</li>
<li>IntelliJ IDEA 2022.3.3</li>
<li>MySQL 8.0.32</li>
<li>Java 19.0.2</li>
<li>Spring 6.0.6</li>
<li>MyBatis 3.5.13</li>
<li>Tomcat 11.0.0</li>
</ul>
<p><strong>（软件系统版本不用完全一致，不同版本之间可能会出现一定程度的兼容性问题，可在有问题时在寻找对应版本的解决办法）</strong></p>
<h2 id="新建项目及项目配置"><a href="#新建项目及项目配置" class="headerlink" title="新建项目及项目配置"></a>新建项目及项目配置</h2><ol>
<li><p>新建项目</p>
<p>使用IDEA新建一个空的默认Maven项目，并新建Java包完善SSM项目架构。</p>
<p>在新建controller包（表现层）、dao包（持久层）、service包（业务层）</p>
<p>在resources下新建db（存放数据库相关配置文件）、log（存放日志相关配置文件）、spring（存放与spring与其他整合相关配置文件）</p>
<p><img src="https://pic.mstzf.cn/blog/202305071416703.png" alt="image-20230507141558542"></p>
</li>
<li><p>修改Maven配置文件</p>
<p>使用默认Maven配置文件，在下载包时会比较慢，我们可以修改配置文件使用国内镜像来加速下载</p>
<p>IDEA内修改路径为<code>File-&gt;Settings-&gt;Builde,Execution,Deployment-&gt;Maven</code></p>
<p>可以修改默认的文件，也可以重新使用一个自定义的配置文件，笔者这里使用了重新新建一个配置文件的方法。</p>
<p><img src="https://pic.mstzf.cn/blog/202305071421718.png" alt="image-20230507142114670"></p>
<p>其中<code>settings.xml</code>文件中内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment">or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment">distributed with this work for additional information</span></span><br><span class="line"><span class="comment">regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment">to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment">&quot;License&quot;); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment">with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Unless required by applicable law or agreed to in writing,</span></span><br><span class="line"><span class="comment">software distributed under the License is distributed on an</span></span><br><span class="line"><span class="comment">&quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span><br><span class="line"><span class="comment">KIND, either express or implied.  See the License for the</span></span><br><span class="line"><span class="comment">specific language governing permissions and limitations</span></span><br><span class="line"><span class="comment">under the License.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> | This is the configuration file for Maven. It can be specified at two levels:</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |  1. User Level. This settings.xml file provides configuration for a single user,</span></span><br><span class="line"><span class="comment"> |                 and is normally provided in $&#123;user.home&#125;/.m2/settings.xml.</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |                 <span class="doctag">NOTE:</span> This location can be overridden with the CLI option:</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |                 -s /path/to/user/settings.xml</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |  2. Global Level. This settings.xml file provides configuration for all Maven</span></span><br><span class="line"><span class="comment"> |                 users on a machine (assuming they&#x27;re all using the same Maven</span></span><br><span class="line"><span class="comment"> |                 installation). It&#x27;s normally provided in</span></span><br><span class="line"><span class="comment"> |                 $&#123;maven.conf&#125;/settings.xml.</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |                 <span class="doctag">NOTE:</span> This location can be overridden with the CLI option:</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |                 -gs /path/to/global/settings.xml</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> | The sections in this sample file are intended to give you a running start at</span></span><br><span class="line"><span class="comment"> | getting the most out of your Maven installation. Where appropriate, the default</span></span><br><span class="line"><span class="comment"> | values (values used when the setting is not specified) are provided.</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/SETTINGS/1.2.0&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/SETTINGS/1.2.0 http://maven.apache.org/xsd/settings-1.2.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- localRepository</span></span><br><span class="line"><span class="comment">   | The path to the local repository maven will use to store artifacts.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | Default: $&#123;user.home&#125;/.m2/repository</span></span><br><span class="line"><span class="comment">  &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- interactiveMode</span></span><br><span class="line"><span class="comment">   | This will determine whether maven prompts you when it needs input. If set to false,</span></span><br><span class="line"><span class="comment">   | maven will use a sensible default value, perhaps based on some other setting, for</span></span><br><span class="line"><span class="comment">   | the parameter in question.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | Default: true</span></span><br><span class="line"><span class="comment">  &lt;interactiveMode&gt;true&lt;/interactiveMode&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- offline</span></span><br><span class="line"><span class="comment">   | Determines whether maven should attempt to connect to the network when executing a build.</span></span><br><span class="line"><span class="comment">   | This will have an effect on artifact downloads, artifact deployment, and others.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | Default: false</span></span><br><span class="line"><span class="comment">  &lt;offline&gt;false&lt;/offline&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- pluginGroups</span></span><br><span class="line"><span class="comment">   | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.</span></span><br><span class="line"><span class="comment">   | when invoking a command line like &quot;mvn prefix:goal&quot;. Maven will automatically add the group identifiers</span></span><br><span class="line"><span class="comment">   | &quot;org.apache.maven.plugins&quot; and &quot;org.codehaus.mojo&quot; if these are not already contained in the list.</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pluginGroups</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- pluginGroup</span></span><br><span class="line"><span class="comment">     | Specifies a further group identifier to use for plugin lookup.</span></span><br><span class="line"><span class="comment">    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">pluginGroups</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- proxies</span></span><br><span class="line"><span class="comment">   | This is a list of proxies which can be used on this machine to connect to the network.</span></span><br><span class="line"><span class="comment">   | Unless otherwise specified (by system property or command-line switch), the first proxy</span></span><br><span class="line"><span class="comment">   | specification in this list marked as active will be used.</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">proxies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- proxy</span></span><br><span class="line"><span class="comment">     | Specification for one proxy, to be used in connecting to the network.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">    &lt;proxy&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;optional&lt;/id&gt;</span></span><br><span class="line"><span class="comment">      &lt;active&gt;true&lt;/active&gt;</span></span><br><span class="line"><span class="comment">      &lt;protocol&gt;http&lt;/protocol&gt;</span></span><br><span class="line"><span class="comment">      &lt;username&gt;proxyuser&lt;/username&gt;</span></span><br><span class="line"><span class="comment">      &lt;password&gt;proxypass&lt;/password&gt;</span></span><br><span class="line"><span class="comment">      &lt;host&gt;proxy.host.net&lt;/host&gt;</span></span><br><span class="line"><span class="comment">      &lt;port&gt;80&lt;/port&gt;</span></span><br><span class="line"><span class="comment">      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;</span></span><br><span class="line"><span class="comment">    &lt;/proxy&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">proxies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- servers</span></span><br><span class="line"><span class="comment">   | This is a list of authentication profiles, keyed by the server-id used within the system.</span></span><br><span class="line"><span class="comment">   | Authentication profiles can be used whenever maven must make a connection to a remote server.</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- server</span></span><br><span class="line"><span class="comment">     | Specifies the authentication information to use when connecting to a particular server, identified by</span></span><br><span class="line"><span class="comment">     | a unique name within the system (referred to by the &#x27;id&#x27; attribute below).</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | <span class="doctag">NOTE:</span> You should either specify username/password OR privateKey/passphrase, since these pairings are</span></span><br><span class="line"><span class="comment">     |       used together.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">    &lt;server&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;deploymentRepo&lt;/id&gt;</span></span><br><span class="line"><span class="comment">      &lt;username&gt;repouser&lt;/username&gt;</span></span><br><span class="line"><span class="comment">      &lt;password&gt;repopwd&lt;/password&gt;</span></span><br><span class="line"><span class="comment">    &lt;/server&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Another sample, using keys to authenticate.</span></span><br><span class="line"><span class="comment">    &lt;server&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;siteServer&lt;/id&gt;</span></span><br><span class="line"><span class="comment">      &lt;privateKey&gt;/path/to/private/key&lt;/privateKey&gt;</span></span><br><span class="line"><span class="comment">      &lt;passphrase&gt;optional; leave empty if not used.&lt;/passphrase&gt;</span></span><br><span class="line"><span class="comment">    &lt;/server&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- mirrors</span></span><br><span class="line"><span class="comment">   | This is a list of mirrors to be used in downloading artifacts from remote repositories.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | It works like this: a POM may declare a repository to use in resolving certain artifacts.</span></span><br><span class="line"><span class="comment">   | However, this repository may have problems with heavy traffic at times, so people have mirrored</span></span><br><span class="line"><span class="comment">   | it to several places.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | That repository definition will have a unique id, so we can create a mirror reference for that</span></span><br><span class="line"><span class="comment">   | repository, to be used as an alternate download site. The mirror site will be the preferred</span></span><br><span class="line"><span class="comment">   | server for that repository.</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mirror</span></span><br><span class="line"><span class="comment">     | Specifies a repository mirror site to use instead of a given repository. The repository that</span></span><br><span class="line"><span class="comment">     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used</span></span><br><span class="line"><span class="comment">     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">    &lt;mirror&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;mirrorId&lt;/id&gt;</span></span><br><span class="line"><span class="comment">      &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;</span></span><br><span class="line"><span class="comment">      &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;</span></span><br><span class="line"><span class="comment">      &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt;</span></span><br><span class="line"><span class="comment">    &lt;/mirror&gt;</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliment<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyah maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>uk<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Human Readable Name for this Mirror.<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://uk.maven.org/maven2/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>CN<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>OSChina Central<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.oschina.net/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>internal nexus repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;url&gt;http://192.168.1.100:8081/nexus/content/groups/public/&lt;/url&gt;--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.maven.apache.org/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- profiles</span></span><br><span class="line"><span class="comment">   | This is a list of profiles which can be activated in a variety of ways, and which can modify</span></span><br><span class="line"><span class="comment">   | the build process. Profiles provided in the settings.xml are intended to provide local machine-</span></span><br><span class="line"><span class="comment">   | specific paths and repository locations which allow the build to work in the local environment.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | For example, if you have an integration testing plugin - like cactus - that needs to know where</span></span><br><span class="line"><span class="comment">   | your Tomcat instance is installed, you can provide a variable here such that the variable is</span></span><br><span class="line"><span class="comment">   | dereferenced during the build process to configure the cactus plugin.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles</span></span><br><span class="line"><span class="comment">   | section of this document (settings.xml) - will be discussed later. Another way essentially</span></span><br><span class="line"><span class="comment">   | relies on the detection of a system property, either matching a particular value for the property,</span></span><br><span class="line"><span class="comment">   | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a</span></span><br><span class="line"><span class="comment">   | value of &#x27;1.4&#x27; might activate a profile when the build is executed on a JDK version of &#x27;1.4.2_07&#x27;.</span></span><br><span class="line"><span class="comment">   | Finally, the list of active profiles can be specified directly from the command line.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | <span class="doctag">NOTE:</span> For profiles defined in the settings.xml, you are restricted to specifying only artifact</span></span><br><span class="line"><span class="comment">   |       repositories, plugin repositories, and free-form properties to be used as configuration</span></span><br><span class="line"><span class="comment">   |       variables for plugins in the POM.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- profile</span></span><br><span class="line"><span class="comment">     | Specifies a set of introductions to the build process, to be activated using one or more of the</span></span><br><span class="line"><span class="comment">     | mechanisms described above. For inheritance purposes, and to activate profiles via &lt;activatedProfiles/&gt;</span></span><br><span class="line"><span class="comment">     | or the command line, profiles have to have an ID that is unique.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | An encouraged best practice for profile identification is to use a consistent naming convention</span></span><br><span class="line"><span class="comment">     | for profiles, such as &#x27;env-dev&#x27;, &#x27;env-test&#x27;, &#x27;env-production&#x27;, &#x27;user-jdcasey&#x27;, &#x27;user-brett&#x27;, etc.</span></span><br><span class="line"><span class="comment">     | This will make it more intuitive to understand what the set of introduced profiles is attempting</span></span><br><span class="line"><span class="comment">     | to accomplish, particularly when you only have a list of profile id&#x27;s for debug.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | This profile example uses the JDK version to trigger activation, and provides a JDK-specific repo.</span></span><br><span class="line"><span class="comment">    &lt;profile&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;jdk-1.4&lt;/id&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      &lt;activation&gt;</span></span><br><span class="line"><span class="comment">        &lt;jdk&gt;1.4&lt;/jdk&gt;</span></span><br><span class="line"><span class="comment">      &lt;/activation&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      &lt;repositories&gt;</span></span><br><span class="line"><span class="comment">        &lt;repository&gt;</span></span><br><span class="line"><span class="comment">          &lt;id&gt;jdk14&lt;/id&gt;</span></span><br><span class="line"><span class="comment">          &lt;name&gt;Repository for JDK 1.4 builds&lt;/name&gt;</span></span><br><span class="line"><span class="comment">          &lt;url&gt;http://www.myhost.com/maven/jdk14&lt;/url&gt;</span></span><br><span class="line"><span class="comment">          &lt;layout&gt;default&lt;/layout&gt;</span></span><br><span class="line"><span class="comment">          &lt;snapshotPolicy&gt;always&lt;/snapshotPolicy&gt;</span></span><br><span class="line"><span class="comment">        &lt;/repository&gt;</span></span><br><span class="line"><span class="comment">      &lt;/repositories&gt;</span></span><br><span class="line"><span class="comment">    &lt;/profile&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">     | Here is another profile, activated by the system property &#x27;target-env&#x27; with a value of &#x27;dev&#x27;,</span></span><br><span class="line"><span class="comment">     | which provides a specific path to the Tomcat instance. To use this, your plugin configuration</span></span><br><span class="line"><span class="comment">     | might hypothetically look like:</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | ...</span></span><br><span class="line"><span class="comment">     | &lt;plugin&gt;</span></span><br><span class="line"><span class="comment">     |   &lt;groupId&gt;org.myco.myplugins&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">     |   &lt;artifactId&gt;myplugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     |   &lt;configuration&gt;</span></span><br><span class="line"><span class="comment">     |     &lt;tomcatLocation&gt;$&#123;tomcatPath&#125;&lt;/tomcatLocation&gt;</span></span><br><span class="line"><span class="comment">     |   &lt;/configuration&gt;</span></span><br><span class="line"><span class="comment">     | &lt;/plugin&gt;</span></span><br><span class="line"><span class="comment">     | ...</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | <span class="doctag">NOTE:</span> If you just wanted to inject this configuration whenever someone set &#x27;target-env&#x27; to</span></span><br><span class="line"><span class="comment">     |       anything, you could just leave off the &lt;value/&gt; inside the activation-property.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">    &lt;profile&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;env-dev&lt;/id&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      &lt;activation&gt;</span></span><br><span class="line"><span class="comment">        &lt;property&gt;</span></span><br><span class="line"><span class="comment">          &lt;name&gt;target-env&lt;/name&gt;</span></span><br><span class="line"><span class="comment">          &lt;value&gt;dev&lt;/value&gt;</span></span><br><span class="line"><span class="comment">        &lt;/property&gt;</span></span><br><span class="line"><span class="comment">      &lt;/activation&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      &lt;properties&gt;</span></span><br><span class="line"><span class="comment">        &lt;tomcatPath&gt;/path/to/tomcat/instance&lt;/tomcatPath&gt;</span></span><br><span class="line"><span class="comment">      &lt;/properties&gt;</span></span><br><span class="line"><span class="comment">    &lt;/profile&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- activeProfiles</span></span><br><span class="line"><span class="comment">   | List of profiles that are active for all builds.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">  &lt;activeProfiles&gt;</span></span><br><span class="line"><span class="comment">    &lt;activeProfile&gt;alwaysActiveProfile&lt;/activeProfile&gt;</span></span><br><span class="line"><span class="comment">    &lt;activeProfile&gt;anotherAlwaysActiveProfile&lt;/activeProfile&gt;</span></span><br><span class="line"><span class="comment">  &lt;/activeProfiles&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>只是修改了mirrors部分，使用了阿里云镜像加速国内下载速度。</p>
</li>
<li><p>设置项目所需包</p>
<p>修改<code>pom.xml</code>文件，以下内容为本人使用成功的配置文件内容，仅作参考</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mango<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssmTest<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        工程编译版本，一般与安装的JDK版本一致--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>19<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>19<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--统一的版本管理--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>6.0.6<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slf4j.version</span>&gt;</span>2.0.5<span class="tag">&lt;/<span class="name">slf4j.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>8.0.32<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.5.13<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- spring --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.19<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Junit--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--数据库驱动--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Servlet - JSP --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        @Resource注解依赖包--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.annotation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.annotation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Spring整合ORM --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        spring整合mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- log  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.20.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--加入对json转换--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- JSON: jackson --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.14.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.14.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.14.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.jr<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-jr-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.14.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    http请求--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-webflux<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>添加Web模块</p>
<p><code>File-&gt;Project Structure-&gt;Modules</code></p>
<p>如图操作</p>
<p><img src="https://pic.mstzf.cn/blog/202305071433103.png" alt="image-20230507143328815"></p>
<p>添加后内容保持默认，确认后即可导入web模块</p>
</li>
<li><p>安装Tomcat</p>
<p>可以参考以下教程</p>
<a class="tag-Link" target="_blank" href="https://blog.csdn.net/Wxy971122/article/details/123508532">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.csdn.net/Wxy971122/article/details/123508532.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">Wxy1122.</div>
            <div class="tag-link-sitename">[IntelliJ IDEA中配置Tomcat（超详细）_idea配置tomcat_Wxy1122.的博客-CSDN博客</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a></li>
</ol>
<h2 id="SSM配置文件"><a href="#SSM配置文件" class="headerlink" title="SSM配置文件"></a>SSM配置文件</h2><ol>
<li><p>jdbc配置文件</p>
<p>在<code>resources-&gt;db</code>下新建jdbc.properties文件，其中内容参考如下</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span> = <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span> = <span class="string">jdbc:mysql://localhost:3306/xxx?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=GMT</span></span><br><span class="line"><span class="attr">jdbc.username</span> = <span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span> = <span class="string">root</span></span><br></pre></td></tr></table></figure>

<p>由于使用的MySQL版本为8，所以驱动才使用为<code>com.mysql.cj.jdbc.Driver</code>，由于没有在MySQL中做过测试，不能确定在MySQL 5中也能正常使用</p>
<p><strong>jdbc.url中的xxx用自己数据库名称替换</strong></p>
</li>
<li><p>新建mybatis控制文件</p>
<p>在db下新建mybatis.xml文件</p>
<p>由于大部分和MyBatis相关配置文件都会和Spring的配置文件整合到一起，这里的Mybatis控制文件只起到辅助作用，参考代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!-- 开启延迟加载 该项默认为false，即所有关联属性都会在初始化时加载</span><br><span class="line">        true表示延迟按需加载 --&gt;</span><br><span class="line">    &lt;settings&gt;</span><br><span class="line">        &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;!-- 开启二级缓存 --&gt;</span><br><span class="line">        &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;/settings&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>Spring整合MyBatis</p>
<p>在<code>resources-&gt;spring</code>下新建applicationContext.xml文件，将Spring和MyBatis配置文件整合在一起，参考代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">       xmlns:aop=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span> xmlns:tx=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/aop</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/aop/spring-aop.xsd</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/tx</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 开启注解扫描，要扫描的是service和dao层的注解，要忽略web层注解，因为web层让SpringMVC框架去管理 --&gt;</span><br><span class="line">    &lt;context:component-scan base-<span class="keyword">package</span>=<span class="string">&quot;com.mango&quot;</span>&gt;</span><br><span class="line">        &lt;!-- 配置要忽略的注解 --&gt;</span><br><span class="line">        &lt;context:exclude-filter type=<span class="string">&quot;annotation&quot;</span> expression=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span><br><span class="line">    &lt;/context:component-scan&gt;</span><br><span class="line">    &lt;!-- 引入配置文件 --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;propertyConfigurer&quot;</span></span><br><span class="line">          class=<span class="string">&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;location&quot;</span> value=<span class="string">&quot;classpath:db/jdbc.properties&quot;</span> /&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--Spring整合Mybatisl框架--&gt;</span><br><span class="line">    &lt;!-- 配置C3P0的连接池对象 --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;dataSource&quot;</span> class=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;driverClassName&quot;</span> value=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;url&quot;</span> value=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 配置SessionFactory的Bean --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;sessionFactory&quot;</span> class=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 注入数据源 --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;dataSource&quot;</span> ref=<span class="string">&quot;dataSource&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 指定MyBatis配置文件的位置 --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;configLocation&quot;</span> value=<span class="string">&quot;classpath:db/mybatis.xml&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 给实体类起别名 --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;typeAliasesPackage&quot;</span> value=<span class="string">&quot;com.mango.entity&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 配置mapper接口的扫描器，将Mapper接口的实现类自动注入到IoC容器中</span><br><span class="line">    实现类Bean的名称默认为接口类名的首字母小写 --&gt;</span><br><span class="line">    &lt;bean class=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- basePackage属性指定自动扫描mapper接口所在的包 --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;basePackage&quot;</span> value=<span class="string">&quot;com.mango.dao&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--SqlMapConfig.xml和jdbcConfig.properties可以删除了--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--配置Spring框架声明式事务管理--&gt;</span><br><span class="line">    &lt;!--配置事务管理器--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;transactionManager&quot;</span> class=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;dataSource&quot;</span> ref=<span class="string">&quot;dataSource&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- 配置事务的通知 --&gt;</span><br><span class="line">    &lt;tx:advice id=<span class="string">&quot;txAdvice&quot;</span> transaction-manager=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><br><span class="line">        &lt;tx:attributes&gt;</span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;find*&quot;</span> propagation=<span class="string">&quot;SUPPORTS&quot;</span> read-only=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;*&quot;</span> isolation=<span class="string">&quot;DEFAULT&quot;</span>/&gt;</span><br><span class="line">        &lt;/tx:attributes&gt;</span><br><span class="line">    &lt;/tx:advice&gt;</span><br><span class="line">    &lt;!-- 配置AOP增强 --&gt;</span><br><span class="line">    &lt;aop:config&gt;</span><br><span class="line">&lt;!--        &lt;aop:advisor advice-ref=<span class="string">&quot;txAdvice&quot;</span> pointcut=<span class="string">&quot;execution(* com.mango.service.impl.*.*(..))&quot;</span>/&gt;--&gt;</span><br><span class="line">        &lt;!-- 配置切入点表达式 --&gt;</span><br><span class="line">        &lt;aop:pointcut expression=<span class="string">&quot;execution(* com.mango.service.impl.*.*(..))&quot;</span> id=<span class="string">&quot;pt1&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- 建立通知和切入点表达式的关系 --&gt;</span><br><span class="line">        &lt;aop:advisor advice-ref=<span class="string">&quot;txAdvice&quot;</span> pointcut-ref=<span class="string">&quot;pt1&quot;</span>/&gt;</span><br><span class="line">    &lt;/aop:config&gt;</span><br><span class="line">&lt;/beans&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>Springmvc配置文件</p>
<p>在<code>resources-&gt;spring</code>下新建springmvc.xml文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置@controller扫描包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.mango.controller&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--使用Annotation自动注册Bean,扫描@Controller和@ControllerAdvice--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.mango&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- base-package 如果多个，用“,”分隔 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--控制器增强，使一个Controller成为全局的异常处理类，类中用@ExceptionHandler方法注解的方法可以处理所有Controller发生的异常--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置注解驱动，相当于同时使用最新处理器映射跟处理器适配器,对json数据响应提供支持 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 输出对象转JSON支持 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;messageConverters&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;supportedMediaTypes&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/plain;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置视图解析器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>web模块控制文件</p>
<p>编辑<code>web-&gt;WEB-INF-&gt;web.xml</code>文件，内容如下</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee</span></span></span><br><span class="line"><span class="string"><span class="tag">         http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置前端控制器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 指定配置文件位置和名称 如果不设置,默认找/WEB-INF/&lt;servlet-name&gt;-servlet.xml --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring/springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">async-supported</span>&gt;</span>true<span class="tag">&lt;/<span class="name">async-supported</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置 spring 提供的监听器，用于启动服务时加载容器 。</span></span><br><span class="line"><span class="comment">     该监听器只能加载 WEB-INF 目录中名称为 applicationContext.xml 的配置文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 手动指定 spring 配置文件位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring/applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>日志配置</p>
<p>在<code>resources-&gt;log</code>下新建log4j.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">DEBUG, stdout </span></span><br><span class="line"><span class="attr">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender </span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout </span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%5p %d %C: %m%n</span></span><br><span class="line"></span><br><span class="line"><span class="attr">log4j.logger.java.sql.ResultSet</span>=<span class="string">INFO</span></span><br><span class="line"><span class="attr">log4j.logger.org.apache</span>=<span class="string">INFO</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.Connection</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.Statement</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.PreparedStatement</span>=<span class="string">DEBUG</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>在<code>test-&gt;java</code>下更具需求新建测试类</p>
<p>新建测试数据库test，其中有表student（id，name，age）</p>
<p>在之前新建的entity包中新建Student的实现类(getter、setter方法以省略)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mango.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&#x27;&quot;</span> + age + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ol>
<li><p>对Spring和MyBatis整合配置测试</p>
<p>在包dao中新建学生接口<code>StudentDao.java</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.mango.dao;</span><br><span class="line"></span><br><span class="line">import com.mango.entity.Student;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public interface StudentDao &#123;</span><br><span class="line">    public List&lt;Student&gt; findAll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在同样位置新建同名mapper文件<code>StudentDao.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--命名空间为StudentDao接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.mango.dao.StudentDao&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    id为接口中的方法名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span>&gt;</span>SELECT * FROM Student<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在service包中新建service接口和实现类</p>
<p><img src="https://pic.mstzf.cn/blog/202305071549761.png" alt="image-20230507154913975"></p>
<p>学生业务层接口<code>StudentService.java</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mango.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mango.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//千万不要忘记添加Service注解</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现类<code>StudentServiceImpl.java</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mango.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mango.dao.StudentDao;</span><br><span class="line"><span class="keyword">import</span> com.mango.entity.Student;</span><br><span class="line"><span class="keyword">import</span> com.mango.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentDao studentDao;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在test中新建Spring和MyBatis整合测试代码<code>SpringMyBatis.java</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.mango.entity.Student;</span><br><span class="line"><span class="keyword">import</span> com.mango.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations=&quot;classpath:spring/applicationContext.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMyBatis</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentService studentService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Student&gt; studentList=studentService.findAll();</span><br><span class="line">        <span class="keyword">for</span> (Student student:studentList)&#123;</span><br><span class="line">            System.out.println(student.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202305071615255.png" alt="image-20230507161529932"></p>
<p>测试成功</p>
</li>
<li><p>Spring整合SpringMVC测试</p>
<p>在Controller包中新建StudentController.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mango.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mango.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="comment">//千万不要忘记@Controller</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentService studentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test&quot; ,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentService.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>将项目打包<code>File-&gt;Project Structure-&gt;Artifacts</code></p>
<p><img src="https://pic.mstzf.cn/blog/202305071622339.png" alt="image-20230507162236159"></p>
<p>如果有出现部分包不完全可以下图操作</p>
<p><img src="https://pic.mstzf.cn/blog/202305071623965.png" alt="image-20230507162342826"></p>
<p>修改Tomcat配置（已正确安装Tomcat的情况下）</p>
<p><img src="https://pic.mstzf.cn/blog/202305071626940.png" alt="image-20230507162648849"></p>
<p><img src="https://pic.mstzf.cn/blog/202305071627312.png" alt="image-20230507162740440"></p>
<p>启动Tomcat后在浏览器中访问<a href="http://localhost:8080/test">localhost:8080&#x2F;test</a> 不报错有返回值，说明Spring整合SpringMVC配置成功。</p>
<p><img src="https://pic.mstzf.cn/blog/202305071632478.png" alt="image-20230507163245993"></p>
</li>
</ol>
]]></content>
      <categories>
        <category>学习笔记</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Shell脚本自动检查并挂载硬盘</title>
    <url>/posts/Shell-Attach-the-hard-disk/</url>
    <content><![CDATA[<p>挂载在树莓派上的硬盘经常自己取消了挂载，就改写了一个自动检测并挂载硬盘的Shell脚本</p>
<p><strong>代码改自：</strong></p>
<a class="tag-Link" target="_blank" href="https://www.cnblogs.com/zhuangquan/p/13555793.html">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/www.cnblogs.com/zhuangquan/p/13555793.html.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">一个不知道干嘛的小萌新</div>
            <div class="tag-link-sitename">Shell编程实例 —— 自动检测并挂载硬盘》</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">判断是否挂载</span></span><br><span class="line">IS_MOUNT=`df -h | grep /home/pi/Disk | wc -l`</span><br><span class="line">DISK_NAME=`lsblk -l | awk &#x27;&#123;if ($3==&quot;0&quot;) print&#125;&#x27; | grep sda | awk &#x27;&#123;print $1&#125;&#x27;`</span><br><span class="line">if [ $IS_MOUNT -eq 0 ]; then</span><br><span class="line">        echo 硬盘未挂载</span><br><span class="line">        # 获取硬盘地址 判断硬盘地址是否存在</span><br><span class="line">        if [ -b /dev/$DISK_NAME ]; then</span><br><span class="line">                echo 硬盘即将挂载</span><br><span class="line">                mount /dev/$DISK_NAME /home/pi/Disk</span><br><span class="line">                sync</span><br><span class="line">        else</span><br><span class="line">                echo 设备不存在</span><br><span class="line">        fi</span><br><span class="line">elif [ $IS_MOUNT -eq 1 ]; then</span><br><span class="line">        echo 硬盘已挂载</span><br><span class="line">else</span><br><span class="line">        echo ERROR</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p><strong>开机自动挂载硬盘</strong></p>
<p>获取硬盘<code>UUID</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">blkid -s UUID /dev/sda1</span><br></pre></td></tr></table></figure>

<p>写入配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/fstab</span><br><span class="line"></span><br><span class="line"># 配置</span><br><span class="line">UUID=9032ef41-46cf-4bc6-ac01-be54be5f6c49 /data ext4 defaults 0 0</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Linux</category>
        <category>Shell脚本自动检查并挂载硬盘</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Shell脚本自动检查并挂载硬盘</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows安装ESP-IDF官方工具</title>
    <url>/posts/ESP_IDFforWindows/</url>
    <content><![CDATA[<h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p><a href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/get-started/windows-setup.html">ESP官方</a> 在Windows上的安装流程已经非常完善了，但是ESP-IDF 工具安装器在国内由于一些众所周知的原因下载速度会比较慢</p>
<h2 id="下载ESP-IDF工具安装器"><a href="#下载ESP-IDF工具安装器" class="headerlink" title="下载ESP-IDF工具安装器"></a>下载ESP-IDF工具安装器</h2><p><a href="https://dl.espressif.com/dl/esp-idf/?idf=4.4">ESP-IDF工具安装器</a> 最好选择离线安装器，在线安装器安装的速度是真心慢（能科学上网的请自便）。</p>
<p><img src="https://pic.mstzf.cn//blog/202203072155757.png" alt="image-20220307215551250"></p>
<p>如果安装工具下载太慢，可以使用我在阿里云盘提前下载好的，「esp-idf-tools-setup-offline-4.4.exe」<a href="https://www.aliyundrive.com/s/W1D4qpuJVSx">https://www.aliyundrive.com/s/W1D4qpuJVSx</a> 到2022&#x2F;03&#x2F;07 为止还是最新的4.4版本。</p>
<h2 id="离线安装"><a href="#离线安装" class="headerlink" title="离线安装"></a>离线安装</h2><p>开始的几个步骤一般都不会出现错误，一直往下就行。</p>
<p><img src="https://pic.mstzf.cn//blog/202203072201798.png" alt="image-20220307220151437"></p>
<ul>
<li>安装前检查，若出现错误可以使用应用修复，没错误继续下一步</li>
</ul>
<p><img src="https://pic.mstzf.cn//blog/202203072204045.png" alt="image-20220307220418927"></p>
<ul>
<li>下载或使用ESP-IDF，第一次安装选择下载ESP-IDF就行，如果之前有安装使用过，要在先前的基础上安装就选择使用现有的ESP－IDF目录</li>
</ul>
<p><img src="https://pic.mstzf.cn//blog/202203072210392.png" alt="image-20220307221000905"></p>
<ul>
<li>更改安装路径，C盘较大的可以忽略，若C盘空间不足一定要更改安装路径</li>
</ul>
<p><img src="https://pic.mstzf.cn//blog/202203072210769.png" alt="image-20220307221026246"></p>
<ul>
<li>ESP-Tool会安装ESP在编译和烧录软件时必要的各种软件，和安装目录一样可以根据自己的需要修改路径</li>
</ul>
<p><img src="https://pic.mstzf.cn//blog/202203072216780.png" alt="image-20220307221631603"></p>
<ul>
<li>ESP-IDF 工具安装器会下载 Github 发布版本中附带的一些工具，如果访问 Github 较为缓慢，可以选择使用Espressif，从而优先选择 Espressif 的下载服务器进行 Github 资源下载。</li>
</ul>
<p><img src="https://pic.mstzf.cn//blog/202203072218748.png" alt="image-20220307221803588"></p>
<p><img src="https://pic.mstzf.cn//blog/202203072219124.png" alt="image-20220307221918096"></p>
<ul>
<li>个人感觉这里安装还是比较快的</li>
</ul>
<p><img src="https://pic.mstzf.cn//blog/202203072331507.png" alt="image-20220307233119122"></p>
<ul>
<li>安装完成</li>
</ul>
<p><img src="https://pic.mstzf.cn//blog/202203072332615.png" alt="image-20220307233221626"></p>
<ul>
<li>弹出的命令行不要关闭，等待安装完成后再关闭</li>
</ul>
<h2 id="添加环境变量"><a href="#添加环境变量" class="headerlink" title="添加环境变量"></a>添加环境变量</h2><p>新建环境变量，可以为当前用户添加也可以添加到系统的环境变量中</p>
<p>在Path中添加</p>
<p><img src="https://pic.mstzf.cn//blog/202203082316152.png" alt="image-20220308231635909"></p>
<p>可以直接在Path中添加绝对路径，也可以新建一个变量，变量格式如下，在Path中将绝对路径中与变量值相同的部分用%IDF_PATH%代替</p>
<p>变量名：IDF_PATH</p>
<p>变量值：指定到安装目录下的Espressif（也可能是.espressif）</p>
<p><img src="https://pic.mstzf.cn//blog/202203081044784.png" alt="image-20220308104400515"></p>
<p>在找到环境变量中的Path，打开并新建环境变量</p>
<h2 id="配置VScode"><a href="#配置VScode" class="headerlink" title="配置VScode"></a>配置VScode</h2><p>在扩展中搜索ESP-IDF，选择红色图标那个安装</p>
<p><img src="https://pic.mstzf.cn//blog/202203081153709.png" alt="image-20220308115335519"></p>
<p>安装好扩展后，按F1，输入esp-idf configure</p>
<p><img src="https://pic.mstzf.cn//blog/202203081154931.png" alt="image-20220308115458760"></p>
<p><img src="https://pic.mstzf.cn//blog/202203081156211.png" alt="image-20220308115634938"></p>
<p>由于之前已经配置过，选择第三个：使用现有位置等待安装完成 </p>
<p><img src="https://pic.mstzf.cn//blog/202203081159066.png" alt="image-20220308115923581"></p>
<p>然后就可以USB连接ESP32芯片，再通过F1 输入new project创建自己的新项目</p>
<p><img src="https://pic.mstzf.cn//blog/202203081210032.jpg" alt="IMG_20220308_120208"></p>
]]></content>
      <categories>
        <category>小妙招</category>
        <category>ESP</category>
      </categories>
      <tags>
        <tag>ESP</tag>
        <tag>小妙招</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows环境下安装gcc编译器</title>
    <url>/posts/windowsgcc/</url>
    <content><![CDATA[<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>在使用VSCode时，我们可以比较方便的编写C语言的代码，但是VSCode并没有自带编译器，这时候我们就需要去安装其他的编译器来对写好的代码进行编译。在Windows上安装gcc编译器并不像Linux中那样方便快捷。</p>
<h2 id="安装MinGW"><a href="#安装MinGW" class="headerlink" title="安装MinGW"></a>安装MinGW</h2><p>进入mingw官网下载安装程序</p>
<p><a href="https://sourceforge.net/projects/mingw-w64/files/mingw-w64/mingw-w64-release/">https://sourceforge.net/projects/mingw-w64/files/mingw-w64/mingw-w64-release/</a></p>
<p>打开后可以看到如下界面</p>
<p><img src="https://pic.mstzf.cn/blog/202204031722887.png" alt="image-20220403172249018"></p>
<p><strong>往下滑</strong></p>
<p><img src="https://pic.mstzf.cn/blog/202204031728687.png" alt="image-20220403172828690"></p>
<h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h2><p><strong>如果选择了在线安装要选择对应架构</strong></p>
<p><img src="https://pic.mstzf.cn//blog/202202042322128.png" alt="MinGW选择参数"></p>
<ul>
<li>Version（版本号）：一般默认就行</li>
<li>Architecture（架构）：64位系统选择x86_64，32位系统选择i686</li>
<li>Threads（设置线程标准）：可选posix或win32;</li>
<li>Exception（异常处理系统）：x86_64可选为seh和sjlj，i686为dwarf和sjlj;</li>
<li>Build revision（构建版本号）：默认就行</li>
</ul>
<p>下一步，安装路径最好自己设置，便于添加环境变量</p>
<p><strong>如果下载的是压缩包文件，则只需要将文件解压缩到自己想要的GCC安装目录下即可</strong></p>
<h2 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h2><p>“此电脑-&gt;属性-&gt;高级系统设置-&gt;环境变量”</p>
<p>在系统变量的Path中新加入GCC的安装路径到&#x2F;bin结束</p>
<p><img src="https://pic.mstzf.cn//blog/202202042324663.png" alt="MinGW环境变量"></p>
<p><strong>Win+R输入CMD调出Windows终端，输入“gcc -v”</strong></p>
<p><img src="https://pic.mstzf.cn//blog/202202042325375.png" alt="GCC安装完成检验"></p>
<p>如果出现以下界面，说明gcc已经安装成功</p>
]]></content>
      <categories>
        <category>小妙招</category>
        <category>gcc</category>
      </categories>
      <tags>
        <tag>小妙招</tag>
        <tag>gcc</tag>
      </tags>
  </entry>
  <entry>
    <title>git简明使用教程</title>
    <url>/posts/git_concisetutorial/</url>
    <content><![CDATA[<h2 id="创建本地仓库"><a href="#创建本地仓库" class="headerlink" title="创建本地仓库"></a>创建本地仓库</h2><p>git init ·	将所在目录设置为git仓库</p>
<p>git init -bare &lt;文件名&gt; 	新建一个裸仓库</p>
<h2 id="拷贝远程仓库到本地"><a href="#拷贝远程仓库到本地" class="headerlink" title="拷贝远程仓库到本地"></a>拷贝远程仓库到本地</h2><p>git clone &lt;链接&gt;	 拷贝仓库</p>
<h2 id="添加文件到版本库"><a href="#添加文件到版本库" class="headerlink" title="添加文件到版本库"></a>添加文件到版本库</h2><p>git add . 	添加所有文件</p>
<p>git add &lt;文件名&gt; 	添加指定文件</p>
<h2 id="撤销文件添加"><a href="#撤销文件添加" class="headerlink" title="撤销文件添加"></a>撤销文件添加</h2><p>git reset HEAD . 	撤销所有文件添加</p>
<p>git reset HEAD &lt;文件名&gt; 	撤销添加指定文件</p>
<p>git reset -mixed 	文件退出暂存区，但修改保留</p>
<h2 id="文件提交到仓库"><a href="#文件提交到仓库" class="headerlink" title="文件提交到仓库"></a>文件提交到仓库</h2><p>git commit -m “提交的注释”</p>
<h2 id="查看提交"><a href="#查看提交" class="headerlink" title="查看提交"></a>查看提交</h2><p>git status</p>
<h2 id="远程仓库管理"><a href="#远程仓库管理" class="headerlink" title="远程仓库管理"></a>远程仓库管理</h2><p>git remote add &lt;版本库名&gt; &lt;链接&gt; 	添加远程版本库</p>
<p>git remote remove &lt;版本库名&gt;	 删除远程版本库</p>
<h2 id="推送到远程主机"><a href="#推送到远程主机" class="headerlink" title="推送到远程主机"></a>推送到远程主机</h2><p>git push &lt;版本库名&gt; &lt;远程分支名&gt;</p>
]]></content>
      <categories>
        <category>小妙招</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>小妙招</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx做web代理偶尔网页出现PHP Version界面解决办法</title>
    <url>/posts/nginx_phpversion/</url>
    <content><![CDATA[<h2 id="出现场景"><a href="#出现场景" class="headerlink" title="出现场景"></a>出现场景</h2><p>之前在树莓派上利用Nginx和NextCloud搭建了一个自用的网盘，NextCloud需要PHP作为运行环境，但是时不时会出现网页无法正常显示的情况，之前一直以为是通过frp做内网穿透时和nginx监听的80端口冲突</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p><strong>究其原因是因为安装PHP时附带下载了Apache2，apache2启动后占用了80端口导致Nginx无法正常启动</strong></p>
<ul>
<li><p>查看80端口占用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># lsof -i:80</span><br></pre></td></tr></table></figure>
</li>
<li><p>停止apache2</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># systemctl disable apache2</span><br><span class="line"># systemctl stop apache2</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启Nginx</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># systemctl restart nginx</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="https://pic.mstzf.cn/blog/202305241157359.png" alt="步骤截图"></p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>使用MySql触发器简化各表数据操作</title>
    <url>/posts/MySql_Trigger/</url>
    <content><![CDATA[<h2 id="触发器基本语法"><a href="#触发器基本语法" class="headerlink" title="触发器基本语法"></a>触发器基本语法</h2><ol>
<li><p>生成一个触发器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TRIGGER 触发器名 触发事件(BEFORE|AFTER INSERT|UPDATE|DELETE)</span><br><span class="line">ON 表名 FOR EACH ROW </span><br><span class="line">触发器激活后需要执行的语句</span><br></pre></td></tr></table></figure>

<p><strong><font style="color:red">一些注意事项</font></strong></p>
<ul>
<li>同一个数据库中不能创建同名触发器</li>
<li>在同一张表中不能出现触发条件相同的触发器</li>
<li>使用<code>NEW</code>和<code>OLD</code>来获取数据变化前后的记录值</li>
<li>如果激活后只有一条操作，可以直接写，如果需要复杂操作则需要使用<code>BEGIN...END;</code>语句包围</li>
</ul>
</li>
<li><p>查看触发器</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TRIGGERS ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除触发器</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> 触发器名; </span><br></pre></td></tr></table></figure>
</li>
<li><p>修改触发器</p>
<p>将已有触发器删除后再重新创建😂</p>
</li>
</ol>
<h2 id="一个简单的触发器示例"><a href="#一个简单的触发器示例" class="headerlink" title="一个简单的触发器示例"></a>一个简单的触发器示例</h2> <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> update_userinfo_trigger </span><br><span class="line">AFTER <span class="keyword">UPDATE</span> <span class="keyword">ON</span> <span class="keyword">user</span></span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	IF NEW.user_name <span class="operator">&lt;&gt;</span> OLD.user_name <span class="keyword">THEN</span></span><br><span class="line">		<span class="keyword">UPDATE</span> task_my <span class="keyword">SET</span> user_name <span class="operator">=</span> NEW.user_name <span class="keyword">WHERE</span> user_id <span class="operator">=</span> NEW.id;</span><br><span class="line">		<span class="keyword">UPDATE</span> table1 <span class="keyword">SET</span> user_name <span class="operator">=</span> NEW.user_name <span class="keyword">WHERE</span> user_id <span class="operator">=</span> NEW.id;</span><br><span class="line">		<span class="keyword">UPDATE</span> table2 <span class="keyword">SET</span> user_name <span class="operator">=</span> NEW.user_name <span class="keyword">WHERE</span> user_id <span class="operator">=</span> NEW.id;</span><br><span class="line">	<span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>该触发器实现了，在更新user表中的name时，可以同时联动着将其他表中的name也更新掉，实现用户数据的统一</p>
]]></content>
      <categories>
        <category>Mysql</category>
        <category>触发器</category>
      </categories>
      <tags>
        <tag>MySql</tag>
        <tag>触发器</tag>
      </tags>
  </entry>
  <entry>
    <title>利用GitHub Action自动集成部署Hexo博客到服务器</title>
    <url>/posts/GitHub_action_deployment_hexo_blog/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>Hexo生成的静态博客有着安全、快速等特点，但是同时也存在一些比较明显的痛点</p>
<ul>
<li>由于没有后台，出现错误时移动端修改不方便</li>
<li>本地文件丢失，很难找回原本博客配置文件</li>
<li>没有Nodejs环境不能部署</li>
</ul>
<p>而这些问题都能通过Github Action得到比较好的解决</p>
<h2 id="Hexo本地博客创建"><a href="#Hexo本地博客创建" class="headerlink" title="Hexo本地博客创建"></a>Hexo本地博客创建</h2><div class="note info simple"><p><strong>已经有的可以跳过</strong></p>
</div>

<p><strong>第一次使用的话本地Hexo环境是肯定要有的，如果本地博客都没有的话后续步骤也没有意义了</strong></p>
<p>网上已经有比较成熟的教程，此处不做具体描述，</p>
<a class="tag-Link" target="_blank" href="https://zhuanlan.zhihu.com/p/305812430">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/zhuanlan.zhihu.com/p/305812430.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">从0开始用Hexo框架搭建个人博客（无坑版）</div>
            <div class="tag-link-sitename">清菡</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<a class="tag-Link" target="_blank" href="https://zhuanlan.zhihu.com/p/126243913">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/zhuanlan.zhihu.com/p/126243913.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">Hexo+阿里云，手把手教你如何搭建属于自己的个人博客（超详细）</div>
            <div class="tag-link-sitename">到站了还不下车</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<h2 id="GitHub仓库创建"><a href="#GitHub仓库创建" class="headerlink" title="GitHub仓库创建"></a>GitHub仓库创建</h2><p>在创建时最好选择私有，避免重要内容泄露</p>
<p><img src="https://pic.mstzf.cn/blog/202208112339341.png" alt="image-20220811233905181"></p>
<h2 id="新建工作流文件"><a href="#新建工作流文件" class="headerlink" title="新建工作流文件"></a>新建工作流文件</h2><p>在博客更目录下新建<code>.github/workflows/deploy.yml</code>文件，<code>deploy.yml</code>文件的文件名可以随意起，只要是yml文件就行</p>
<p>将配置内容复制到新建文件中</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 当有改动推送到master分支时，启动Action</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">Hexo博客自动部署</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span> </span><br><span class="line"></span><br><span class="line">  <span class="attr">release:</span></span><br><span class="line">    <span class="attr">types:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">published</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">检查分支</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">ref:</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Node</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">node-version:</span> <span class="string">&quot;12.x&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        export TZ=&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"><span class="string">        npm install hexo-cli -g</span></span><br><span class="line"><span class="string"></span>      <span class="attr">env:</span></span><br><span class="line">        <span class="attr">CI:</span> <span class="literal">true</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">缓存</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/cache@v1</span></span><br><span class="line">      <span class="attr">id:</span> <span class="string">cache</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">        <span class="attr">key:</span> <span class="string">$&#123;&#123;runner.OS&#125;&#125;-$&#123;&#123;hashFiles(&#x27;**/package-lock.json&#x27;)&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装依赖</span></span><br><span class="line">      <span class="attr">if:</span> <span class="string">steps.cache.outputs.cache-hit</span> <span class="type">!=</span> <span class="string">&#x27;true&#x27;</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        npm install --save</span></span><br><span class="line"><span class="string"></span>      <span class="attr">env:</span></span><br><span class="line">        <span class="attr">CI:</span> <span class="literal">true</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">生成静态文件</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        hexo clean</span></span><br><span class="line"><span class="string">        hexo generate</span></span><br><span class="line"><span class="string"></span>      <span class="attr">env:</span></span><br><span class="line">        <span class="attr">CI:</span> <span class="literal">true</span></span><br><span class="line">        </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">部署</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">burnett01/rsync-deployments@@5.2.1</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">switches:</span> <span class="string">-avzh</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">public/</span></span><br><span class="line">        <span class="attr">remote_path:</span> <span class="string">/var/hexo/</span></span><br><span class="line">        <span class="attr">remote_host:</span> <span class="string">mstzf.cn</span></span><br><span class="line">        <span class="attr">remote_port:</span> <span class="number">22</span></span><br><span class="line">        <span class="attr">remote_user:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">remote_key:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.SERVER_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p><strong>文本中流程执行结果是将静态文件部署到个人服务器中去</strong></p>
<p>其中，最后部署部分脚本通过 ssh 上的 rsync 将文件部署到远程文件夹中</p>
<ul>
<li>switches：rsync 标志，例如：<code>-avzr --delete</code></li>
<li>path：要上传文件地址，当前hexo g之后静态文件在<code>public/</code>中</li>
<li>remote_path：博客在服务器中的路径</li>
<li>remote_host：主机地址</li>
<li>remote_port：ssh连接端口号</li>
<li>remote_user：要连接的用户</li>
<li>remote_key：服务器生成的密钥</li>
</ul>
<h3 id="服务器获取ssh连接密钥"><a href="#服务器获取ssh连接密钥" class="headerlink" title="服务器获取ssh连接密钥"></a>服务器获取ssh连接密钥</h3><p>登录服务器终端，输入命令<code>ssh-keygen</code></p>
<p>出现的提示内容一路回车，最终会在<code>~/.ssh</code>生成公钥和私钥<code>id_rsa.pub</code>、<code>id_rsa</code></p>
<p>将公钥<code>id_rsa.pub</code>复制到<code>authorized_keys</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>

<p>复制一份私钥的内容</p>
<h3 id="新建secrets"><a href="#新建secrets" class="headerlink" title="新建secrets"></a>新建secrets</h3><p>登录GitHub，选择要上传博客源文件的仓库-&gt;setting下</p>
<p><img src="https://pic.mstzf.cn/blog/202208120015667.png" alt="image-20220812001540652"></p>
<ul>
<li>name：SERVER_KEY</li>
<li>Value：刚刚复制的私钥</li>
</ul>
<p>name可以随意但要和流程文件中secrets调用的名字一致</p>
<p><img src="https://pic.mstzf.cn/blog/202208120019669.png" alt="image-20220812001911234"></p>
<h2 id="检查-gitignore文件"><a href="#检查-gitignore文件" class="headerlink" title="检查.gitignore文件"></a>检查<code>.gitignore</code>文件</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br></pre></td></tr></table></figure>

<p>文件中内容表示上传要忽略的文件，如果文件不存在或者内容有缺少，要及时补充</p>
<p>否则会上传大量无用文件，在添加和提交时都会浪费大量时间</p>
<h2 id="提交博客源代码到github"><a href="#提交博客源代码到github" class="headerlink" title="提交博客源代码到github"></a>提交博客源代码到github</h2><ul>
<li>将博客根目录下和主题文件下存在的<code>.git</code>文件删除或者移动到其非博客文件夹下</li>
<li>将本地博客目录初始化文git仓库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git init #初始化</span><br><span class="line">git remote add origin &lt;github仓库ssh代码&gt;</span><br><span class="line">git checkout -b master # 切换到master分支，</span><br></pre></td></tr></table></figure>

<p>本地git仓库搭建成功后将源代码提交到GitHub仓库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<p>GitHub Action会自动执行工作流程，如果一切顺利没有差错的话，博客会自动部署到我们的服务器上去</p>
<p><img src="https://pic.mstzf.cn/blog/202208120037143.png" alt="image-20220812003735619"></p>
]]></content>
      <categories>
        <category>博客</category>
      </categories>
      <tags>
        <tag>博客</tag>
        <tag>自动部署</tag>
      </tags>
  </entry>
  <entry>
    <title>利用Python对Excel文字数字混合的数据保留小数</title>
    <url>/posts/PythonExcel/</url>
    <content><![CDATA[<div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>计算机中要安装有python才可以使用</p>
</div>

<p>在python对Excel的读写操作中，本人感觉使用xlwings还是一种比较好的方法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> xlwings <span class="keyword">as</span> xw</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">app=xw.App(visible=<span class="literal">True</span>,add_book=<span class="literal">False</span>)</span><br><span class="line"><span class="comment">#不显示Excel消息框</span></span><br><span class="line">app.display_alerts=<span class="literal">False</span> </span><br><span class="line"><span class="comment">#关闭屏幕更新,可加快宏的执行速度</span></span><br><span class="line">app.screen_updating=<span class="literal">False</span> </span><br><span class="line"><span class="comment"># 和程序在同一路径可以使用Excel文件名称</span></span><br><span class="line"><span class="comment"># 不在同一路径要用绝对路径</span></span><br><span class="line">wb=app.books.<span class="built_in">open</span>(<span class="string">&#x27;t.xlsx&#x27;</span>)</span><br><span class="line"><span class="comment"># 选择对应Excel工作簿</span></span><br><span class="line">sheet1 = wb.sheets[<span class="string">&quot;sheet1&quot;</span>]</span><br><span class="line"><span class="comment"># 循环是为了完成一列的数据</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">225</span>) :</span><br><span class="line">    <span class="comment"># 获取单元格</span></span><br><span class="line">    cell=<span class="string">&#x27;B&#x27;</span>+<span class="built_in">str</span>(i+<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># 排除空白单元格</span></span><br><span class="line">    <span class="keyword">if</span> value!=<span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># 获取单元格中的数据本分</span></span><br><span class="line">        number=re.findall(<span class="string">&quot;\d+\.?\d*&quot;</span>,value)</span><br><span class="line">        <span class="comment"># 排除没有数据部分的单元格</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(number)==<span class="number">0</span>: </span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="comment"># number是一个数列</span></span><br><span class="line">        <span class="comment"># 我的数据部分是 数据 正负号 数据 的格式 ，下面为保留小数</span></span><br><span class="line">        <span class="comment"># 可以根据自己需要修改</span></span><br><span class="line">        temp1=(<span class="string">&#x27;%.2f&#x27;</span> %<span class="built_in">float</span>(number[<span class="number">0</span>]))</span><br><span class="line">        temp2=(<span class="string">&#x27;%.2f&#x27;</span> %<span class="built_in">float</span>(number[<span class="number">1</span>]))</span><br><span class="line">        <span class="comment"># 拼接回原数据格式，根据自己需要修改</span></span><br><span class="line">        value=<span class="built_in">str</span>(temp1)+<span class="string">&#x27;±&#x27;</span>+<span class="built_in">str</span>(temp2)</span><br><span class="line">        <span class="comment"># 将新数据写回原单元格</span></span><br><span class="line">        sheet1.<span class="built_in">range</span>(cell).value=value</span><br><span class="line">wb.save()</span><br><span class="line">wb.close()</span><br><span class="line"><span class="comment"># 退出excel程序，</span></span><br><span class="line">app.quit()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Python</category>
        <category>xlwings操作Excel</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>xlwings操作Excel</tag>
      </tags>
  </entry>
  <entry>
    <title>双系统时间不一致问题解决（Win和Linux）</title>
    <url>/posts/Synchronization-time/</url>
    <content><![CDATA[<div class="note info simple"><p>本文内容只为方便自己平时查找使用，并非原创性内容</p>
</div>

<p>在Linux中使用命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo timedatectl set-local-rtc 1</span><br></pre></td></tr></table></figure>

<p>将Linux系统时间和BIOS时间同步。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo timedatectl status</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/image-20221216161944936.png" alt="image-20221216161944936"></p>
<p><strong>是最简单，命令最少的一种方法，亲测有效</strong></p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>双系统</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>双系统</tag>
      </tags>
  </entry>
  <entry>
    <title>堆叠轮播图（color ui原生小程序代码优化)</title>
    <url>/posts/mp-tower-swiper/</url>
    <content><![CDATA[<div class="note info simple"><p>界面内容并非本人原创，只是适配了原生小程序代码</p>
</div>

<p>最近找了一些小程序的组件库，发现了Color UI界面和色彩搭配都比较符合我的需求，但是在进一步了解的时候发现这个项目已经停更了很长时间，有一部分功能已经无法正常使用。</p>
<p>感兴趣的可以到作者仓库看看</p>
<a class="tag-Link" target="_blank" href="https://github.com/weilanwl/coloruicss?tab=readme-ov-file">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/github.com/weilanwl/coloruicss?tab=readme-ov-file.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">coloruicss</div>
            <div class="tag-link-sitename">github</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p>项目中的堆叠轮播图挺好看，但是没有原生小程序代码，故此进行了简单的适配</p>
<img src="https://pic.mstzf.cn/blog/202312262344387.gif" alt="1" style="zoom:67%;" />

<p>这里封装成了组件，组件属性根据自己需求修改</p>
<p><code>tower-swiper.json</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;component&quot;: true,</span><br><span class="line">  &quot;usingComponents&quot;: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>tower-swiper.wxml</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tower-swiper&quot;</span> <span class="attr">bindtouchmove</span>=<span class="string">&quot;TowerMove&quot;</span> <span class="attr">bindtouchstart</span>=<span class="string">&quot;TowerStart&quot;</span> <span class="attr">bindtouchend</span>=<span class="string">&quot;TowerEnd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tower-item &#123;&#123;item.zIndex==1?&#x27;none&#x27;:&#x27;&#x27;&#125;&#125;&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;swiperList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">style</span>=<span class="string">&quot;transform: scale(calc(0.5 + &#123;&#123;item.zIndex&#125;&#125; / 10));--index: &#123;&#123;item.zIndex&#125;&#125;;margin-left: calc(&#123;&#123;item.mLeft&#125;&#125; * 100rpx - 150rpx); z-index: &#123;&#123;item.zIndex&#125;&#125;;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;swiper-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;item.type==&#x27;image&#x27;&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">autoplay</span> <span class="attr">loop</span> <span class="attr">muted</span> <span class="attr">data-show-play-btn</span>=<span class="string">&quot;false&quot;</span> <span class="attr">objectFit</span>=<span class="string">&quot;cover&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;item.type == &#x27;video&#x27;&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>tower-swiper.wxss</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.tower-swiper</span> &#123;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">420</span>rpx;</span><br><span class="line">	<span class="attribute">position</span>: relative;</span><br><span class="line">	<span class="attribute">max-width</span>: <span class="number">750</span>rpx;</span><br><span class="line">	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tower-swiper</span> <span class="selector-class">.tower-item</span> &#123;</span><br><span class="line">	<span class="attribute">position</span>: absolute;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">300</span>rpx;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">380</span>rpx;</span><br><span class="line">	<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">	<span class="attribute">margin</span>: auto;</span><br><span class="line">	<span class="attribute">transition</span>: all <span class="number">0.2s</span> ease-in <span class="number">0s</span>;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tower-swiper</span> <span class="selector-class">.tower-item</span> <span class="selector-class">.none</span> &#123;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tower-swiper</span> <span class="selector-class">.tower-item</span> <span class="selector-class">.swiper-item</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">	<span class="attribute">border-radius</span>: <span class="number">6</span>rpx;</span><br><span class="line">	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>tower-swiper.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的属性列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="attr">swiperList</span>:&#123;</span><br><span class="line">      <span class="attr">type</span>:<span class="title class_">Array</span>,</span><br><span class="line">      <span class="attr">value</span>:[&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://ossweb-img.qq.com/images/lol/web201310/skin/big84000.jpg&#x27;</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://ossweb-img.qq.com/images/lol/web201310/skin/big37006.jpg&#x27;</span>,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://ossweb-img.qq.com/images/lol/web201310/skin/big39000.jpg&#x27;</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg&#x27;</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://ossweb-img.qq.com/images/lol/web201310/skin/big25011.jpg&#x27;</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://ossweb-img.qq.com/images/lol/web201310/skin/big21016.jpg&#x27;</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://ossweb-img.qq.com/images/lol/web201310/skin/big99008.jpg&#x27;</span></span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">towerStart</span>:&#123;</span><br><span class="line">      <span class="attr">type</span>:<span class="title class_">Number</span>,</span><br><span class="line">      <span class="attr">value</span>:<span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">timer</span>:<span class="literal">null</span>,</span><br><span class="line">    <span class="attr">towerStart</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">direction</span>: <span class="string">&#x27;left&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">lifetimes</span>:&#123;</span><br><span class="line">    <span class="title function_">attached</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title class_">TowerSwiper</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">direction</span> = <span class="string">&#x27;left&#x27;</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">direction</span>: <span class="string">&quot;left&quot;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">swiperOn</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的方法列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">swiperOn</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> _this = <span class="variable language_">this</span></span><br><span class="line">      <span class="keyword">let</span> timer = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">timer</span></span><br><span class="line">      <span class="keyword">if</span>(!timer)&#123;</span><br><span class="line">        timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">          _this.<span class="title class_">TowerEnd</span>()</span><br><span class="line">        &#125;,<span class="number">1000</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          timer</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 初始化towerSwiper</span></span><br><span class="line">    <span class="title class_">TowerSwiper</span>() &#123;</span><br><span class="line">      <span class="keyword">let</span> list = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">swiperList</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        list[i].<span class="property">zIndex</span> = <span class="built_in">parseInt</span>(list.<span class="property">length</span> / <span class="number">2</span>) + <span class="number">1</span> - <span class="title class_">Math</span>.<span class="title function_">abs</span>(i - <span class="built_in">parseInt</span>(list.<span class="property">length</span> / <span class="number">2</span>))</span><br><span class="line">        list[i].<span class="property">mLeft</span> = i - <span class="built_in">parseInt</span>(list.<span class="property">length</span> / <span class="number">2</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">swiperList</span>: list</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// towerSwiper触摸开始</span></span><br><span class="line">    <span class="title class_">TowerStart</span>(e) &#123;</span><br><span class="line">      <span class="keyword">const</span> pageWidth = wx.<span class="title function_">getSystemInfoSync</span>().<span class="property">windowWidth</span></span><br><span class="line">  </span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">towerStart</span>: e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">pageX</span>,</span><br><span class="line">        <span class="attr">direction</span>: e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">pageX</span> &lt; pageWidth/<span class="number">2</span> ? <span class="string">&#x27;right&#x27;</span>:<span class="string">&#x27;left&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// towerSwiper计算方向</span></span><br><span class="line">    <span class="title class_">TowerMove</span>(e) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">direction</span>: e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">pageX</span> - <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">towerStart</span> &gt; <span class="number">0</span> ? <span class="string">&#x27;right&#x27;</span> : <span class="string">&#x27;left&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// towerSwiper计算滚动</span></span><br><span class="line">    <span class="title class_">TowerEnd</span>() &#123;</span><br><span class="line">      <span class="keyword">let</span> direction = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">direction</span>;</span><br><span class="line">      <span class="keyword">let</span> list = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">swiperList</span>;</span><br><span class="line">      <span class="keyword">if</span> (direction == <span class="string">&#x27;right&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> mLeft = list[<span class="number">0</span>].<span class="property">mLeft</span>;</span><br><span class="line">        <span class="keyword">let</span> zIndex = list[<span class="number">0</span>].<span class="property">zIndex</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">swiperList</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">          list[i - <span class="number">1</span>].<span class="property">mLeft</span> = list[i].<span class="property">mLeft</span></span><br><span class="line">          list[i - <span class="number">1</span>].<span class="property">zIndex</span> = list[i].<span class="property">zIndex</span></span><br><span class="line">        &#125;</span><br><span class="line">        list[list.<span class="property">length</span> - <span class="number">1</span>].<span class="property">mLeft</span> = mLeft</span><br><span class="line">        list[list.<span class="property">length</span> - <span class="number">1</span>].<span class="property">zIndex</span> = zIndex</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> mLeft = list[list.<span class="property">length</span> - <span class="number">1</span>].<span class="property">mLeft</span>;</span><br><span class="line">        <span class="keyword">let</span> zIndex = list[list.<span class="property">length</span> - <span class="number">1</span>].<span class="property">zIndex</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = list.<span class="property">length</span> - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">          list[i].<span class="property">mLeft</span> = list[i - <span class="number">1</span>].<span class="property">mLeft</span></span><br><span class="line">          list[i].<span class="property">zIndex</span> = list[i - <span class="number">1</span>].<span class="property">zIndex</span></span><br><span class="line">        &#125;</span><br><span class="line">        list[<span class="number">0</span>].<span class="property">mLeft</span> = mLeft;</span><br><span class="line">        list[<span class="number">0</span>].<span class="property">zIndex</span> = zIndex;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        direction,</span><br><span class="line">        <span class="attr">swiperList</span>: list</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>CSS</category>
        <category>堆叠轮播图</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>堆叠轮播图</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建一个个人的专属图床</title>
    <url>/posts/picture_host/</url>
    <content><![CDATA[<h2 id="什么是图床"><a href="#什么是图床" class="headerlink" title="什么是图床"></a>什么是图床</h2><p>图床就是用来存放图片的空间，同时允许外链到其他网站。</p>
<p>按照我自己的话来说，图床就是给自己的图片挂上一个链接，其他人能通过这个链接看到这张图片的一个服务器。</p>
<h2 id="为什么要搭建图床"><a href="#为什么要搭建图床" class="headerlink" title="为什么要搭建图床"></a>为什么要搭建图床</h2><ol>
<li><p>网站图片</p>
<p>像我网站的背景图片、Logo、文章封面等等都是通过图床的链接实现的，当然也可以把这些图片放在站点的根目录下，通过文件绝对路径的方式来实现。还应该会有其他方法来实现，看个人自己的选择吧。</p>
</li>
<li><p>Markdown</p>
<p>很多人都应该听说过Markdown的大名。Markdown是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档。Markdown在使用起来确实很方便，语法规则也比较少，随便学以下就可以很方便的编写自己的笔记之类的。但是，在我们写好自己的笔记分享给别人后却发现图片消失不见了；因为Markdown中粘贴进去的图片是以文件路径保存在自己的本地电脑上的，在别人电脑路径上没有这个文件就导致图片丢失。这时候图床就可以发挥重要作用了，由于此时的图片插入的是一个网址，只有这个网址对应的图片还在，图片就不会丢失。</p>
</li>
</ol>
<h2 id="免费图床推荐"><a href="#免费图床推荐" class="headerlink" title="免费图床推荐"></a>免费图床推荐</h2><ol>
<li><p><a href="%5Bhttps://sm.ms%5D(https://sm.ms/)">SM.MS</a></p>
<p>免注册永久存储图片（图片不违法中国大陆和香港法律的前提下），可以直接选择文件进行上传，支持多种链接格式；虽然每天最多只能上传10次最大5MB的图片，但就稳定性和免费来说已经很不错了，如果每天写的内容较少图片也不多的情况下已经能够满足日常需求。</p>
</li>
</ol>
<p><img src="https://pic.mstzf.cn//blog/202202141756485.png" alt="image-20220214175653708"></p>
<ol start="2">
<li><p>[ImgURL](<a href="https://imgur.com/">Imgur: The magic of the Internet</a>)</p>
<p>国外老牌图床，图片存储稳定可靠，但由于是国外的国内访问速度并不可靠。</p>
</li>
</ol>
<p><img src="https://pic.mstzf.cn//blog/202202151924134.png" alt="image-20220214180454972"></p>
<ol start="3">
<li><p>[路过图床](<a href="https://imgtu.com/">路过图床 - 免费图片上传, 专业图片外链, 免费公共图床 (imgtu.com)</a>)</p>
<p>支持免注册上传图片，永久存储，支持HTTPS加密访问和调用图片，提供多种图片链接格式和<a href="https://sm.ms/">SM.MS</a>差不多。</p>
</li>
</ol>
<p><img src="https://pic.mstzf.cn//blog/202202151924230.png" alt="image-20220214180858261"></p>
<h2 id="搭建一个自己的图床"><a href="#搭建一个自己的图床" class="headerlink" title="搭建一个自己的图床"></a>搭建一个自己的图床</h2><p>自己的图床掌控权在自己手中，没有大小和数量的限制，而且自建的才我们自己在用，访问速度会比免费的要快很多。但是自建图床也没没有那么简单，要一定的技术要求还要申请很多东西，而且自建并也需要有一定的花费，虽然每个月也就几毛钱，约等于白嫖了。如果嫌麻烦的话就老老实实用免费的吧。</p>
<p><img src="https://pic.mstzf.cn//blog/202202141827718.png" alt="image-20220214182710255"></p>
<h3 id="通过阿里云对象存储OSS搭建一个自己的图床"><a href="#通过阿里云对象存储OSS搭建一个自己的图床" class="headerlink" title="通过阿里云对象存储OSS搭建一个自己的图床"></a>通过阿里云<code>对象存储OSS</code>搭建一个自己的图床</h3><p><a href="https://cn.aliyun.com/">阿里云</a></p>
<p>最好有一个ICP备案过的域名没有的话也能用，但不能用CDN加速，CDN的流量是OSS的一半，会比较省钱。</p>
<ol>
<li><p>开通阿里云的对象存储：开通不要钱，要使用后才会产生费用</p>
<p>开通OSS服务后，默认的付费方式为按量计费。针对部分计费项目，您也可以购买资源包（包年包月）进一步降低费用。OSS的使用费用每小时结算一次，计算公式为：费用&#x3D;实际资源使用量×对应资源每小时单价。</p>
<p>我直接购买了一个资源包，也不贵才一瓶饮料钱。</p>
</li>
<li><p>创建Bucket</p>
<p>名字可以随便取，不能和别人的重复。地区选离自己近的，要让别人也访问到权限要选公共读，其他的都不需要开通避免额外的费用支出</p>
</li>
</ol>
<p><img src="https://pic.mstzf.cn/blog/202204191116170.png" alt="image-20220214184038394"></p>
<p><img src="https://pic.mstzf.cn//blog/202202141847334.png" alt="image-20220214184737951"></p>
<ol start="3">
<li><p>绑定域名</p>
<p>进入刚刚创建好的Bucket里面，找到传输管理展开后选择域名管理绑定自己的域名，这样以后就可以通过域名来访问到自己的图片。</p>
<p>找到SSl证书，选择免费证书，给刚刚绑定的域名部署SSL证书</p>
<p><img src="https://mstzfpicture.oss-cn-hangzhou.aliyuncs.com/blog/202202141951576.png" alt="image-20220214195101516"></p>
<p>再回到OSS域名管理处部署证书，如果上一步已经部署好了会有证书名称提示</p>
<p><img src="https://pic.mstzf.cn//blog/202202141954272.png" alt="image-20220214195428084"></p>
</li>
<li><p>开启阿里云CDN加速</p>
<p>增加资源站信息，选择OSS域名，在域名处会弹出自己的OSS域名。</p>
<p><img src="https://pic.mstzf.cn/blog/202204191120356.png" alt="image-20220214195741331"></p>
<p>在域名管理处添加域名，根据官方提示添加域名解析。</p>
<p><img src="https://pic.mstzf.cn/blog/202204191123338.png" alt="image-20220214195944861"></p>
<p>添加推荐配置，可以将时间设置得长一点</p>
<p><img src="https://pic.mstzf.cn//blog/202202142002165.png" alt="image-20220214200215841"></p>
</li>
<li><p>创建专用用户</p>
<p>把鼠标移动到阿里云账户上自己的头像，找到访问控制</p>
<p><img src="https://pic.mstzf.cn//blog/202202142012813.png" alt="image-20220214201240671"></p>
<p>选择身份管理里面的用户，创建用户</p>
<ul>
<li>选择编程访问： 启用AccessKey ID和 Access Key Secret支持通过API或其他开发工具访问</li>
<li>输入登录名称和显示名称，点击确认按钮。</li>
</ul>
<p><strong>创建完成后用户信息只会出现一次，AccessKeySecret是无法找回的，要保存好</strong></p>
</li>
<li><p>上传图片到OSS，获取地址后测试是否可用。</p>
<p>不成功的话，检查一下步骤。</p>
</li>
</ol>
<h2 id="在Typora中使用图床"><a href="#在Typora中使用图床" class="headerlink" title="在Typora中使用图床"></a>在Typora中使用图床</h2><ol>
<li><p>安装PicGo</p>
<p>[PicGo](<a href="https://github.com/Molunerfinn/PicGo/releases">Releases · Molunerfinn&#x2F;PicGo (github.com)</a>) 一个用于快速上传图片并获取图片 URL 链接的工具</p>
<p><img src="https://pic.mstzf.cn//blog/202202142008699.png" alt="image-20220214200836873"></p>
<p>找到自己电脑的对应版本下载。</p>
<p>添加阿里云OSS</p>
<ul>
<li>KeyID和设定KeySecret就是刚刚添加的新用户管理的</li>
<li>其他的信息都可以在OSS管理界面看到</li>
</ul>
<p><img src="https://pic.mstzf.cn/blog/202204191127332.png" alt="image-20220214202032835"></p>
</li>
<li><p>设置Typora</p>
<p>在Typora主界面左上角选择文件，找到偏好设置</p>
<p><img src="https://pic.mstzf.cn//blog/202202142024913.png" alt="image-20220214202441253"></p>
<p>这样我们在用Typero写笔记文章的时候就可以自己上传图片了。</p>
</li>
</ol>
<p>由于这篇文章是我在搭好一段时间后才写的，有些关键图片没有截图保存，在自己尝试的时候如果有大问题可以在评论区留言，大家一起解决。</p>
]]></content>
      <categories>
        <category>小妙招</category>
      </categories>
      <tags>
        <tag>阿里云</tag>
        <tag>图床</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建私人云盘</title>
    <url>/posts/private_cloud_disk/</url>
    <content><![CDATA[<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ol>
<li><p>硬件：</p>
<ul>
<li>树莓派4B</li>
<li>机械硬盘</li>
</ul>
</li>
<li><p>软件：</p>
<ul>
<li>Nginx</li>
<li>PHP</li>
<li>MySql</li>
<li>nextcloud</li>
</ul>
</li>
</ol>
<p><strong>选用树莓派是由于手头上刚好有一块树莓派，为了不让他吃灰；实际上可以选择旧电脑，或者云服务器。</strong></p>
<h2 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h2><p>安装nginx</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo apt install nginx -y</span><br></pre></td></tr></table></figure>

<p>安装完成后在浏览器中输入树莓派的IP地址，可以看到如下界面</p>
<p><img src="https://pic.mstzf.cn//blog/202202191323528.png" alt="image-20220219132349742"></p>
<p>安装PHP7.4</p>
<p>目前最新的PHP版本好像是7.4版本，也可以选择其他版本，将php7.4后面的7.4改成对应的版本哈就可以安装其他版本的PHP</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install php7.4  php7.4-fpm php7.4-cli php7.4-curl php7.4-gd php7.4-cgi php7.4-xml php7.4-dom php7.4-zip php7.4-intl php7.4-mbstring php7.4-mysql -y</span><br></pre></td></tr></table></figure>

<h2 id="安装并配置MySql"><a href="#安装并配置MySql" class="headerlink" title="安装并配置MySql"></a>安装并配置MySql</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo apt install mariadb-server</span><br><span class="line">$sudo mysql_secure_installation</span><br></pre></td></tr></table></figure>

<p>此时系统会询问你：<code>Enter current password for root (enter for none):</code> ,按回车（enter）键，因为第一次登陆是没有密码的。</p>
<p>然后会询问你： <code>Set root password?</code> —— 按 y ，进行root帐号的密码设置</p>
<p>此时，会提示 <code>New password</code> ,在此输入你的MySQL密码，请牢记这个密码，输入完成按回车，会提示<code>re-enter new password</code>此时再重复输入密码，回车即可。</p>
<p>然后，询问你 <code>Remove anonymous users</code> ，按 y 。</p>
<p>然后，询问你 <code>Disallow root login remotely</code> ，按 y 。</p>
<p>然后，询问你 <code>Remove test database and access to it</code> ，按 y 。</p>
<p>然后，询问你 <code>Reload privilege tables now</code> ，按 y 。</p>
<p>最后，您将看到消息 <code>All done!</code> 和 <code>Thanks for using MariaDB!</code> 。表示已经设置完成了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mysql -u root -p</span><br><span class="line"></span><br><span class="line">#输入密码后：</span><br><span class="line"># 创建数据库</span><br><span class="line">CREATE DATABASE IF NOT EXISTS nextcloud DEFAULT CHARACTER SET UTF8 COLLATE utf8_general_ci;</span><br><span class="line"></span><br><span class="line"># 创建用户</span><br><span class="line">GRANT ALL PRIVILEGES ON nextcloud.* to &#x27;用户名&#x27;@&#x27;127.0.0.1&#x27; identified by &#x27;密码&#x27;;</span><br><span class="line"></span><br><span class="line"># 刷新数据库</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="配置软件"><a href="#配置软件" class="headerlink" title="配置软件"></a>配置软件</h2><p>配置Nginx</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo vim /etc/nginx/sites-available/default</span><br></pre></td></tr></table></figure>

<p>nginx默认的网站代理地址是在<code>var/www/html</code>下，可以保留使用原来的，也可以修改到自己新建的地址下。如果选择新建不要忘记去确保指定的路径下的文件夹要存在。像我的就要在&#x2F;var下新建owncloud文件夹。<code>sudo mkdir /var/owncloud</code></p>
<p><img src="https://pic.mstzf.cn//blog/202202191949578.png" alt="image-20220219194922636"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">        index  index.html index.htm index.php default.html default.htm default.php;</span><br><span class="line">        if (-f $request_filename/index.html)&#123;</span><br><span class="line">        rewrite (.*) $1/index.html break;</span><br><span class="line">        &#125;</span><br><span class="line">        if (-f $request_filename/index.php)&#123;</span><br><span class="line">        rewrite (.*) $1/index.php;</span><br><span class="line">        &#125;</span><br><span class="line">        if (!-f $request_filename)&#123;</span><br><span class="line">        rewrite (.*) /index.php;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>去掉location ~ \ .php上的注释</p>
<p><img src="https://pic.mstzf.cn//blog/202202191950383.png" alt="image-20220219195040903"></p>
<p>给根目录权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 给权限</span><br><span class="line">sudo chmod -R 755 /var/owncloud</span><br><span class="line">sudo chown -R www-data:www-data /var/owncloud</span><br><span class="line"></span><br><span class="line">#重启nginx</span><br><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>在刚刚网站指定的目录下新建PHP测试文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo vim /var/owncloud/index.php</span><br><span class="line"></span><br><span class="line">#输入以下代码</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">      phpinfo();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>重新启动Nginx：$sudo systemctl restart nginx</p>
<p><strong>可能报错</strong>：</p>
<p><code>“Job for nginx.service failed because the control process exited with error code. See &quot;systemctl status nginx.service&quot; and &quot;journalctl -xe&quot; for details.”</code></p>
<p>多检查修改过的地方，是否有单词错误，或者是否有分号，括号是否对应…</p>
<p>Nginx代理php成功后，在浏览器输入树莓派IP地址后能看到如下界面说明配置成功。</p>
<p><img src="https://pic.mstzf.cn//blog/202202191419619.png" alt="image-20220219141927075"></p>
<h2 id="安装nextCloud"><a href="#安装nextCloud" class="headerlink" title="安装nextCloud"></a>安装nextCloud</h2><p>进入刚刚配置的代理目录：cd &#x2F;var&#x2F;nextcloud</p>
<p>将刚刚的测试文件删除: sudo rm *</p>
<p>下载[nextcloud](<a href="https://nextcloud.com/install/#instructions-server">Install – Nextcloud</a>)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo wget https://download.nextcloud.com/server/releases/nextcloud-23.0.2.tar.bz2</span><br></pre></td></tr></table></figure>

<p>这是目前最新版本，请自己到官网查看版本</p>
<p><img src="https://pic.mstzf.cn//blog/202202191925335.png" alt="image-20220219192510883"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 解压缩：</span><br><span class="line">sudo tar -jxvf nextcloud-23.0.2.tar.bz2 nextcloud</span><br><span class="line"></span><br><span class="line"># 复制出来</span><br><span class="line">sudo cp -rf nextcloud/* /var/owncloud</span><br></pre></td></tr></table></figure>

<p>再访问IP地址就可以看到NextCloud的运行界面了</p>
<p><img src="https://pic.mstzf.cn//blog/202202192006397.png" alt="image-20220219200624789"></p>
]]></content>
      <categories>
        <category>树莓派</category>
        <category>云盘</category>
      </categories>
      <tags>
        <tag>云盘</tag>
        <tag>树莓派</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派+EC20模块实现连接蜂窝网和短信收发</title>
    <url>/posts/raspi-ec20/</url>
    <content><![CDATA[<h2 id="软硬件"><a href="#软硬件" class="headerlink" title="软硬件"></a>软硬件</h2><ul>
<li>树莓派</li>
<li>ec20</li>
<li>wvdial</li>
<li>gammu</li>
<li>SIM卡</li>
</ul>
<h2 id="EC20模块"><a href="#EC20模块" class="headerlink" title="EC20模块"></a>EC20模块</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>EC20-CE是移远通信最近推出的LTE Cat 4无线通信模块，采用LTE 3GPP Release 11 技术，支持最大下行速率 150 Mbps和最大上行速率50 Mbps；同时在封装上兼容移远通信多网络制式LTE EC21系列、EC25系列和EG25-G 模块，实现了3G网络与4G网络之间的无缝切换。</p>
<p>EC20-CE采用镭雕工艺，镭雕工艺具有外观更漂亮、金属质感强、散热更好、信息不容易被抹除、更能适应自动化需求等优点。</p>
<p>EC20-CE内置多星座高精度定位GNSS（GPS&#x2F;GLONASS&#x2F;BDS&#x2F;Galileo&#x2F;QZSS）接收机；在简化产品设计的同时，还大大提升了定位速度及精度。</p>
<p>EC20-CE内置丰富的网络协议，集成多个工业标准接口，并支持多种驱动和软件功能(适用于Windows 7&#x2F;8&#x2F;8.1&#x2F;10&#x2F;11、Linux、Android等操作系统下的USB驱动等)，极大地拓展了EC20-CE在M2M领域的应用范围，如CPE、路由器、数据卡、平板电脑、车载、智能安全以及工业级PDA等。</p>
<h2 id="产品特性"><a href="#产品特性" class="headerlink" title="产品特性"></a>产品特性</h2><img src="https://pic.mstzf.cn/blog/202404090922453.png" alt="image-20240409092210305" style="zoom:50%;" />

<p><strong>更多详情可到官网查看</strong></p>
<a class="tag-Link" target="_blank" href="https://www.quectel.com.cn/product/lte-ec20-ce">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/www.quectel.com.cn/product/lte-ec20-ce.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">LTE EC20-CE</div>
            <div class="tag-link-sitename">QUECTEL</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p><a href="%5BQuectel_Product_Brochure_CN_V7.8.pdf%5D(https://www.quectel.com.cn/wp-content/uploads/2024/01/Quectel_Product_Brochure_CN_V7.8.pdf)">产品手册  Quectel_Product_Brochure_CN_V7.8</a></p>
<h3 id="查看设备是否挂载成功"><a href="#查看设备是否挂载成功" class="headerlink" title="查看设备是否挂载成功"></a>查看设备是否挂载成功</h3><p>使用命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ls /dev |grep ttyUSB</span><br></pre></td></tr></table></figure>

<p>挂载成功会有如图输出</p>
<img src="https://pic.mstzf.cn/blog/202404090929570.png" alt="image-20240409092926200" style="zoom:50%;" />

<p>要是没有看到设备则检查设备是否稳定插入、更换USB口或者重启设备之后再重新使用命令查看</p>
<h2 id="拨号上网"><a href="#拨号上网" class="headerlink" title="拨号上网"></a>拨号上网</h2><h3 id="wvdial"><a href="#wvdial" class="headerlink" title="wvdial"></a>wvdial</h3><ol>
<li><p>安装</p>
<p><code>wvdial</code>是一个方便使用的PPP拨号模块，它能调用调制调节器，并通过PPP上网，无需像手动拨号一样配置繁琐的文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update </span><br><span class="line"></span><br><span class="line">sudo apt install wvdial</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置</p>
<p>修改配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/wvdial.conf</span><br></pre></td></tr></table></figure>

<img src="https://pic.mstzf.cn/blog/202404081753856.png" alt="image-20240408175302335" style="zoom:50%;" />

<p>可以继续使用 <code>[Dialer Defaults]</code>也可以重新根据自己需要添加，我这里为了没有多余手机卡，也为了方便输入命令，就直接使用</p>
<p><strong>电信&#x2F;移动SIM卡使用以下配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Dialer Defaults]</span><br><span class="line">Init1 = ATZ</span><br><span class="line">Init2 = ATQ0 V1 E1 S0=0 &amp;C1 &amp;D2 +FCLASS=0</span><br><span class="line">Modem Type = Analog Modem</span><br><span class="line">Modem = /dev/ttyUSB3</span><br><span class="line">Baud = 115200</span><br><span class="line">New PPPD = yes</span><br><span class="line">ISDN = 0</span><br><span class="line">Phone = *99#</span><br><span class="line">Username = card</span><br><span class="line">Password = card</span><br></pre></td></tr></table></figure>

<p><strong>联通卡使用以下配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Dialer Defaults]</span><br><span class="line">Init1 = ATZ</span><br><span class="line">Init2 = ATQ0 V1 E1 S0=0 &amp;C1 &amp;D2 +FCLASS=0</span><br><span class="line">Init3 = at+cgdcont=1,&quot;ip&quot;,&quot;uninet&quot;</span><br><span class="line">Modem Type = Analog Modem</span><br><span class="line">Modem = /dev/ttyUSB3</span><br><span class="line">Baud = 115200</span><br><span class="line">New PPPD = yes</span><br><span class="line">ISDN = 0</span><br><span class="line">Phone = *99#</span><br><span class="line">Password = card</span><br><span class="line">Username = card</span><br></pre></td></tr></table></figure>

<p>配置来源于 <a href="https://getiot.tech/zh/linux-note/use-of-quectel-ec20-dialup-on-linux/">Quectel EC20 在 Linux 上的使用</a></p>
<p>在配置文件中大部分都不需要自己调整，只有**<code>Modem</code><strong>和</strong><code>Baud</code>**需要根据自己设备情况进行调整</p>
<ul>
<li>Modem：根据情况选择合适的设备我的这个ttyUSB2和ttyUSB3都能正常使用</li>
<li>Baud：根据情况选择合适的波特率，对于ec20来说<code>9600-115200</code>都可以</li>
</ul>
</li>
<li><p>启动wvdial</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo wvdial</span><br></pre></td></tr></table></figure>

<img src="https://pic.mstzf.cn/blog/202404090951302.png" alt="image-20240409095147469" style="zoom:50%;" />

<p>查看网络设备</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure>

<img src="https://pic.mstzf.cn/blog/202404090954011.png" alt="image-20240409095403975" style="zoom:50%;" />

<p>可以看到多了ppp0和wwan0两个设备</p>
<p>正常情况还无法访问网络，因为默认路由在其他网络设备中，需要重新配置路由</p>
</li>
</ol>
<h3 id="配置路由"><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h3><p>查看路由</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo route</span><br></pre></td></tr></table></figure>

<p><strong>配置路由的方式有很多种，我这里的方法比较简单粗暴，需要具体配置的可自己查找方法</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo route add default dev ppp0</span><br></pre></td></tr></table></figure>

<p>该命令会在路由表中添加一条新的默认路由</p>
<img src="https://pic.mstzf.cn/blog/202404091001355.png" alt="image-20240409100146004" style="zoom:50%;" />

<p>在每次重启后都会刷新路由，可以将命令加到<code>/etc/rc.local</code>中，每次开机都执行添加方法</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/rc.local</span><br></pre></td></tr></table></figure>

<p>在<code>exit 0</code>前添加</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">su - root -c `route add default dev ppp0`</span><br></pre></td></tr></table></figure>

<h3 id="通过systemctl来管理wvdial"><a href="#通过systemctl来管理wvdial" class="headerlink" title="通过systemctl来管理wvdial"></a>通过systemctl来管理wvdial</h3><p>开机自启wvdial的方法有很多种，并不一定要使用systemctl</p>
<p>最简单的就是和添加路由一样，在<code>/etc/rc.local</code>中添加启动命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/rc.local</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加</span></span><br><span class="line">wvdial &amp;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>编写控制wvdial启动和检测wvdial运行脚本</p>
<p>新建sh脚本文件，可以放到你想存放的地方</p>
<p>我这里在root用户下<code>/root/shell</code>中</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mkdir /root/shell &amp;&amp; cd shell</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">名字可以任起</span></span><br><span class="line">sudo vim onwvdial.sh</span><br></pre></td></tr></table></figure>

<p><strong>wvdial控制脚本内容</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">DEVICE_NAME=&quot;/dev/ttyUSB3&quot; # 和wvdial配置设备一致</span><br><span class="line">LOG_FILE=&quot;/var/log/wvdial_on.log&quot; # 日志文件存储位置</span><br><span class="line">PROCESS_NAME=(wvdial pppd) # 需检查占用软件</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">定义函数检查进程是否占用设备</span></span><br><span class="line">check_device_usage() &#123;</span><br><span class="line">    local process_name=$1</span><br><span class="line">    local device=$2</span><br><span class="line">    local pids=$(pgrep -f &quot;$process_name&quot;)</span><br><span class="line"></span><br><span class="line">    if [ -z &quot;$pids&quot; ]; then</span><br><span class="line">        return</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    for pid in $pids; do</span><br><span class="line">        echo &quot;pid:$pid&quot;</span><br><span class="line">        local device_count=$(lsof -p &quot;$pid&quot; 2&gt;/dev/null | grep -e &quot;$device&quot; | wc -l)</span><br><span class="line">        if [ &quot;$device_count&quot; -gt 0 ]; then</span><br><span class="line">            echo &quot;占用设备：$device&quot;</span><br><span class="line">            kill $pid</span><br><span class="line">        fi</span><br><span class="line">    done</span><br><span class="line">    return</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function check_wvdial() &#123;</span><br><span class="line">    if pgrep -x &quot;wvdial&quot; &gt;/dev/null; then</span><br><span class="line">        return 0  # wvdial 进程在运行</span><br><span class="line">    else</span><br><span class="line">        return 1  # wvdial 进程未运行</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for process in $PROCESS_NAME; do</span><br><span class="line">        echo &quot;进程名: $process&quot;</span><br><span class="line">        check_device_usage $process $DEVICE_NAME</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">wvdial &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 &amp;</span><br><span class="line">route add default dev ppp0</span><br><span class="line"></span><br><span class="line">while true;do</span><br><span class="line">        if ! check_wvdial;then</span><br><span class="line">                echo &quot;$(date +&quot;%Y-%m-%d %H:%M:%S&quot;) - wvdial 进程未运行，正在重新启动...&quot; &gt;&gt; &quot;$LOG_FILE&quot;</span><br><span class="line">                wvdial &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 &amp;</span><br><span class="line">        fi</span><br><span class="line">        sleep 120</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>该脚本包含功能:</p>
<ul>
<li><p>停止wvdial启动前所需设备的占用</p>
</li>
<li><p>启动wvdial</p>
</li>
<li><p>添加ppp0默认路由</p>
</li>
<li><p>每120秒检测wvdial是否运行</p>
</li>
<li><p>记录启动、错误日志</p>
</li>
</ul>
<p>设置可执行权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo chmod u+x /root/shell/onwvdial.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写systemctl控制文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/systemd/system/wvdial_on.service</span><br></pre></td></tr></table></figure>

<p>配置文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Safe Start Wvadil</span><br><span class="line">After=dev-ttyUSB3.device</span><br><span class="line">Requires=dev-ttyUSB3.device</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=root</span><br><span class="line">Group=root</span><br><span class="line">ExecStart=/root/shell/onwvdial.sh # 路径根据自己配置修改</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</li>
<li><p>启动服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">systemctl start wvdial_on.service</span><br><span class="line"></span><br><span class="line">systemctl enable wvdial_on.service</span><br></pre></td></tr></table></figure>

<p>设置自启动后就不需要在<code>/etc/rc.local</code>中添加修改路由和启动wvdial命令了</p>
</li>
</ol>
<h3 id="配置防火墙"><a href="#配置防火墙" class="headerlink" title="配置防火墙"></a>配置防火墙</h3><p><strong>如果在ec20模块连接4G网络后还需要使用wifi则需要配置防火墙，不需要则不用配置</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE</span><br><span class="line">sudo iptables -A FORWARD -i ppp0 -o wlan0 -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line">sudo iptables -A FORWARD -i wlan0 -o ppp0 -j ACCEPT</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">将防火墙规则写入文件</span><br><span class="line">sudo sh -c &quot;iptables-save &gt; /etc/iptables.ipv4.nat&quot;</span><br></pre></td></tr></table></figure>

<p><strong>顺序执行命令即可</strong></p>
<h2 id="收发短信"><a href="#收发短信" class="headerlink" title="收发短信"></a>收发短信</h2><ol>
<li><p>安装软件gammu</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install gammu gammu-smsd</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置gammu</p>
<p>使用命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo gammu-config</span><br></pre></td></tr></table></figure>

<p>配置可参考我的</p>
<img src="https://pic.mstzf.cn/blog/202404091056575.png" alt="image-20240409105606687" style="zoom:50%;" />

<p><strong>或者直接修改<code>/root/.gammurc</code>,效果是一样的</strong><br><strong>如果没有<code>/root/.gammurc</code>文件就使用命令</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[gammu]</span><br><span class="line"></span><br><span class="line">port = /dev/ttyUSB2</span><br><span class="line">model =</span><br><span class="line">connection = at19200</span><br><span class="line">synchronizetime = yes</span><br><span class="line">logfile =</span><br><span class="line">logformat = nothing</span><br><span class="line">use_locking = no</span><br><span class="line">gammuloc =</span><br></pre></td></tr></table></figure>

<p>修改 <code>/etc/gammu-smsdrc</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[gammu]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Please configure this!</span></span><br><span class="line">port = /dev/ttyUSB2</span><br><span class="line">connection = at19200</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Debugging</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">logformat = textall</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SMSD configuration, see gammu-smsdrc(5)</span></span><br><span class="line">[smsd]</span><br><span class="line">service = files</span><br><span class="line">logfile = syslog</span><br><span class="line">RunOnReceive = /root/msmtp/sh/send-smsd.sh # 	发送邮件脚本</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Increase <span class="keyword">for</span> debugging information</span></span><br><span class="line">debug = yes</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">debuglevel = 0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Paths <span class="built_in">where</span> messages are stored</span></span><br><span class="line">inboxpath = /var/spool/gammu/inbox/</span><br><span class="line">outboxpath = /var/spool/gammu/outbox/</span><br><span class="line">sentsmspath = /var/spool/gammu/sent/</span><br><span class="line">errorsmspath = /var/spool/gammu/error/</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑收到短信后自动发送邮件脚本</p>
<p><strong>树莓派配置邮件这里不再赘述，可以自行搜索，或者参考我之前的一篇博客</strong></p>
<a class="tag-Link" target="_blank" href="https://blog.teohzy.com/posts/smpxjfsyj/">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.teohzy.com/posts/smpxjfsyj/.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">树莓派开机自动发送邮件</div>
            <div class="tag-link-sitename">TeohZY</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p>编辑脚本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /root/msmtp/sh/send-smsd.sh</span><br></pre></td></tr></table></figure>

<p>文件路径根据自己需要修改</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for i in `seq $SMS_MESSAGES` ; do</span><br><span class="line">        if [ $i -eq 1 ]; then</span><br><span class="line">                phone=&quot;$SMS_1_NUMBER&quot;</span><br><span class="line">        fi</span><br><span class="line">        tmp=&quot;$(eval echo &#x27;$&#x27;SMS_$&#123;i&#125;_TEXT)&quot;</span><br><span class="line">        message=&quot;$text$tmp&quot;</span><br><span class="line">done</span><br><span class="line">echo &quot;$message&quot; |mutt -s &quot;树莓派短信转发&quot; xxx@163.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启gammu</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart gammu-smsd.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>短信测试</p>
<p>向目标号码发送短信后邮箱能收到短信</p>
<p>通过终端向其他号码发送短信</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gammu-smsd-inject TEXT 目标号码 -text &#x27;短信内容&#x27; -unicode</span><br></pre></td></tr></table></figure>

<p>如果收到短信说明配置成功</p>
</li>
</ol>
<h3 id="短信发送失败踩坑"><a href="#短信发送失败踩坑" class="headerlink" title="短信发送失败踩坑"></a>短信发送失败踩坑</h3><ol>
<li><p>查看端口占用</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo lsof /dev/ttyUSB2</span><br></pre></td></tr></table></figure>

<p>如果有其他进程和gammu-sms占用设备，可以使用<code>kill</code>命令结束非必须进程</p>
</li>
<li><p>设备波特率和wvdial重复</p>
<p>检查wvdial配置和gammu配置，如果wvdial已经使用了<code>ttyUSB3</code>和波特率<code>115200</code>则gammu配置中就不要再使用相同设备和波特率，可以使用<code>ttyUSB2</code>和波特率<code>at19200</code></p>
</li>
<li><p>ModemManager占用设备</p>
<p>查看设备后发现有进程<code>ModemMnana</code>在使用设备，可以停用ModemManager</p>
<p><font color="red"><strong>需要考虑实际使用情况来判断，在确认ModemManager确实不是必要软件后再进行操作</strong></font></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo systemctl disable ModemManager.service</span><br><span class="line"></span><br><span class="line">sudo systemctl stop ModemManager.service</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>树莓派</category>
        <category>ec20模块</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
        <tag>ec20模块</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派64位系统实现对访客抓拍</title>
    <url>/posts/hc-rsAndcamera/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>最近由于一些原因，一个人在外面租房住，老是担心会有人进到出租屋里面来（被害妄想症吧 (～￣▽￣)～），也刚好有些小模块可以实现对访客监控的功能，就做了这个</p>
<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul>
<li>树莓派4B</li>
<li>人体红外传感器HC-RC501</li>
<li>SCI摄像头（感光芯片OV5647）</li>
<li>树莓派操作系统 aarch64</li>
</ul>
<h2 id="摄像头安装"><a href="#摄像头安装" class="headerlink" title="摄像头安装"></a>摄像头安装</h2><ol>
<li><p>连接摄像头</p>
</li>
<li><p>系统启用摄像头</p>
<p>运行命令<code>sudo spari-config</code>进入选择界面，<code>Interface Options</code>-&gt;<code>Legacy Camera</code>-&gt;<code>&lt;Yes&gt;</code>，设置完后会重启设备，这时候还无法正常使用摄像头</p>
</li>
<li><p>配置系统</p>
<p>编辑<code>/boot/config.txt</code>文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 编辑/boot/config.txt</span><br><span class="line">sudo vim /boot/config.txt</span><br><span class="line"></span><br><span class="line"># 添加dtoverlay </span><br><span class="line"># 将其修改为自己芯片对于的值，添加在文件最后</span><br><span class="line"># ov5647是我自己摄像头的感光芯片号，根据个人情况进行修改</span><br><span class="line"></span><br><span class="line">gpu_mem=128</span><br><span class="line">dtoverlay=ov5647</span><br></pre></td></tr></table></figure>

<p>配置好后重启系统</p>
<p>输入命令<code>libcamera-hello</code>如果没有报错，说明配置成功</p>
<p><img src="https://pic.mstzf.cn/blog/202307091243472.png" alt="image-20230709124304611"></p>
</li>
</ol>
<h2 id="python包安装"><a href="#python包安装" class="headerlink" title="python包安装"></a>python包安装</h2><p>由于64位版本的系统中已经无法使用<code>raspistill</code>来调用摄像头，Python包PiCamera也已经无法使用，所以之前32位的代码在这里已经无法使用；但好在已经推出了PiCamera2，可以在64位中使用。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip3 install numpy --upgrade</span><br><span class="line">pip3 install picamera2</span><br></pre></td></tr></table></figure>

<p>关于PiCamera2的更多相关内容可以看下面链接</p>
<a class="tag-Link" target="_blank" href="https://github.com/raspberrypi/picamera2">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/github.com/raspberrypi/picamera2.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">picamera2</div>
            <div class="tag-link-sitename">github</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<h2 id="详细代码"><a href="#详细代码" class="headerlink" title="详细代码"></a>详细代码</h2><p><strong>人体红外模块的数据脚可以根据自己需求选择树莓派GPIO口</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO  <span class="comment">##引入GPIO模块</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> picamera2 <span class="keyword">import</span> Picamera2, Preview</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">photograph</span>():</span><br><span class="line">    picam2 = Picamera2()</span><br><span class="line"></span><br><span class="line">    preview_config = picam2.create_preview_configuration(main=&#123;<span class="string">&quot;size&quot;</span>: (<span class="number">800</span>, <span class="number">600</span>)&#125;)</span><br><span class="line">    picam2.configure(preview_config)</span><br><span class="line">    picam2.start()</span><br><span class="line"></span><br><span class="line">    now = time.strftime(<span class="string">&quot;%Y%m%d%H%M%S&quot;</span>,time.localtime(time.time()))</span><br><span class="line">    file_name=<span class="string">&quot;/Disk/MyCloud/Safe/&quot;</span>+now+<span class="string">&quot;.jpg&quot;</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    metadata = picam2.capture_file(file_name)</span><br><span class="line">    picam2.close()</span><br><span class="line"></span><br><span class="line">HC_Pin = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">GPIO.setmode(GPIO.BCM)</span><br><span class="line">GPIO.setup(HC_Pin, GPIO.IN)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">if</span>(GPIO.<span class="built_in">input</span>(HC_Pin)):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            photograph()</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">            f = <span class="built_in">open</span>(<span class="string">&#x27;.log&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">            now = time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.localtime(time.time()))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">str</span>=now+<span class="string">&#x27;/t相机调用失败&#x27;</span></span><br><span class="line">            f.write(<span class="built_in">str</span>)</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="built_in">str</span>=now+<span class="string">&quot;/t有人来访&quot;</span></span><br><span class="line">            f.write(<span class="built_in">str</span>)</span><br><span class="line">            f.close()</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p><strong>不太会Python，代码不规范或者错误的地方欢迎批评指正🤞</strong></p>
]]></content>
      <categories>
        <category>树莓派</category>
        <category>64位系统访客拍照</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
        <tag>64位系统访客拍照</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派开启个人热点</title>
    <url>/posts/startAP/</url>
    <content><![CDATA[<h2 id="更新软件"><a href="#更新软件" class="headerlink" title="更新软件"></a>更新软件</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo apt update</span><br><span class="line">$sudo apt upgrade</span><br></pre></td></tr></table></figure>

<h2 id="安装并配置hostapd服务"><a href="#安装并配置hostapd服务" class="headerlink" title="安装并配置hostapd服务"></a>安装并配置hostapd服务</h2><h3 id="安装hostapd"><a href="#安装hostapd" class="headerlink" title="安装hostapd"></a>安装hostapd</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo apt install hostapd</span><br><span class="line">$sudo systemctl stop hostapd</span><br></pre></td></tr></table></figure>

<h3 id="配置hostapd"><a href="#配置hostapd" class="headerlink" title="配置hostapd"></a>配置hostapd</h3><p>编辑&#x2F;etc&#x2F;hostapd&#x2F;hostapd.conf文件，如果不存在这个文件可以直接新建一个。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo vim /etc/hostapd/hostapd.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface=wlan0</span><br><span class="line">#bridge=br0</span><br><span class="line">#无线驱动n180211</span><br><span class="line">driver=nl80211</span><br><span class="line">logger_syslog=-1</span><br><span class="line">logger_syslog_level=2</span><br><span class="line">logger_stdout=-1</span><br><span class="line">logger_stdout_level=2</span><br><span class="line">##### IEEE 802.11 related configuration #######################################</span><br><span class="line">#热点名字，可根据需要自行更改</span><br><span class="line">ssid=AP-Pi4</span><br><span class="line"></span><br><span class="line">utf8_ssid=1</span><br><span class="line"># ISO/IEC 3166-1 标准的国家代码，用于设置监管域。根据需要设置，按照哪个国家来操作设备。</span><br><span class="line"># 这可以限制可用的频道和发射功率。</span><br><span class="line">#country_code=CN</span><br><span class="line"># 是否启用 IEEE 802.11d，0 禁用（默认），1 启用。</span><br><span class="line"># 需要正确设置 country_code 才能使 IEEE 802.11d 正常工作。</span><br><span class="line">#ieee80211d=1</span><br><span class="line"># 是否启用 IEEE 802.11h，0 禁用（默认），1 启用。</span><br><span class="line"># 这将启用雷达探测和 DFS 支持，如果可用话。</span><br><span class="line">#ieee80211h=1</span><br><span class="line"># 添加 Power Constraint element 到 Beacon 和 Probe Response frames 中去。</span><br><span class="line">#local_pwr_constraint=5</span><br><span class="line"># 该选项仅在 ieee80211h=1 选项并且已经配置 local_pwr_constraint 选项时可用。</span><br><span class="line">#spectrum_mgmt_required=1</span><br><span class="line"># 设置无线模式需要硬件支持</span><br><span class="line">#a = IEEE 802.11a,</span><br><span class="line">#b = IEEE 802.11b, g</span><br><span class="line">#= IEEE 802.11g, </span><br><span class="line">#ad = IEEE 802.11ad (60 GHz)</span><br><span class="line"># hw_mode=a 或 hw_mode=g 选项也与 IEEE 802.11n 一起使用来设置波段。</span><br><span class="line"># 当使用 ACS 时(看下文 channel parameter )，可以使用特殊的选项值 hw_mode=any ，说明可以使用任何可用的波段，该值当前仅在驱动使用了 offloaded ACS 的情况下有效。</span><br><span class="line"># 默认: hw_mode=b</span><br><span class="line">hw_mode=g</span><br><span class="line"># 注意有些设备不使用这个选项，而是需要在 iwconfig 中另外配置。</span><br><span class="line"># 如果编译的时候启用了 CONFIG_ACS 选项。通过设置 channel=acs_survey 或 channel=0，这样 hostapd 可以在运行时基于 ACS survey 算法自动选择合适的信道。</span><br><span class="line"># 有些设备仅支持最大为11频道，有些支持最大为13频道，可以通过iw list 查看。</span><br><span class="line"># 另外启用 ht_capab 将影响可用的频道数</span><br><span class="line">channel=6</span><br><span class="line"># ACS tuning - 信道自动选择</span><br><span class="line"># 参考：http://wireless.kernel.org/en/users/Documentation/acs</span><br><span class="line"># 信道自动选择，有助于选择更好的信道，但是会增加启动时间，一般不需要修改。</span><br><span class="line"># 可以通过设置下面选项自定义 ACS survey 算法。</span><br><span class="line"># 默认：acs_num_scans=5  acs_chan_bias=1:0.8 6:0.8 11:0.8</span><br><span class="line">#acs_num_scans=40</span><br><span class="line">#acs_chan_bias=1:0.8 6:0.8 11:0.8</span><br><span class="line"># 默认允许所有信道</span><br><span class="line">#chanlist=100 104 108 112 116</span><br><span class="line">#chanlist=1 6 11-13</span><br><span class="line"># beacon 间隔  （默认: 100; 范围 15到65535）</span><br><span class="line">#beacon_int=100</span><br><span class="line">#dtim_period=1</span><br><span class="line"># 默认且最大值为2007个列表</span><br><span class="line">#max_num_sta=255</span><br><span class="line">#rts_threshold=2347</span><br><span class="line">#fragm_threshold=2346</span><br><span class="line">#supported_rates=10 20 55 110 60 90 120 180 240 360 480 540</span><br><span class="line">#basic_rates=10 20</span><br><span class="line">#basic_rates=10 20 55 110</span><br><span class="line">#basic_rates=60 120 240</span><br><span class="line"># 用命令：iw list 查看无线网卡是否有“short preamble supported”。</span><br><span class="line"># 0 禁用，1 启用，无线网卡支持的话可以启用以改善网络性能。</span><br><span class="line">#preamble=1</span><br><span class="line"></span><br><span class="line"># 无线MAC地址过滤</span><br><span class="line"># 此选项要求 driver=hostap 或 driver=nl80211</span><br><span class="line"># 0 = 接受所有连接，仅拒绝 deny 列表中的连接</span><br><span class="line"># 1 = 拒绝所有连接，仅接受 accept 列表中的连接</span><br><span class="line"># 2 = 使用外部 RADIUS 服务器 (还是会优先查找 accept/deny 列表)</span><br><span class="line"># 简单一点的话，可以将两个列表设置为同一个文件，仅由 macaddr_acl 来控制允许或拒绝</span><br><span class="line">macaddr_acl=0</span><br><span class="line">accept_mac_file=/etc/hostapd/hostapd.accept</span><br><span class="line">deny_mac_file=/etc/hostapd/hostapd.deny</span><br><span class="line"># 身份验证算法，1 开放系统认证，2 共享密钥认证(需要 WEP)，3 两者</span><br><span class="line"></span><br><span class="line">auth_algs=3</span><br><span class="line"># 是否广播，0 广播SSID，1 不广播SSID（发送空SSID，即长度为0的SSID），</span><br><span class="line"># 2 忽略广播 SSID 的探测请求，跟1类似，但是兼容某些不支持空SSID的设备</span><br><span class="line">#ignore_broadcast_ssid=0</span><br><span class="line">#vendor_elements=dd0411223301</span><br><span class="line"># 启用WMM</span><br><span class="line">wmm_enabled=1</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># WMM-PS Unscheduled Automatic Power Save Delivery [U-APSD]</span><br><span class="line"># Enable this flag if U-APSD supported outside hostapd (eg., Firmware/driver)</span><br><span class="line">#uapsd_advertisement_enabled=1</span><br><span class="line">#</span><br><span class="line"># Low priority / AC_BK = background</span><br><span class="line">#wmm_ac_bk_cwmin=4</span><br><span class="line">#wmm_ac_bk_cwmax=10</span><br><span class="line">#wmm_ac_bk_aifs=7</span><br><span class="line">#wmm_ac_bk_txop_limit=0</span><br><span class="line">#wmm_ac_bk_acm=0</span><br><span class="line"># Note: for IEEE 802.11b mode: cWmin=5 cWmax=10</span><br><span class="line">#</span><br><span class="line"># Normal priority / AC_BE = best effort</span><br><span class="line">#wmm_ac_be_aifs=3</span><br><span class="line">#wmm_ac_be_cwmin=4</span><br><span class="line">#wmm_ac_be_cwmax=10</span><br><span class="line">#wmm_ac_be_txop_limit=0</span><br><span class="line">#wmm_ac_be_acm=0</span><br><span class="line"># Note: for IEEE 802.11b mode: cWmin=5 cWmax=7</span><br><span class="line">#</span><br><span class="line"># High priority / AC_VI = video</span><br><span class="line">#wmm_ac_vi_aifs=2</span><br><span class="line">#wmm_ac_vi_cwmin=3</span><br><span class="line">#wmm_ac_vi_cwmax=4</span><br><span class="line">#wmm_ac_vi_txop_limit=94</span><br><span class="line">#wmm_ac_vi_acm=0</span><br><span class="line"># Note: for IEEE 802.11b mode: cWmin=4 cWmax=5 txop_limit=188</span><br><span class="line">#</span><br><span class="line"># Highest priority / AC_VO = voice</span><br><span class="line">#wmm_ac_vo_aifs=2</span><br><span class="line">#wmm_ac_vo_cwmin=2</span><br><span class="line">#wmm_ac_vo_cwmax=3</span><br><span class="line">#wmm_ac_vo_txop_limit=47</span><br><span class="line">#wmm_ac_vo_acm=0</span><br><span class="line"># Note: for IEEE 802.11b mode: cWmin=3 cWmax=4 burst=102</span><br><span class="line"># 检测客户端不活动超时,是否在线间隔时间,默认每5分钟检测客户端是否在线</span><br><span class="line"># 站点不活动限制，默认5分钟</span><br><span class="line">#ap_max_inactivity=300</span><br><span class="line"># 默认禁用，设置为1,说明只要客户在5分钟内没有活动就断线,即使客户端仍然在AP信号的范围内，</span><br><span class="line">#如果客户端过多可以启用来提高带机量。</span><br><span class="line">#skip_inactivity_poll=0</span><br><span class="line"># 对于过度的传输失败或其他连接丢失的情况下，断开连接，这并不适合所有设备</span><br><span class="line">#disassoc_low_ack=1</span><br><span class="line"># 最大允许侦听间隔，默认65535,即不限制 (how many Beacon periods STAs are allowed to remain asleep)</span><br><span class="line">#max_listen_interval=100</span><br><span class="line"># WDS(4-address frame)模式，仅在 driver=nl80211 的情况下支持</span><br><span class="line">#wds_sta=1</span><br><span class="line"># 仅在设置了bridge= 时有效，默认情况下，例如当设置了bridge=br0，那么wds_bridge=br0。</span><br><span class="line"># 当然也可以手动指定为wds_bridge=XXXXX。</span><br><span class="line">#wds_bridge=wds-br0</span><br><span class="line"># Start the AP with beaconing disabled by default.没明白是什么意思。</span><br><span class="line">#start_disabled=0</span><br><span class="line"># AP隔离，1启用，0禁用。默认不隔离。</span><br><span class="line">#ap_isolate=1</span><br><span class="line">#bss_load_update_period=50</span><br><span class="line"># 用于测试的</span><br><span class="line">#bss_load_test=12:80:20000</span><br><span class="line">##### IEEE 802.11n related configuration ######################################</span><br><span class="line"># 启用80211n，你也将需要启用WMM来使用全部HT功能。</span><br><span class="line">ieee80211n=1</span><br><span class="line"># [HT40-]或[HT40+]没有设置的话将只工作在20MHz，</span><br><span class="line"># [HT40-]对应可使用的频道为5-13</span><br><span class="line"># [HT40+]对应可使用的频道为1-7（欧洲标准为1-9）</span><br><span class="line"># 当多径效应不是很严重时，用户可以将该间隔配置为[SHORT-GI-20][SHORT-GI-40]</span><br><span class="line"># 个人理解，如果不上天馈系统的话可以启用[SHORT-GI-20][SHORT-GI-40]，前提是硬件支持。</span><br><span class="line">#ht_capab=[LDPC][HT40-][HT40+][SHORT-GI-20][SHORT-GI-40][SMPS-DYNAMIC][GF][TX-STBC][RX-STBC123][DELAYED-BA][MAX-AMSDU-7935][DSSS_CCK-40][40-INTOLERANT][LSIG-TXOP-PROT]</span><br><span class="line"># intel Wireless-N 105 (rev c4) 网卡支持的选项</span><br><span class="line">ht_capab=[HT40-][SHORT-GI-20][SHORT-GI-40][DSSS_CCK-40][40-INTOLERANT][GF]</span><br><span class="line"># Atheros AR9271 网卡支持的选项</span><br><span class="line">#ht_capab=[HT40-][SHORT-GI-20][SHORT-GI-40][DSSS_CCK-40][40-INTOLERANT][RX-STBC1]</span><br><span class="line">#ht_capab=[HT40-][SHORT-GI-20][SHORT-GI-40][DSSS_CCK-40]</span><br><span class="line">#ht_capab=[HT40-][SHORT-GI-20][SHORT-GI-40]</span><br><span class="line">#ht_capab=[HT40+][DSSS_CCK-40][40-INTOLERANT]</span><br><span class="line"># 强制要求客户端使用HT PHY，不使用就拒绝。</span><br><span class="line">#require_ht=0</span><br><span class="line"># 间隔时间（秒）</span><br><span class="line">#obss_interval=5</span><br><span class="line">##### WPA/IEEE 802.11i configuration ##########################################</span><br><span class="line"># 1 wpa，2 wpa2, 3 两者。 新的设备可以设置为2，仅使用wpa2版本。</span><br><span class="line">wpa=2</span><br><span class="line"></span><br><span class="line"># 指定密码，ASCII码或密码字符。</span><br><span class="line">#wpa_psk=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef</span><br><span class="line">#密码设置</span><br><span class="line">wpa_passphrase=12345678</span><br><span class="line"># 使用密码文件，可以跟客户端MAC地址绑定设置不同的密码，比较实用。</span><br><span class="line">wpa_psk_file=/etc/hostapd/hostapd.wpa_psk</span><br><span class="line"># 是否使用验证服务器，0 禁用（默认），1 可用，2 强制使用（其他方式将拒绝）</span><br><span class="line">#wpa_psk_radius=0</span><br><span class="line"># 设置密钥管理算法WPA-PSK WPA-EAP或两者</span><br><span class="line">wpa_key_mgmt=WPA-PSK</span><br><span class="line"># 设置加密算法，CCMP就是AES，不推荐使用TKIP，除非设备不支持。</span><br><span class="line">wpa_pairwise=CCMP</span><br><span class="line"># 默认情况下rsn_pairwise自动设置为wpa_pairwise的值，当然也可以手动指定。</span><br><span class="line">#rsn_pairwise=CCMP</span><br><span class="line">#wpa_group_rekey=600</span><br><span class="line">#wpa_strict_rekey=1</span><br><span class="line">#wpa_gmk_rekey=86400</span><br><span class="line">#wpa_ptk_rekey=600</span><br><span class="line"># 预认证</span><br><span class="line">#rsn_preauth=1</span><br><span class="line">#rsn_preauth_interfaces=wlp2s0 br0 enp3s0</span><br><span class="line">#peerkey=1</span><br><span class="line"># 80211w支持，0 禁用（默认），1 可选，2 强制使用（其他方式将拒绝） 有些网卡不支持</span><br><span class="line">#ieee80211w=1</span><br><span class="line"># AES-128-CMAC（默认） BIP-GMAC-128 BIP-GMAC-256 BIP-CMAC-256 四种</span><br><span class="line"># 一般通用设备都支持AES-128-CMAC，其他的不一定</span><br><span class="line">#group_mgmt_cipher=AES-128-CMAC</span><br><span class="line">#assoc_sa_query_max_timeout=1000</span><br><span class="line">#assoc_sa_query_retry_timeout=201</span><br><span class="line">#disable_pmksa_caching=0</span><br><span class="line">#okc=1</span><br><span class="line">#sae_anti_clogging_threshold=5</span><br><span class="line">#sae_groups=19 20 21 25 26</span><br><span class="line">##### IEEE 802.11r configuration ##############################################</span><br><span class="line"># Wi-Fi无线漫游标准</span><br><span class="line">#mobility_domain=a1b2</span><br><span class="line">#r0_key_lifetime=10000</span><br><span class="line">#r1_key_holder=000102030405</span><br><span class="line">#reassociation_deadline=1000</span><br><span class="line">#pmk_r1_push=1</span><br><span class="line">##### Neighbor table ##########################################################</span><br><span class="line">#ap_table_max_size=255</span><br><span class="line">#ap_table_expiration_time=3600</span><br><span class="line">##### IEEE 802.11v-2011 #######################################################</span><br><span class="line"># Wi-Fi节能版 </span><br><span class="line">#time_advertisement=2</span><br><span class="line">#time_zone=CST8</span><br><span class="line"># 下面三项有些网卡不支持</span><br><span class="line">#wnm_sleep_mode=1</span><br><span class="line">#bss_transition=1</span><br><span class="line">#proxy_arp=1</span><br></pre></td></tr></table></figure>

<p>为了便于使用，将注释去除 <strong>（所用协议较老，请参照最新版）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface=wlan0</span><br><span class="line">driver=nl80211</span><br><span class="line">#修改名字</span><br><span class="line">ssid=AP-Pi4</span><br><span class="line">utf8_ssid=1</span><br><span class="line">hw_mode=g</span><br><span class="line">channel=7</span><br><span class="line">ieee80211n=1</span><br><span class="line">macaddr_acl=0</span><br><span class="line">auth_algs=1</span><br><span class="line">wmm_enabled=0</span><br><span class="line">wpa=2</span><br><span class="line">#密码设置</span><br><span class="line">wpa_passphrase=12345678</span><br><span class="line">wpa_key_mgmt=WPA-PSK</span><br><span class="line">wpa_pairwise=CCMP</span><br></pre></td></tr></table></figure>

<ul>
<li>ssid: WiFi 名称，8~64 个字符，最好用英文字母，不要出现特殊字符</li>
<li>hw_mode: WiFi 网络模式，一般填 <code>g</code> 即可，设备支持的话可以填 <code>a</code> 启用 5G 频段：<ul>
<li>a &#x3D; IEEE 802.11a (5 GHz)</li>
<li>b &#x3D; IEEE 802.11b (2.4 GHz)</li>
<li>g &#x3D; IEEE 802.11g (2.4 GHz)</li>
</ul>
</li>
<li>channel: 信道编号。如果上面配置了 <code>hw_mode=g</code> 使用 2.4G 频段，则一般填 <code>7</code> 即可。如果配置了 5G 频段，则信道编号有所不同，具体参考：<a href="https://zh.wikipedia.org/wiki/%E6%97%A0%E7%BA%BF%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BF%A1%E9%81%93%E5%88%97%E8%A1%A8">无线局域网信道列表 - 维基百科，自由的百科全书 (wikipedia.org)</a></li>
<li>wpa_passphrase: WiFi 密码，最好用英文加数字，不要出现特殊字符</li>
</ul>
<p><strong>最新版配置文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssid=AP-Pi4</span><br><span class="line">wpa_passphrase=123456789</span><br><span class="line"></span><br><span class="line">country_code=US</span><br><span class="line"></span><br><span class="line">interface=wlan0</span><br><span class="line">driver=nl80211</span><br><span class="line"></span><br><span class="line">wpa=2</span><br><span class="line">wpa_key_mgmt=WPA-PSK</span><br><span class="line">wpa_pairwise=TKIP CCMP</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">macaddr_acl=0</span><br><span class="line"></span><br><span class="line">logger_syslog=0</span><br><span class="line">logger_syslog_level=4</span><br><span class="line">logger_stdout=-1</span><br><span class="line">logger_stdout_level=0</span><br><span class="line"></span><br><span class="line">hw_mode=a</span><br><span class="line"></span><br><span class="line">channel=36</span><br><span class="line"># N</span><br><span class="line">ieee80211n=1</span><br><span class="line">require_ht=1</span><br><span class="line">ht_capab=[MAX-AMSDU-3839][HT40+][SHORT-GI-20][SHORT-GI-40][DSSS_CCK-40]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># AC</span><br><span class="line">ieee80211ac=1</span><br><span class="line">#require_vht=1</span><br><span class="line">ieee80211d=0</span><br><span class="line">ieee80211h=0</span><br><span class="line">#vht_capab=[MAX-AMSDU-3839][SHORT-GI-80]</span><br><span class="line">#vht_oper_chwidth=1</span><br><span class="line">#vht_oper_centr_freq_seg0_idx=42</span><br><span class="line"></span><br><span class="line">#AX</span><br><span class="line">ieee80211ax=1</span><br><span class="line">he_su_beamformer=1</span><br><span class="line">he_su_beamformee=1</span><br><span class="line">he_mu_beamformer=1</span><br><span class="line">he_bss_color=5</span><br><span class="line">he_default_pe_duration=0</span><br><span class="line">he_basic_mcs_nss_set=2</span><br><span class="line">eap_server=0</span><br><span class="line">he_oper_chwidth=1</span><br><span class="line">he_oper_centr_freq_seg0_idx=42</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wmm_enabled=1</span><br><span class="line">wmm_ac_bk_cwmin=4</span><br><span class="line">wmm_ac_bk_cwmax=10</span><br><span class="line">wmm_ac_bk_aifs=7</span><br><span class="line">wmm_ac_bk_txop_limit=0</span><br><span class="line">wmm_ac_bk_acm=0</span><br><span class="line">wmm_ac_be_aifs=3</span><br><span class="line">wmm_ac_be_cwmin=4</span><br><span class="line">wmm_ac_be_cwmax=10</span><br><span class="line">wmm_ac_be_txop_limit=0</span><br><span class="line">wmm_ac_be_acm=0</span><br><span class="line">wmm_ac_vi_aifs=2</span><br><span class="line">wmm_ac_vi_cwmin=3</span><br><span class="line">wmm_ac_vi_cwmax=4</span><br><span class="line">wmm_ac_vi_txop_limit=94</span><br><span class="line">wmm_ac_vi_acm=0</span><br><span class="line">wmm_ac_vo_aifs=2</span><br><span class="line">wmm_ac_vo_cwmin=2</span><br><span class="line">wmm_ac_vo_cwmax=3</span><br><span class="line">wmm_ac_vo_txop_limit=47</span><br><span class="line">wmm_ac_vo_acm=0</span><br></pre></td></tr></table></figure>



<p>编辑&#x2F;etc&#x2F;default&#x2F;hostapd文件，将DAEMON_CONF前面的注释去掉，并加上&#x2F;etc&#x2F;hostapd&#x2F;hostapd.conf</p>
<p><img src="https://pic.mstzf.cn//blog/202202081507806.png" alt="image-20220208150739117"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo vim /etc/default/hostapd</span><br><span class="line"></span><br><span class="line">DAEMON_CONF=&quot;/etc/hostapd/hostapd.conf&quot;</span><br></pre></td></tr></table></figure>

<p>保存退出后启动hostapd</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo systemctl unmask hostapd</span><br><span class="line">$sudo systemctl enable hostapd</span><br><span class="line">$sudo systemctl start hostapd</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn//blog/202202081531235.png" alt="image-20220208153101418"></p>
<p>可以看到热点已经开启成功，但是还没有分配IP不能上网。</p>
<h2 id="配置wlan0静态IP"><a href="#配置wlan0静态IP" class="headerlink" title="配置wlan0静态IP"></a>配置wlan0静态IP</h2><p>让wlan0的IP地址设置成静态的，然后在通过DHCP同态的去给连接设备分配IP</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo apt install dhcpcd</span><br><span class="line">$sudo vim /etc/dhcpcd.conf</span><br></pre></td></tr></table></figure>

<p>在文件最后添加</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface wlan0</span><br><span class="line">    static ip_address=192.168.4.1/24</span><br><span class="line">    nohook wpa_supplicant</span><br></pre></td></tr></table></figure>

<p>保存退出，重启dhcpcd服务：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo systemctl restart dhcpcd</span><br></pre></td></tr></table></figure>

<p>查看wlan0的IP地址：ifconfig ，可以发现，wlan0的IP已经改变为之前设置的地址</p>
<p><img src="https://pic.mstzf.cn//blog/202202091603084.png" alt="image-20220209160315594"></p>
<h2 id="安装并配置dnsmasq服务"><a href="#安装并配置dnsmasq服务" class="headerlink" title="安装并配置dnsmasq服务"></a>安装并配置dnsmasq服务</h2><p>Dnsmasq 提供 DNS 缓存和 DHCP 服务功能。作为域名解析服务器(DNS)，dnsmasq可以通过缓存 DNS 请求来提高对访问过的网址的连接速度。作为DHCP 服务器，dnsmasq 可以用于为局域网电脑分配内网ip地址和提供路由。DNS和DHCP两个功能可以同时或分别单独实现。dnsmasq轻量且易配置，适用于个人用户或少于50台主机的网络。此外它还自带了一个 PXE 服务器。</p>
<h3 id="安装dnsmasq服务"><a href="#安装dnsmasq服务" class="headerlink" title="安装dnsmasq服务"></a>安装dnsmasq服务</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo apt install dnsmasq</span><br><span class="line">$ sudo systemctl stop dnsmasq</span><br></pre></td></tr></table></figure>

<h3 id="配置dnsmasq"><a href="#配置dnsmasq" class="headerlink" title="配置dnsmasq"></a>配置dnsmasq</h3><p>编辑&#x2F;etc&#x2F;dnsmasq.conf文件，将里面的内容删除或者注释掉。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/dnsmasq.conf</span><br><span class="line"></span><br><span class="line">#添加新内容</span><br><span class="line">interface=wlan0</span><br><span class="line">dhcp-range=192.168.4.2,192.168.4.20,255.255.255.0,24h</span><br><span class="line"></span><br><span class="line">#dhcp 服务会给客户端分配 192.168.4.2 到 192.168.4.20 的 IP 空间，并设置24 小时租期。</span><br><span class="line"></span><br><span class="line">#重启dnsmasq服务</span><br><span class="line">$sudo systemctl restart dnsmasq</span><br></pre></td></tr></table></figure>

<p>配置完后连接到热点已经自动分配到了一个IP地址，但是还不能上网</p>
<p><img src="https://pic.mstzf.cn//blog/202202091621554.png" alt="image-20220209162149776"></p>
<h2 id="配置IP转发"><a href="#配置IP转发" class="headerlink" title="配置IP转发"></a>配置IP转发</h2><p>编辑 <code>/etc/sysctl.conf</code> 系统配置文件，将 <code>net.ipv4.ip_forward=1</code> 前面的注释去掉。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo vim /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">#net.ipv4.ip_forward=1</span><br><span class="line">#将前面的 # 号删除</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn//blog/202202091628179.png" alt="image-20220209162842756"></p>
<h3 id="修改防火墙规则"><a href="#修改防火墙规则" class="headerlink" title="修改防火墙规则"></a>修改防火墙规则</h3><p>安装iptables</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt install iptables</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</span><br><span class="line">$sudo iptables -A FORWARD -i eth0 -o wlan0 -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line">$sudo iptables -A FORWARD -i wlan0 -o eth0 -j ACCEPT</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##若要通过热点建立NAS开启以下防火墙规则</span><br><span class="line">#sudo iptables -A INPUT -p tcp --dport 139 -j ACCEPT</span><br><span class="line">#sudo iptables -A OUTPUT -p tcp --sport 139 -j ACCEPT</span><br><span class="line">#sudo iptables -A INPUT -p tcp --dport 445 -j ACCEPT</span><br><span class="line">#sudo iptables -A OUTPUT -p tcp --sport 445 -j ACCEPT</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>为了避免每次重启后都要重新配置，将防火墙规则写入开机启动项</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">将防火墙规则写入文件</span><br><span class="line">$sudo sh -c &quot;iptables-save &gt; /etc/iptables.ipv4.nat&quot;</span><br></pre></td></tr></table></figure>



<p>编辑<code>/etc/rc.local</code>，将<code>iptables-restore &lt; /etc/iptables.ipv4.nat</code>加到exit 0前面。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo vim /etc/rc.local</span><br><span class="line">#加在exit 0前面</span><br><span class="line">iptables-restore &lt; /etc/iptables.ipv4.nat</span><br><span class="line">若执行后出现：sh: 1: iptables-save: not found</span><br><span class="line">要先安装iptables</span><br><span class="line">$sudo apt install iptables</span><br></pre></td></tr></table></figure>



<p><img src="https://pic.mstzf.cn//blog/202202091634498.png" alt="image-20220209163455762"></p>
<p>保存退出后重启树莓派：<code>sudo reboot</code>。</p>
<h2 id="网络测试"><a href="#网络测试" class="headerlink" title="网络测试"></a>网络测试</h2><p>经过一段时间的测试，能够正常访问互联网，网速也还可以，但是在流量较大时会间歇性断开连接，上传速率也有些异常，目前还不清楚是什么原因造成。**(已解决)**</p>
<p><img src="https://pic.mstzf.cn//blog/202202091854457.png" alt="image-20220209185439101"></p>
<p><strong>网络慢问题分析及解决办法</strong></p>
<a class="tag-Link" target="_blank" href="/posts/startAP2/">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon//posts/startAP2/.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">树莓派开启个人热点（二）解决网速慢问题</div>
            <div class="tag-link-sitename">Mstzf</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>
]]></content>
      <categories>
        <category>树莓派</category>
        <category>个人热点</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
        <tag>个人热点</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派开启个人热点（二）解决网速慢问题</title>
    <url>/posts/startAP2/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>为了在方便树莓派联网的同时让其他设备也能上网，就有了将树莓派作为软路由的想法，经过在网上各种搜索后不断折腾，最终也实现了这一目的。有同样需求的可参照下文</p>
<a class="tag-Link" target="_blank" href="https://blog.teohzy.com/posts/startAP/">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.teohzy.com/posts/startAP/.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">树莓派开启个人热点</div>
            <div class="tag-link-sitename">TeohZY</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p><strong>一番配置下来确实成功开启了个人热点，但是网速和稳定性一直不是很理想</strong></p>
<h2 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h2><p><strong>hostapd配置文件网络协议没有设置正确</strong></p>
<p><code>hostapd v2.9</code> 和 <code>树莓派4B</code>都已经可以支持WIFI5，而我之前的配置还在使用上个世纪的<code>iee802.11a</code>协议</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>修改以下hostapd配置文件即可</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vim /etc/hostapd/hostapd.conf</span></span><br></pre></td></tr></table></figure>

<p>将原配置文件删除，替换为新的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssid=AP-Pi4</span><br><span class="line">wpa_passphrase=123456789</span><br><span class="line"></span><br><span class="line">country_code=US</span><br><span class="line"></span><br><span class="line">interface=wlan0</span><br><span class="line">driver=nl80211</span><br><span class="line"></span><br><span class="line">wpa=2</span><br><span class="line">wpa_key_mgmt=WPA-PSK</span><br><span class="line">wpa_pairwise=TKIP CCMP</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">macaddr_acl=0</span><br><span class="line"></span><br><span class="line">logger_syslog=0</span><br><span class="line">logger_syslog_level=4</span><br><span class="line">logger_stdout=-1</span><br><span class="line">logger_stdout_level=0</span><br><span class="line"></span><br><span class="line">hw_mode=a</span><br><span class="line"></span><br><span class="line">channel=36</span><br><span class="line"># N</span><br><span class="line">ieee80211n=1</span><br><span class="line">require_ht=1</span><br><span class="line">ht_capab=[MAX-AMSDU-3839][HT40+][SHORT-GI-20][SHORT-GI-40][DSSS_CCK-40]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># AC</span><br><span class="line">ieee80211ac=1</span><br><span class="line">#require_vht=1</span><br><span class="line">ieee80211d=0</span><br><span class="line">ieee80211h=0</span><br><span class="line">#vht_capab=[MAX-AMSDU-3839][SHORT-GI-80]</span><br><span class="line">#vht_oper_chwidth=1</span><br><span class="line">#vht_oper_centr_freq_seg0_idx=42</span><br><span class="line"></span><br><span class="line">#AX</span><br><span class="line">ieee80211ax=1</span><br><span class="line">he_su_beamformer=1</span><br><span class="line">he_su_beamformee=1</span><br><span class="line">he_mu_beamformer=1</span><br><span class="line">he_bss_color=5</span><br><span class="line">he_default_pe_duration=0</span><br><span class="line">he_basic_mcs_nss_set=2</span><br><span class="line">eap_server=0</span><br><span class="line">he_oper_chwidth=1</span><br><span class="line">he_oper_centr_freq_seg0_idx=42</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wmm_enabled=1</span><br><span class="line">wmm_ac_bk_cwmin=4</span><br><span class="line">wmm_ac_bk_cwmax=10</span><br><span class="line">wmm_ac_bk_aifs=7</span><br><span class="line">wmm_ac_bk_txop_limit=0</span><br><span class="line">wmm_ac_bk_acm=0</span><br><span class="line">wmm_ac_be_aifs=3</span><br><span class="line">wmm_ac_be_cwmin=4</span><br><span class="line">wmm_ac_be_cwmax=10</span><br><span class="line">wmm_ac_be_txop_limit=0</span><br><span class="line">wmm_ac_be_acm=0</span><br><span class="line">wmm_ac_vi_aifs=2</span><br><span class="line">wmm_ac_vi_cwmin=3</span><br><span class="line">wmm_ac_vi_cwmax=4</span><br><span class="line">wmm_ac_vi_txop_limit=94</span><br><span class="line">wmm_ac_vi_acm=0</span><br><span class="line">wmm_ac_vo_aifs=2</span><br><span class="line">wmm_ac_vo_cwmin=2</span><br><span class="line">wmm_ac_vo_cwmax=3</span><br><span class="line">wmm_ac_vo_txop_limit=47</span><br><span class="line">wmm_ac_vo_acm=0</span><br></pre></td></tr></table></figure>

<p>重启hostapd</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># sudo systemctl start hostapd</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>树莓派</category>
        <category>个人热点</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
        <tag>个人热点</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派开机自动发送邮件</title>
    <url>/posts/smpxjfsyj/</url>
    <content><![CDATA[<p>在平时使用树莓派的过程中，大多数人的习惯都是直接使用终端去连接树莓派，很少使用屏幕去直接操作；而在连接终端的时候又必须要知道树莓派的IP地址；这时候如果树莓派能够通过邮件的方式直接将自己的IP地址直接发送给我们，在连接时就会省去很多不必要的麻烦。</p>
<h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h2><ul>
<li>安装mutt：$sudo apt-get install mutt</li>
<li>安装msmtp：$sudo apt-get install msmtp</li>
</ul>
<h2 id="设置软件"><a href="#设置软件" class="headerlink" title="设置软件"></a>设置软件</h2><ul>
<li><p>设置mutt</p>
<p>编辑&#x2F;etc&#x2F;Muttrc	系统全局设置</p>
<p>编辑~&#x2F;.muttrc	    为某个系统用户设置</p>
<p>这里对全局进行设置</p>
<p>$sudo vim &#x2F;etc&#x2F;Muttrc</p>
<p>在文件最后面添加如下代码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set sendmail=&quot;/usr/bin/msmtp&quot;</span><br><span class="line">set use_from=yes</span><br><span class="line">set realname=&quot;Raspberry&quot;          #邮箱发送人昵称</span><br><span class="line">set from=xxxxx@xxx.com    #自己的发件箱邮箱地址</span><br><span class="line">set envelope_from=yes</span><br><span class="line">set crypt_use_gpgme=no</span><br></pre></td></tr></table></figure>
</li>
<li><p>登录邮箱，进入邮箱设置界面，开启邮箱的IMAP&#x2F;SMTP服务</p>
<p><strong>下图为163邮箱</strong></p>
<p><img src="https://pic.mstzf.cn//blog/202202041840635.png" alt="NHVGLK3YN1G68YJBOYT"></p>
</li>
</ul>
<h2 id="设置msmtp"><a href="#设置msmtp" class="headerlink" title="设置msmtp"></a>设置msmtp</h2><ul>
<li><p>创建 ~&#x2F;.msmtprc 和 ~&#x2F;.msmtp.log 两个文件分别作为msmtp的配置文件和日志文件</p>
<p>编辑.msmtprc</p>
<p>vim ~&#x2F;.msmtprc</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">account default   </span><br><span class="line">host smtp.163.com   #自己邮箱的smtp地址，我的是163邮箱，所以是这个</span><br><span class="line">from mstz1130@163.com    #自己的邮箱地址</span><br><span class="line">auth plain</span><br><span class="line">user mstz1130        #自己的邮箱用户名，就是@前的</span><br><span class="line">password xxxxxxxx   #这个并不是邮箱密码，是邮箱授权码</span><br><span class="line">logfile ~/.msmtp.log</span><br><span class="line">        #日志文件地址</span><br></pre></td></tr></table></figure>

<p><strong>由于password是明码，所以我们要修改文件的权限</strong></p>
<p>$sudo chmod 600 .msmtprc</p>
<p>163邮箱授权码的开启位置，其他邮箱的具体位置请自行查询。</p>
<p><img src="https://pic.mstzf.cn/blog/202202041802988.png" alt="2FUYGZLJWT4DM@RES"></p>
</li>
</ul>
<h2 id="测试邮件发送"><a href="#测试邮件发送" class="headerlink" title="测试邮件发送"></a>测试邮件发送</h2><p>$ echo “正文” | mutt -s ”主题“ <a href="mailto:&#120;&#120;&#120;&#x40;&#x78;&#x78;&#x2e;&#x63;&#x6f;&#109;">&#120;&#120;&#120;&#x40;&#x78;&#x78;&#x2e;&#x63;&#x6f;&#109;</a> -q 附件</p>
<h2 id="获取IP地址脚本"><a href="#获取IP地址脚本" class="headerlink" title="获取IP地址脚本"></a>获取IP地址脚本</h2><p><em>可以在任意可执行位置创建</em></p>
<p>$vim sendip.sh</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># check network availability</span><br><span class="line"></span><br><span class="line">SITE_TO_CHECK=&quot;www.163.com&quot;</span><br><span class="line">while true</span><br><span class="line">do</span><br><span class="line">    TIMEOUT=5</span><br><span class="line">    RET_CODE=`ping -s 1 -c 1 $SITE_TO_CHECK`</span><br><span class="line">    if [ &quot;$?&quot; != &quot;0&quot; ]</span><br><span class="line">       then</span><br><span class="line">        echo &quot;Network not ready, wait...&quot;</span><br><span class="line">        sleep 1s </span><br><span class="line">    else</span><br><span class="line">        echo &quot;Network OK, will send mail...&quot;</span><br><span class="line">        break</span><br><span class="line">    fi</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># get the IP address of eth0, e.g. &quot;192.168.x.x&quot;</span><br><span class="line">WLAN0_IP_ADDR=`ifconfig wlan0 | sed -n &quot;2,2p&quot; | awk &#x27;&#123;print substr($2,1)&#125;&#x27;`</span><br><span class="line">ETH0_IP_ADDR=`ifconfig eth0 | sed -n &quot;2,2p&quot; | awk &#x27;&#123;print substr($2,1)&#125;&#x27;`</span><br><span class="line">ETH1_IP_ADDR=`ifconfig eth1 | sed -n &quot;2,2p&quot; | awk &#x27;&#123;print substr($2,1)&#125;&#x27;`</span><br><span class="line">ETH2_IP_ADDR=`ifconfig eth2 | sed -n &quot;2,2p&quot; | awk &#x27;&#123;print substr($2,1)&#125;&#x27;`</span><br><span class="line"></span><br><span class="line"># send the Email</span><br><span class="line">echo &quot;Current time: `date &#x27;+%F %T&#x27;`</span><br><span class="line">WLAN0 IP Address of Raspberry Pi: $WLAN0_IP_ADDR</span><br><span class="line">ETH0 IP Address of Raspberry Pi: $ETH0_IP_ADDR</span><br><span class="line">IP address loading completed ! ! !&quot; | mutt -s &quot;IP Address of Raspberry Pi&quot; xxx@xxx.com</span><br></pre></td></tr></table></figure>

<h2 id="写入开机启动项"><a href="#写入开机启动项" class="headerlink" title="写入开机启动项"></a>写入开机启动项</h2><p>$sudo vim &#x2F;etc&#x2F;rc.local</p>
<p>在exit 0之前加入以下命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">su pi -c /home/pi/sh/sentIP.sh &amp;</span><br></pre></td></tr></table></figure>

<p>具体路径由自己创建的脚本地址位置来决定，&amp;表示并发执行，在脚本运行时不影响其他脚本</p>
]]></content>
      <categories>
        <category>树莓派</category>
        <category>开机自动发送邮件</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
        <tag>开机自动发送邮件</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派搭建文件共享系统（samba）</title>
    <url>/posts/raspi_samba_nas/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>在不久之前，为了不让<mark class="hl-label red">昂贵</mark> 的树莓派不吃灰，尝试了一次将树莓派作为云盘服务器的文章</p>
<a class="tag-Link" target="_blank" href="https://blog.teohzy.com/posts/private_cloud_disk/">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.teohzy.com/posts/private_cloud_disk/.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">搭建个人云盘</div>
            <div class="tag-link-sitename">TeohZY</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p>在试用了一段时间后，使用感受并不是很好。</p>
<p><strong>首先，nextcloud修改默认存储位置比较麻烦</strong>，云盘的主要目的就是要将资料存储在便于移动、扩展的U盘、硬盘上，而不是直接利用插入的TF卡或者是树莓派自身的内存空间内，这样不仅存储空间比较小而且对自身存储器也是一种损耗。</p>
<p><strong>其次，云盘以网页的方式发布</strong> ，内网穿透比较麻烦。</p>
<h2 id="设备清单"><a href="#设备清单" class="headerlink" title="设备清单"></a>设备清单</h2><ul>
<li>树莓派</li>
<li>移动硬盘（U盘也可）</li>
<li>网络环境</li>
</ul>
<h2 id="挂载硬盘"><a href="#挂载硬盘" class="headerlink" title="挂载硬盘"></a>挂载硬盘</h2><ul>
<li><p>查看硬盘</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$sudo fdisk -l</span><br></pre></td></tr></table></figure></li>
</ul>
<p>​		如果设备被识别成功，在执行命令后可以查看到类似如下的结果</p>
<p>​		<img src="https://pic.mstzf.cn/blog/202204092112765.png" alt="image-20220409211212249"></p>
<p>​		不同设备会有不同，类似&#x2F;dev&#x2F;hda, &#x2F;dev&#x2F;hdb, &#x2F;dev&#x2F;sda, &#x2F;dev&#x2F;sdb,这些不同的代号，而这些不同的代号又代表着什么？</p>
<p>​		hda一般是指IDE接口的硬盘，hda指第一块硬盘，hdb指第二块硬盘,等等；sda一般是指SATA接口的硬盘，sda指第一块硬盘，sdb指第二块硬盘，等等。</p>
<ul>
<li>挂载硬盘</li>
</ul>
<div class="tabs" id=""><ul class="nav-tabs"><button type="button" class="tab  active" data-href="-1">临时挂载</button><button type="button" class="tab " data-href="-2">永久挂载</button></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><p>临时挂载非常简单，只需要一个**<code>mount</code> **命令即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo mount [参数] [挂载对象(/dev/sda)] [挂载点(新建文件夹来挂载)]</span><br><span class="line"># 新建文件夹(挂载点)</span><br><span class="line">$ sudo mkdir Disk</span><br></pre></td></tr></table></figure>

<p>取消挂载</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo umount [挂载对象] [挂载点]</span><br></pre></td></tr></table></figure>



<p>对于mount的参数可以省略，如果又特殊需求可以通过百度来查找**<code>mount 参数</code>**</p></div><div class="tab-item-content" id="-2"><p>所谓的永久挂载其实也就是开机自动挂载，开机自动挂载硬盘不需要在每次开机后都通过命令的方式去挂载硬盘，相对来说比较方便，但是这种方法挂载硬盘后如果没有插入硬盘可能会出现不能引导开机的问题，解决方法这里就不细说了，网上的教程还是比较丰富的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">查看硬盘的UUID</span><br><span class="line">$ sudo blkid</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202204092148000.png" alt="image-20220409214826591"></p>
<p>将获取的UUID复制下来，待会要用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 新建挂载点（在当前目录下）</span><br><span class="line">$ sudo mkdir Disk</span><br><span class="line"></span><br><span class="line">#编辑fstab加入硬盘信息</span><br><span class="line">$ sudo vim /etc/fstab</span><br><span class="line"></span><br><span class="line">#在文件最后输入硬盘信息</span><br><span class="line">UUID=&quot;刚刚复制的UUID&quot; /home/pi/Disk ext4 defaults 0 1</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202204092153294.png" alt="image-20220409215353270"></p>
<p><strong>测试:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 重启树莓派</span><br><span class="line">$ sudo reboot</span><br><span class="line"></span><br><span class="line"># 查看挂载情况</span><br><span class="line">$ sudo df -l</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202204092157041.png" alt="image-20220409215732729"></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>

<h2 id="配置samba"><a href="#配置samba" class="headerlink" title="配置samba"></a>配置samba</h2><ol>
<li><strong>按照惯例安装软件之前先update和upgrade一波</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 凑个字数</span><br><span class="line">$ sudo apt update</span><br><span class="line">$ sudo apt upgrade</span><br><span class="line"></span><br><span class="line"># 安装samba</span><br><span class="line">sudo apt install samba samba-common-bin -y</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>配置samba控制文件，指定共享的文件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 通过vim打开控制文件</span><br><span class="line">$ sudo vim /etc/samba/smb.conf</span><br></pre></td></tr></table></figure>

<p>添加文件目录和控制信息，在最后面添加如下内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[NAS]</span><br><span class="line">    comment = NAS Storage</span><br><span class="line">    path = /home/pi/Disk/</span><br><span class="line">    browseable = yes</span><br><span class="line">    read only = no</span><br><span class="line">    writable = yes</span><br><span class="line">    valid users = pi</span><br><span class="line">    create mask = 0775</span><br><span class="line">    directory mask= 0775</span><br><span class="line">    guest ok = yes</span><br></pre></td></tr></table></figure>

<mark class="hl-label blue">path后面的文件路径根据自己的需要来修改，我的路径就是硬盘的挂载地址</mark> 

<p><strong>如果不想共享home下的文件目录，可以找到文件中[home]的部分，将那部分全部注释掉</strong></p>
<p><img src="https://pic.mstzf.cn/blog/202204092214311.png" alt="image-20220409221417876"></p>
<ol start="3">
<li>重启samba服务</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo /etc/init.d/samba restart</span><br><span class="line">$ sudo systemctl restart samba</span><br><span class="line">$ sudo samba restart</span><br><span class="line"># 这三个都试试看吧，都是重启服务的命令，我只成功了最后那个</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>添加默认用户到samba</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo smbpasswd -a pi</span><br><span class="line"># 输入密码确认即可</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202204092237690.png" alt="image-20220409223723986"></p>
<h2 id="本地连接共享测试"><a href="#本地连接共享测试" class="headerlink" title="本地连接共享测试"></a>本地连接共享测试</h2><p>之前将树莓派作为一个软路由来使用，现在电脑和手机都有连接着树莓派的WIFI，所以只需要直接访问树莓派的固定IP就能实现对树莓派共享文件的访问。开热点方法可以参考我之前写的这篇文章。</p>
<div class="flink"> <div class="flink-list">
          <div class="flink-list-item">
            <a href="https://blog.teohzy.com/02-09/startAP/" title="树莓派开启个人热点" target="_blank">
              <div class="flink-item-icon">
                <img class="no-lightbox" src="https://pic.mstzf.cn//blog/202202091916889.png" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="树莓派开启个人热点" />
              </div>
              <div class="flink-item-name">树莓派开启个人热点</div> 
              <div class="flink-item-desc" title="null">null</div>
            </a>
          </div></div></div>

<ul>
<li><p>Windows 测试访问共享文件</p>
<p>在文件资源管理器中直接输入<code>\\IP地址</code> 即可访问共享文件</p>
<p><img src="https://pic.mstzf.cn/blog/202204092233135.png" alt="image-20220409223310023"></p>
<p>还可以映射为本地驱动器，在Network右键-&gt;映射网络驱动器</p>
<p><img src="https://pic.mstzf.cn/blog/202204092239065.png" alt="image-20220409223950512"></p>
</li>
<li><p>Android</p>
<p>如果默认文件管理器可以访问网络存储的话就按照官方教程来使用，如过默认文件管理器不能访问，则要下载其他文件管理器</p>
<p>我目前使用的是<code>文件管理器（File Manager Plus）</code></p>
<p><img src="https://pic.mstzf.cn/blog/202204092246634.png" alt="image-20220409224651643"></p>
</li>
</ul>
<p>使用体验还是比较不错的</p>
<p><img src="https://pic.mstzf.cn/blog/202204092247476.png" alt="image-20220409224741807"></p>
<h2 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h2><p>这里推荐一个很好用，还免费的内网穿透平台<mark class="hl-label red">（非广告）</mark> 。</p>
<div class="flink"> <div class="flink-list">
          <div class="flink-list-item">
            <a href="https://www.natfrp.com/" title="SAKURA FRP" target="_blank">
              <div class="flink-item-icon">
                <img class="no-lightbox" src="https://nyat-static.globalslb.net/natfrp/index/bg2.jpg" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="SAKURA FRP" />
              </div>
              <div class="flink-item-name">SAKURA FRP</div> 
              <div class="flink-item-desc" title=" "> </div>
            </a>
          </div></div></div>

<p>如果需要远程访问到共享文件，就需要内网穿透，安装配置文档已经非常完善，可自行到官网查看安装配置方法。samba占用的是139端口，在创建隧道的时候端口选择139就行。</p>
<mark class="hl-label red">如果选择了内网穿透了，一定要设置好密码和保护好隧道信息...不让很容易信息泄露</mark> ]]></content>
      <categories>
        <category>树莓派</category>
        <category>文件共享</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
        <tag>文件共享</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派烧录系统不再折腾</title>
    <url>/posts/raspi_imager/</url>
    <content><![CDATA[<p>把树莓派作为路由器之后，很长一段时间都没有再折腾树莓派上的东西。最近准备用树莓派做一个人脸识别的系统，就去<a href="https://www.raspberrypi.org/">树莓派官网</a> 准备下载个新的系统，树莓派的官方烧录软件居然更新了。</p>
<p>在之前的版本中，界面是英文的、而且只能对TF卡格式化和烧录系统，在没有桌面显示器的情况下安装新系统有很多地方要折腾，开启SSH，添加默认WiFi链接…</p>
<p><img src="https://pic.mstzf.cn/blog/202206141938153.png" alt="image-20220614193852774"></p>
<p>在1.7版本中，界面已经可以支持中文，最主要的还是在系统烧录时可以配置wifi、用户名、是否开启SSH、语言…</p>
<p><img src="https://pic.mstzf.cn/blog/202206142004501.png" alt="image-20220614195504459"></p>
<p>右下加的设置图片可以对烧录后的系统进行设置</p>
<p><img src="https://pic.mstzf.cn/blog/202206142015151.png" alt="image-20220614201506953"></p>
<p>虽然烧录系统很简单，配置起来也可以直接在网上找到很多教程，但是谁能拒绝如此方便的配置过程呢</p>
]]></content>
      <categories>
        <category>树莓派</category>
        <category>方便烧录系统</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
        <tag>方便烧录系统</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派访客抓拍视频版</title>
    <url>/posts/hc-rsAndvideo/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>由于在对移动的人体进行拍照的效果并不好，所以对抓拍图片版进行了升级，通过人体红外感应器在来访人员进入房间后录制视频，视频能比较好的看清来访人员起到看家的作用。</p>
<p>拍照版</p>
<a class="tag-Link" target="_blank" href="https://blog.teohzy.com/posts/hc-rsAndcamera/index.html">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.teohzy.com/posts/hc-rsAndcamera/index.html.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">树莓派64位系统实现对访客抓拍</div>
            <div class="tag-link-sitename">TeohZY</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO  <span class="comment">##引入GPIO模块</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> picamera2 <span class="keyword">import</span> Picamera2, Preview</span><br><span class="line"><span class="keyword">from</span> picamera2.encoders <span class="keyword">import</span> H264Encoder</span><br><span class="line"><span class="keyword">from</span> picamera2.outputs <span class="keyword">import</span> FfmpegOutput</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">video</span>():</span><br><span class="line">    now = time.strftime(<span class="string">&quot;%Y%m%d%H%M%S&quot;</span>,time.localtime(time.time())) </span><br><span class="line">    file_name=<span class="string">&quot;/Disk/MyCloud/Safe/&quot;</span>+now+<span class="string">&quot;.mp4&quot;</span></span><br><span class="line">    picam2 = Picamera2()</span><br><span class="line">    video_config = picam2.create_video_configuration()</span><br><span class="line">    picam2.configure(video_config)</span><br><span class="line"></span><br><span class="line">    encoder = H264Encoder(<span class="number">10000000</span>)</span><br><span class="line">    output = FfmpegOutput(file_name)</span><br><span class="line"></span><br><span class="line">    picam2.start_recording(encoder, output)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    picam2.stop_recording()</span><br><span class="line">    picam2.close()</span><br><span class="line">    </span><br><span class="line">HC_Pin = <span class="number">18</span> </span><br><span class="line"></span><br><span class="line">GPIO.setmode(GPIO.BCM)</span><br><span class="line">GPIO.setup(HC_Pin, GPIO.IN)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">if</span>(GPIO.<span class="built_in">input</span>(HC_Pin)):</span><br><span class="line">        now = time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.localtime(time.time()))</span><br><span class="line">        f = <span class="built_in">open</span>(<span class="string">&#x27;/home/zh/code/.log&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            video()</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">str</span>=now+<span class="string">&#x27;    相机调用失败\n&#x27;</span></span><br><span class="line">            f.writelines(<span class="built_in">str</span>)         </span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="built_in">str</span>=now+<span class="string">&quot;    有人来访\n&quot;</span></span><br><span class="line">            f.writelines(<span class="built_in">str</span>)</span><br><span class="line">            f.close()</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>树莓派</category>
        <category>64位系统访客拍照</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
        <tag>64位系统访客拍照</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派访客拍照C语言版</title>
    <url>/posts/undefined/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>不知道因为什么原因<code>Picamera2</code>包调用摄像头拍照，在一个程序中达到一定次数之后就会导致系统的内存泄漏，除了重启软件没有什么好的方法来解决，但作为一个监控性质的软件，经常发生这种错误还是比较无法接受的事情。</p>
<p>因此决定看看能不能直接使用C语言来完成监控人员到访和录像这一系列动作</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>代码部分十分简单</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pigpio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> pinNumber = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">getVideo</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">time_t</span> timep;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">tm</span> *<span class="title">p</span>;</span></span><br><span class="line">    <span class="type">char</span> filePath[<span class="number">28</span>];</span><br><span class="line">    time (&amp;timep);</span><br><span class="line">    p=gmtime(&amp;timep);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> hour = <span class="number">8</span>+p-&gt;tm_hour;</span><br><span class="line">    <span class="built_in">sprintf</span>(filePath,<span class="string">&quot;%s%d%02d%02d%02d%02d%02d%s&quot;</span>,<span class="string">&quot;/Disk/MyCloud/Stream/Safe/&quot;</span>,<span class="number">1900</span>+p-&gt;tm_year,<span class="number">1</span>+p-&gt;tm_mon,p-&gt;tm_mday,(hour&gt;=<span class="number">24</span>)?(hour<span class="number">-24</span>):hour,p-&gt;tm_min,p-&gt;tm_sec,<span class="string">&quot;.mp4&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> command[<span class="number">1000</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(command,<span class="string">&quot;%s%s%s%s&quot;</span>, <span class="string">&quot;libcamera-vid -t 5000 --width 1280 --height 720 --codec libav -o &quot;</span>,filePath,<span class="string">&quot; &amp;&amp; sudo chown www-data &quot;</span>,filePath);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> system(command);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> value = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (gpioInitialise() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;pigpio initialization failed\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    gpioSetMode(pinNumber, PI_INPUT);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        value = gpioRead(pinNumber);</span><br><span class="line">        <span class="keyword">if</span>(value==<span class="number">1</span>)&#123;</span><br><span class="line">            getVideo();</span><br><span class="line">        &#125;</span><br><span class="line">        time_sleep(<span class="number">1.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    gpioTerminate();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于在之前 使用的GPIO库<code>wiringPi.h</code>已经暂停维护，在新版的树莓派系统中不在默认安装，这里使用了<code>pigpio.h</code>库</p>
<ol>
<li><p>如果没有安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install pigpio</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gcc monitor.c -o monitor -lpigpio -lrt -lpthread</span><br></pre></td></tr></table></figure>
</li>
<li><p>引脚编号</p>
<p>默认为BCM编号</p>
<img src="https://pic.mstzf.cn/blog/202203181519095.jpg" style="zoom:50%;" />

<ol start="3">
<li><p>主要拍照代码</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">system(command)</span><br></pre></td></tr></table></figure>

<p>实际是为了调用系统的libcamera-vid</p>
<p>即</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sprintf</span>(command,<span class="string">&quot;%s%s%s%s&quot;</span>, <span class="string">&quot;libcamera-vid -t 5000 --codec libav -o &quot;</span>,filePath,<span class="string">&quot; &amp;&amp; sudo chown www-data &quot;</span>,filePath);</span><br></pre></td></tr></table></figure>

<p>这部分代码为录一个5秒的视频并保存到<code>filePath</code>目录下，同时修改视频权限方便给<code>Nextcloud</code>修改查看</p>
</li>
<li><p>人体红外代码</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> value = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (gpioInitialise() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;pigpio initialization failed\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">gpioSetMode(pinNumber, PI_INPUT);</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    value = gpioRead(pinNumber);</span><br><span class="line">    <span class="keyword">if</span>(value==<span class="number">1</span>)&#123;</span><br><span class="line">        getVideo();</span><br><span class="line">    &#125;</span><br><span class="line">    time_sleep(<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line">      </span><br><span class="line">gpioTerminate();</span><br></pre></td></tr></table></figure>

<p>当有人到访时输出高电平，检测到高电平时触发录像</p>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>树莓派</category>
        <category>访客拍照C语言版</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
        <tag>访客拍照C语言版</tag>
      </tags>
  </entry>
  <entry>
    <title>移动硬盘安装Linux系统闪屏问题解决方案</title>
    <url>/posts/Linux-flash-screen-solution/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>电脑自带的固态只有120GB，着实有点嫌小就换了个大一点的，原来的就被我做成了移动硬盘。但是已经有很多可以使用的U盘，对速度也没有太高的追求，与其被丢在角落里吃灰，不如在移动盘里烧录个Linux，和原本主机的Windows一起做双系统使用，做个即插即用的备用系统。</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>在给移动硬盘烧录Ubuntu 22.4后还没使用多长时间，屏幕就开始不间断闪烁</p>
<h2 id="尝试解决方案"><a href="#尝试解决方案" class="headerlink" title="尝试解决方案"></a>尝试解决方案</h2><ul>
<li><p>一开始我以为是显示器参数没有调对，就把在UI界面下可以调节的什么伽马值，屏幕刷新率挨个调了个遍，都没有变化</p>
</li>
<li><p>然后，我以为是驱动的原因，按照网上的教程安装显卡驱动后，问题并没有得到解决</p>
</li>
<li><p>我开始怀疑也许是Linux发行版与我的电脑不兼容（纯小白）就尝试使用了许多不同的系统；Ubuntu、OpenSUSE、Manjaro、Kali等各大发行版后，每一版都会有不同程度的闪屏问题</p>
</li>
</ul>
<h2 id="问题根源发现"><a href="#问题根源发现" class="headerlink" title="问题根源发现"></a>问题根源发现</h2><p>之前一直把移动硬盘插在一个绿联的USB扩展坞上，在Windows这边读取并没有任何的问题，但有一次把移动硬盘直接插在了电脑的USB口上就开始频繁的设备挂载与退出</p>
<p><img src="https://pic.mstzf.cn/blog/202209041827232.gif" alt="硬盘抽风"></p>
<p>好家伙，网上一查是移动硬盘的供电不足，导致了设备频繁挂在推出</p>
<p>看来是买了便宜的移动硬盘盒，但是在USB扩展坞上使用没有任何问题，直接插电脑上却用不了。不知道又是些什么奇奇怪怪的原因了。</p>
<h2 id="最终解决方案"><a href="#最终解决方案" class="headerlink" title="最终解决方案"></a>最终解决方案</h2><p>暂时并没有多余的资金去买一个好一点的硬盘盒，又有一个USB的电压电流计，就打算拿他做中转试试，还真成功了</p>
<p><img src="https://pic.mstzf.cn/blog/202209041836017.jpg" alt="莫名其妙的解决办法"></p>
<p>真的是莫名其妙的解决办法，自己看了都有点想笑。不管那么多了，反正又不是不能用，不再闪屏就行</p>
<p><img src="https://pic.mstzf.cn/blog/202209041708609.gif" alt="不再闪屏了"></p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>双系统</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>双系统</tag>
      </tags>
  </entry>
  <entry>
    <title>远程访问本地搭建的NextCloud(反向代理网页)</title>
    <url>/posts/natfrp_nextcloud/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在没有公网IP的情况下，很难从其他网络环境中直接访问到部署在本地的web服务，这时候就需要通过内网穿透的方式来实现。而对于内网穿透，有着很多的实现方式，最为常见的就是通过云服务器搭建和使用别人提供的服务</p>
<h2 id="自建内网穿透服务"><a href="#自建内网穿透服务" class="headerlink" title="自建内网穿透服务"></a>自建内网穿透服务</h2><ul>
<li><p>需要有自己的云服务器</p>
</li>
<li><p>服务端和客户端都需要下载frp，下载地址 &#x3D;&gt; <a href="https://github.com/fatedier/frp/releases">Releases · fatedier&#x2F;frp (github.com)</a></p>
</li>
</ul>
<h3 id="服务端配置"><a href="#服务端配置" class="headerlink" title="服务端配置"></a>服务端配置</h3><ol>
<li><p>编辑frps.ini文件</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="comment"># frp监听的端口，默认是7000，可以改成其他的</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="comment"># 授权码,需要与客户端一致，请改为更复杂的</span></span><br><span class="line"><span class="attr">token</span> = aaaaaa</span><br><span class="line">			</span><br><span class="line"><span class="comment"># frp管理后台端口，请按自己需求更改</span></span><br><span class="line"><span class="attr">dashboard_port</span> = <span class="number">7500</span></span><br><span class="line"><span class="comment"># frp管理后台用户名和密码，请改成自己的</span></span><br><span class="line"><span class="attr">dashboard_user</span> = Mango</span><br><span class="line"><span class="attr">dashboard_pwd</span> = <span class="number">12345678</span></span><br><span class="line"><span class="attr">enable_prometheus</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment"># http 端口可更改</span></span><br><span class="line"><span class="attr">vhost_http_port</span> = <span class="number">8090</span></span><br><span class="line"><span class="comment"># https 端口可更改</span></span><br><span class="line"><span class="attr">vhost_https_port</span>= <span class="number">8081</span></span><br><span class="line"><span class="comment">#vhost_https_port = 8080</span></span><br><span class="line"><span class="comment"># frp日志配置 路径根据自己需求更改</span></span><br><span class="line"><span class="attr">log_file</span> = /root/frp/.frps.log</span><br><span class="line"><span class="attr">log_level</span> = error</span><br><span class="line"><span class="attr">log_max_days</span> = <span class="number">3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置systemd守护进程便于管理</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/systemd/system/frps.service</span><br></pre></td></tr></table></figure>

<p>输入以下内容并保存</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=fraps service</span><br><span class="line"><span class="attr">After</span>=network.target syslog.target</span><br><span class="line"><span class="attr">Wants</span>=network.target</span><br><span class="line">			</span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="comment">#启动服务的命令（此处写你的frps的实际安装目录）</span></span><br><span class="line"><span class="attr">ExecStart</span>=/root/frp/frps -c /root/frp/frps.ini</span><br><span class="line">			</span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure>

<p>启动frps并设置开机自启</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start frps</span><br><span class="line">systemctl enable frps</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置nginx</p>
<p>如果没有nginx先安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install nginx</span><br></pre></td></tr></table></figure>

<p>编辑配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/nginx/sites-enabled/nextcloud</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">也可以不新建nextcloud文件，直接配置默认文件</span></span><br><span class="line"></span><br><span class="line">vim /etc/nginx/sites-enabled/default</span><br></pre></td></tr></table></figure>

<p>nginx代理frps配置文件参考</p>
<p>可配置SSL开启https</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	listen 443 ssl;</span><br><span class="line">	#对应你的域名</span><br><span class="line">	server_name xxx.xxx.cn;</span><br><span class="line">	# https 域名证书相关配置</span><br><span class="line">	# ssl证书存储路径，根据个人存储路径设置，我的被存在了 /etc/nginx/ssl/ 文件夹下面</span><br><span class="line">	ssl_certificate /etc/nginx/ssl/xxx.mstzf.cn.pem;</span><br><span class="line">	ssl_certificate_key /etc/nginx/ssl/xxx.mstzf.cn.key;</span><br><span class="line">	ssl_session_timeout 5m;</span><br><span class="line">	ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">	ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class="line">	ssl_prefer_server_ciphers on;</span><br><span class="line">	location / &#123;</span><br><span class="line">		proxy_pass  http://127.0.0.1:8090;  # 映射的frp服务端frps.ini的 vhost_http_port端口</span><br><span class="line">		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">		proxy_set_header Host $http_host;</span><br><span class="line">		proxy_set_header X-NginX-Proxy true;</span><br><span class="line">		proxy_http_version 1.1;</span><br><span class="line">		proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">		proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">		proxy_max_temp_file_size 0;</span><br><span class="line">		proxy_redirect off;</span><br><span class="line">		proxy_read_timeout 240s;</span><br><span class="line">		client_max_body_size 0;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启nginx服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h3><ol>
<li><p>编辑frpc.ini文件</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="comment"># 远程服务器地址</span></span><br><span class="line"><span class="comment"># 替换为自己的域名</span></span><br><span class="line"><span class="attr">server_addr</span> = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="comment"># 远程服务器监听端口</span></span><br><span class="line"><span class="comment"># 和服务端 bind_port 相同</span></span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="comment"># 连接密钥</span></span><br><span class="line"><span class="comment"># 必须和服务端配置相同</span></span><br><span class="line"><span class="attr">token</span> = aaaaaa</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置日志文件</span></span><br><span class="line"><span class="comment"># 日志级别：trace, debug, info, warn, error</span></span><br><span class="line"><span class="comment"># 日志保存路径根据需求修改</span></span><br><span class="line"><span class="attr">log_file</span> = /home/zh/frp/log/.log</span><br><span class="line"><span class="attr">log_level</span> = error</span><br><span class="line"><span class="attr">log_max_days</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 客户端管理配置</span></span><br><span class="line"><span class="attr">admin_addr</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">admin_port</span> = <span class="number">7500</span></span><br><span class="line"><span class="attr">admin_user</span> = Mango</span><br><span class="line"><span class="attr">admin_pwd</span> = <span class="number">12345678</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 代理端口配置 模板</span></span><br><span class="line"><span class="comment"># [内容随意 如ssh]</span></span><br><span class="line"><span class="comment"># type = 连接类型 如 tcp</span></span><br><span class="line"><span class="comment"># local_ip = 127.0.0.1</span></span><br><span class="line"><span class="comment"># local_port = 22 本地需要代理的端口</span></span><br><span class="line"><span class="comment"># remote_port = 2222 将本地22端口代理为远程的2222端口</span></span><br><span class="line"><span class="comment"># 该配置下，可用远程 ip 的 2222 端口访问到本地的 22 端口服务</span></span><br><span class="line"></span><br><span class="line"><span class="section">[ssh]</span></span><br><span class="line"><span class="attr">type</span> = tcp</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">22</span></span><br><span class="line"><span class="attr">remote_port</span> = <span class="number">2222</span></span><br><span class="line">			</span><br><span class="line"><span class="section">[rdp]</span></span><br><span class="line"><span class="attr">type</span>=tcp</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span>=<span class="number">3389</span></span><br><span class="line"><span class="attr">remote_port</span>=<span class="number">3389</span></span><br><span class="line">			</span><br><span class="line"><span class="section">[nx]</span></span><br><span class="line"><span class="attr">type</span>=tcp</span><br><span class="line"><span class="attr">local_ip</span>=<span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span>=<span class="number">4000</span></span><br><span class="line"><span class="attr">remote_port</span>=<span class="number">4000</span></span><br><span class="line">			</span><br><span class="line"><span class="section">[web]</span></span><br><span class="line"><span class="attr">type</span> = http</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">80</span></span><br><span class="line"><span class="comment">#subdomain = root</span></span><br><span class="line"><span class="comment"># 绑定的域名 和nginx配置下的 server_name 相同</span></span><br><span class="line"><span class="attr">custom_domains</span> = xxx.mstzf.cn</span><br></pre></td></tr></table></figure>
</li>
<li><p>为frpc配置systemd守护进程便于管理</p>
<p>编辑文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/systemd/system/frpc.service</span><br></pre></td></tr></table></figure>

<p>输入以下内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Frp Client Service</span><br><span class="line">After=network.target</span><br><span class="line">			</span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">User=root</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=5s</span><br><span class="line"># 根据frp所在位置设置</span><br><span class="line">ExecStart=/home/zh/frp/frpc -c /home/zh/frp/frpc.ini</span><br><span class="line">LimitNOFILE=1048576</span><br><span class="line">			</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>启动frpc并配置开机自启</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">systemctl start frpc</span><br><span class="line"></span><br><span class="line">systemctl enable frpc</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="使用第三方服务"><a href="#使用第三方服务" class="headerlink" title="使用第三方服务"></a>使用第三方服务</h2><p>我个人使用的是<code>Sakura Frp</code>，有能够满足基本需求的免费套餐，vip套餐也很划算，已经能够满足我的基本需求</p>
<a class="tag-Link" target="_blank" href="https://www.natfrp.com/">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/www.natfrp.com/.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">SakuraFrp</div>
            <div class="tag-link-sitename">SakuraFrp</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<ol>
<li><p>注册账号</p>
</li>
<li><p>完善个人信息</p>
<p>如果有建站需求想要使用国内站点，需要完成实名认证和有备案域名，否则只能使用国外的站点来搭建</p>
</li>
<li><p>在客户端安装frp软件</p>
<p>这一部分官网中已经介绍得十分的详细，这里只有几个关键命令，具体可到官网查看</p>
<a class="tag-Link" target="_blank" href="https://doc.natfrp.com/frpc/usage.html">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/doc.natfrp.com/frpc/usage.html.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">frpc 基本使用指南</div>
            <div class="tag-link-sitename">SakuraFrp 帮助文档</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p>确认系统架构</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">uname -m</span><br></pre></td></tr></table></figure>

<p>获取软件链接</p>
<a class="tag-Link" target="_blank" href="https://www.natfrp.com/tunnel/download">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/www.natfrp.com/tunnel/download.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">软件下载</div>
            <div class="tag-link-sitename">SakuraFrp</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p>安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/bin</span><br><span class="line"></span><br><span class="line">wget -O frpc &lt;下载地址&gt;</span><br><span class="line"></span><br><span class="line">chmod 755 frpc</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置守护进程（systemd）</p>
<p>具体操作可去指导文档查看</p>
<a class="tag-Link" target="_blank" href="https://doc.natfrp.com/frpc/service/systemd.html">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/doc.natfrp.com/frpc/service/systemd.html.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">Systemd配置frpc服务</div>
            <div class="tag-link-sitename">SakuraFrp帮助文档</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p>添加工作目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/local/etc/natfrp</span><br></pre></td></tr></table></figure>

<p>编辑配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/systemd/system/frpc@.service</span><br></pre></td></tr></table></figure>

<p>输入配置内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=SakuraFrp Service</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=idle</span><br><span class="line">#DynamicUser=yes</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=60s</span><br><span class="line">ExecStart=/usr/local/bin/frpc -f %i</span><br><span class="line">WorkingDirectory=/usr/local/etc/natfrp</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>重载systemd</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建隧道</p>
<p>对于远程访问网页的，需要选择可建站的节点；至于选择国内还是国外要先看自己的域名是否已经备过案，备案过的域名可以使用国内节点，国内节点在各方面都要优于国外。如果没有备案域名，就只能使用国外节点。</p>
<p><img src="https://pic.mstzf.cn/blog/202311141217877.png" alt="image-20231114121753361"></p>
<p><img src="https://pic.mstzf.cn/blog/202311141219419.png" alt="image-20231114121907030"></p>
<p>端口根据本地网页端口配置</p>
<p><strong>在绑定域名和自动HTTPS中一定要输入自己需要使用的域名</strong></p>
</li>
<li><p>配置DSN解析</p>
<p><img src="https://pic.mstzf.cn/blog/202311141222132.gif" alt="动画"></p>
<p>复制节点域名，到域名服务商处配置DNS解析，将自己的域名CNAME到复制的节点域名上</p>
<img src="https://pic.mstzf.cn/blog/202311141223059.png" alt="image-20231114122333951" style="zoom: 50%;" />

<ul>
<li>记录类型选择CNAME</li>
<li>记录值选择选择节点所绑定域名</li>
</ul>
</li>
<li><p>配置SSL证书</p>
<a class="tag-Link" target="_blank" href="https://doc.natfrp.com/frpc/ssl.html">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/doc.natfrp.com/frpc/ssl.html.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">配置frpc使用的SSL证书</div>
            <div class="tag-link-sitename">SakuraFrp帮助文档</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p><strong><code>从服务商下载域名SSL证书选择Nginx，将证书重命名为 将其中 扩展名为pem的直接将扩展名修改为crt 并只保留域名和扩展名 即 如 nextcloud.mstzf.cn.key 的形式</code></strong></p>
<p>将证书移动到之前配置的工作目录中 &#x2F;usr&#x2F;local&#x2F;etc&#x2F;natfrp</p>
</li>
<li><p>启动隧道</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl &lt;start|stop&gt; &lt;Unit名称&gt;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;Unit名称&gt; 即下图 -f 之后 红色框部分</span></span><br></pre></td></tr></table></figure>

<img src="https://pic.mstzf.cn/blog/202311141229509.png" alt="image-20231114122904937" style="zoom:67%;" /></li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
        <category>云盘</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>云盘</tag>
      </tags>
  </entry>
  <entry>
    <title>饥荒联机服务器搭建(本地、云服务器、双云服务器)</title>
    <url>/posts/DoNotStarveTogether_Server/</url>
    <content><![CDATA[<h2 id="前引"><a href="#前引" class="headerlink" title="前引"></a>前引</h2><p>饥荒联机是一个制作精良的“多人联机”生存游戏，游戏在可玩性上没得说，但是由于房主PC性能和网络等各种不确定性原因，导致联机体验特别糟糕。</p>
<p><img src="https://pic.mstzf.cn/blog/202301311709823.gif" alt="猎杀时刻"></p>
<p>对于联机卡顿的情况，可以通过搭建饥荒联机服务器来解决。</p>
<p>我会比较详细的介绍饥荒联机服务器搭建的过程，其中包括<strong>本地服务器搭建</strong>、<strong>云服务器搭建</strong>、<strong>通过两个服务器将地面和洞穴世界分开服务器搭建</strong></p>
<h2 id="KLEI服务器访问令牌"><a href="#KLEI服务器访问令牌" class="headerlink" title="KLEI服务器访问令牌"></a>KLEI服务器访问令牌</h2><p><strong>无论搭建什么类型的服务器此步骤都不能省略，获取到后可以暂时保存到记事本中，后面会用到</strong></p>
<ol>
<li><p>进入游戏</p>
<p>打开饥荒联机版，进入菜单界面</p>
<p><strong>点击账号</strong></p>
<p><img src="https://pic.mstzf.cn/blog/202301312129653.png" alt="image-20230131212932263"></p>
</li>
<li><p>找到饥荒服务器</p>
<p>在导航栏中选择 <strong>游戏</strong> ，找到饥荒联机版的图标，选择<strong>《饥荒：联机版》的游戏服务器</strong></p>
<p><img src="https://pic.mstzf.cn/blog/202301312133980.png" alt="image-20230131213355872"></p>
</li>
<li><p>添加服务器</p>
<p>名字可以随便取，取好名字之后就可以添加服务器</p>
<p><img src="https://pic.mstzf.cn/blog/202301312139242.png" alt="image-20230131213945834"></p>
</li>
<li><p>获取代码</p>
<p>其他的都不用配置，直接复制访问令牌就可以</p>
<p><img src="https://pic.mstzf.cn/blog/202301312142162.png" alt="image-20230131214244181"></p>
</li>
</ol>
<h2 id="创建新世界"><a href="#创建新世界" class="headerlink" title="创建新世界"></a>创建新世界</h2><p>根据自己的喜好创建一个新的饥荒世界，配置好人数，世界属性，以及添加需要的服务器模组之后就和平时玩一样创建一个新世界。</p>
<p><strong>在选人界面直接退出</strong></p>
<p><img src="https://pic.mstzf.cn/blog/202301312205881.png" alt="image-20230131220545275"></p>
<p>找到新世界存档，位置一般在<code>C:\Users\mstzf\Documents\Klei\DoNotStarveTogether</code>文件夹下面的那个数字文件夹里面存放着不同世界的文件夹。文件以<code>Cluster_1</code>来命名，找到新创建的世界文件夹点击进入。</p>
<p>在文件中添加新文件，命名为<code>cluster_token.txt</code>,一定要注意扩展名为**. txt**如果默认不显示扩展名的要注意可能会出错。打开   <code>cluster_token.txt</code> 将上一步获取的服务器访问令牌粘贴在里面保存退出。</p>
<p><img src="https://pic.mstzf.cn/blog/202301312244842.png" alt="image-20230131224430759"></p>
<p><strong>根据需求修改添加，其中必须要在默认的基础上加入 <code>cluster_tooken.txt</code>才可以搭建联机服务器</strong></p>
<ul>
<li>Cavers ：饥荒联机版洞穴世界配置文件。</li>
<li>Master ：饥荒联机版主世界配置文件。</li>
<li>adminlist.txt ：管理员名单，在文件中写入玩家的KLEI ID可以将玩家变为服务器管理员，拥有控制台输入命令和踢人的权限。</li>
<li>blocklist.txt ：黑名单，加入KLEI ID的玩家无法加入游戏。</li>
<li>cluster.ini ：饥荒联机版配置文件，可以设置人数和世界模式等，可根据需要修改。</li>
<li>whitelist.txt ：服务器白名单，可写入玩家KLEI ID加入白名单，服务器会空出白名单人数的可加入人数。如果服务器可以有人，白名单中有一人，那么如果白名单中的人不在世界中的话，实际可加入的人数就只有5人。</li>
</ul>
<p><strong>做完这些，这个游戏存档就可以被做为饥荒的联机服务器存档了</strong></p>
<h2 id="饥荒本地联机服务器搭建"><a href="#饥荒本地联机服务器搭建" class="headerlink" title="饥荒本地联机服务器搭建"></a>饥荒本地联机服务器搭建</h2><ol>
<li><p>复制存档</p>
<p>将之前配置的游戏存档复制到他的上一级<code>C:\Users\mstzf\Documents\Klei\DoNotStarveTogether</code>中</p>
</li>
<li><p>下载饥荒联机工具</p>
<p>打开Steam游戏库，将游戏软件那个下拉箭头中，将工具也勾上</p>
<p><img src="https://pic.mstzf.cn/blog/202301312241765.png" alt="image-20230131224118410"></p>
<p>在目录中找到<code>Don&#39;t Starve Together Dedicated Server</code>,并下载安装</p>
<p><img src="https://pic.mstzf.cn/blog/202301312246103.png" alt="image-20230131224631734"></p>
</li>
<li><p>编辑启动文件</p>
<p>通过Steam直接打开服务器本地文件（也可以通过文件夹打开，路径为：Steam安装位置\steamapps\common\Don’t Starve Together Dedicated Server</p>
<p><img src="https://pic.mstzf.cn/blog/202301312301519.png" alt="image-20230131230145959"></p>
<p>找到 <code>bin/scripts/launch_preconfigured_servers.bat</code> 文件</p>
<p>修改<code>launch_preconfigured_servers.bat</code>文件内容为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@ECHO OFF</span><br><span class="line"></span><br><span class="line">set SteamAppId=322330</span><br><span class="line">set SteamGameId=322330</span><br><span class="line"></span><br><span class="line">cd ..</span><br><span class="line">start &quot;Don&#x27;t Starve Together Overworld&quot; /D &quot;%~dp0..&quot; &quot;%~dp0..\dontstarve_dedicated_server_nullrenderer.exe&quot; -cluster 改为新建世界存档名 -console -shard Master -console</span><br><span class="line">start &quot;Don&#x27;t Starve Together Caves&quot;     /D &quot;%~dp0..&quot; &quot;%~dp0..\dontstarve_dedicated_server_nullrenderer.exe&quot; -cluster 改为新建世界存档名  -console -shard Caves -console</span><br></pre></td></tr></table></figure>

<p><strong>如果你的服务器不需要任何服务器mod，那么可以直接点击<code>launch_preconfigured_servers.bat</code>文件启动服务器</strong></p>
</li>
<li><p>添加mod</p>
<p><strong>对于本地搭建服务器的mod，可以直接复制原本饥荒的mod文件夹中的mod文件到饥荒服务器文件夹中的mod文件夹中</strong></p>
<p>找饥荒联机版文件的方法和之前一样,这里就不在赘述</p>
<p><img src="https://pic.mstzf.cn/blog/202301312335285.png" alt="image-20230131233553886"></p>
<p>另一种方法时编辑mod文件夹下面的<code>dedicated_server_mods_setup.lua</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ServerModSetup(&quot;350811795&quot;) --数字为mod的id号</span><br><span class="line">ServerModCollectionSetup(&quot;379114180&quot;)  --数字为合计的id号</span><br></pre></td></tr></table></figure>



<p><strong>对于怎么获取mod和合集的id，可以在Steam的创意工坊中，在mod或者合集订阅页面复制网页URL，在获取的网址中的数字就是mod或者合集的id号</strong></p>
</li>
</ol>
<h2 id="云服务器搭建"><a href="#云服务器搭建" class="headerlink" title="云服务器搭建"></a>云服务器搭建</h2><p>饥荒联机云服务器相比与本地，有更好的网络连接条件，我本人在用一个2核2G的云服务器，短期档10人左右基本不卡，长期档6人以内也可以支持。</p>
<p>对于服务器的话，如果是学生，可以在阿里云进行学生认证，有着不错的折扣。</p>
<a class="tag-Link" target="_blank" href="https://www.aliyun.com/daily-act/ecs/activity_share?userCode=6vfvkhtz">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/www.aliyun.com/daily-act/ecs/activity_share?userCode=6vfvkhtz.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">阿里云学生优惠链接</div>
            <div class="tag-link-sitename">阿里云</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p>我的环境是<code>Ubuntu 20.04.5 LTS</code></p>
<ol>
<li><p>安装依赖环境</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">更新系统</span><br><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br></pre></td></tr></table></figure>

<p>安装依赖环境</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install lib32gcc1 libstdc++6 libgcc1 libcurl4-gnutls-dev -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建Steam安装目录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir ~/Steam</span><br><span class="line">cd Steam</span><br></pre></td></tr></table></figure>
</li>
<li><p>下载SteamCMD安装软件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz</span><br></pre></td></tr></table></figure>

<p>等待下载完成</p>
</li>
<li><p>对软件解压缩</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -zxvf steamcmd_linux.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行SteamCMD</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./steamcmd.sh</span><br></pre></td></tr></table></figure>

<p>当看到Steam&gt;</p>
<p>就说明安装配置已经成功</p>
<p>最有可能出现问题的就是在安装依赖的时候，多根据报错检查</p>
<p><img src="https://pic.mstzf.cn/blog/202302011728118.png" alt="image-20230201172759557"></p>
</li>
<li><p>指定游戏安装路径</p>
<p>我喜欢装在Steam文件夹下，可以根据自己喜好修改</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">force_install_dir /root/Steam/DSTServer</span><br></pre></td></tr></table></figure>
</li>
<li><p>登录Steam下载饥荒服务器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">login anonymous</span><br><span class="line">app_update 343050 validate</span><br></pre></td></tr></table></figure>

<p>等待游戏下载完成</p>
<p><img src="https://pic.mstzf.cn/blog/202302011738680.png" alt="image-20230201173810519"></p>
<p>完成后可以使用Ctrl + C 或者输入quit 退出SteamCMD</p>
</li>
<li><p>编辑启动脚本</p>
<p>可以通过直接运行文件来启动服务器</p>
<p><code>./root/Steam/DSTServer/bin/dontstarve_dedicated_server_nullrenderer</code></p>
<p>但是这样不方便管理</p>
<p><strong>在启动时如果出现报错：</strong></p>
<p>error while loading shared libraries: libcurl-gnutls.so.4: cannot open shared object file: No such file or directory</p>
<p>或者</p>
<p>error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory</p>
<p>这里是个大坑。是由于缺少对应的库，开启i386支持再去安装对应的库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">开启i386支持</span><br><span class="line">sudo dpkg --add-architecture i386</span><br><span class="line"></span><br><span class="line">更新软件库</span><br><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br><span class="line"></span><br><span class="line">安装缺少的库</span><br><span class="line">sudo apt install libcurl4-gnutls-dev:i386</span><br><span class="line">sudo apt install libstdc++6:i386</span><br></pre></td></tr></table></figure>



<p>启动脚本可以被放在任何位置，我习惯放在root下自建的bash文件下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir /root/bash</span><br><span class="line">cd /root/bash</span><br><span class="line">vim startDST.sh</span><br></pre></td></tr></table></figure>

<p>没有vim的可以用：sudo apt install vim -y 安装</p>
<p>启动脚本：</p>
<ul>
<li>steamcmd_dir为steamcmd.sh路径</li>
<li>install_dir 为游戏安装路径</li>
<li>cluster_name为存档名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">steamcmd_dir=&quot;/root/Steam&quot;</span><br><span class="line">install_dir=&quot;/root/Steam/DSTServer&quot;</span><br><span class="line">cluster_name=&quot;Cluster_1&quot;</span><br><span class="line">dontstarve_dir=&quot;/root/.klei/DoNotStarveTogether&quot;</span><br><span class="line"></span><br><span class="line">function fail()</span><br><span class="line">&#123;</span><br><span class="line">        echo Error: &quot;$@&quot; &gt;&amp;2</span><br><span class="line">        exit 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function check_for_file()</span><br><span class="line">&#123;</span><br><span class="line">    if [ ! -e &quot;$1&quot; ]; then</span><br><span class="line">            fail &quot;Missing file: $1&quot;</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cd &quot;$steamcmd_dir&quot; || fail &quot;Missing $steamcmd_dir directory!&quot;</span><br><span class="line"></span><br><span class="line">check_for_file &quot;steamcmd.sh&quot;</span><br><span class="line">check_for_file &quot;$dontstarve_dir/$cluster_name/cluster.ini&quot;</span><br><span class="line">check_for_file &quot;$dontstarve_dir/$cluster_name/cluster_token.txt&quot;</span><br><span class="line">check_for_file &quot;$dontstarve_dir/$cluster_name/Master/server.ini&quot;</span><br><span class="line">check_for_file &quot;$dontstarve_dir/$cluster_name/Caves/server.ini&quot;</span><br><span class="line">check_for_file &quot;$install_dir/bin&quot;</span><br><span class="line"></span><br><span class="line">cd &quot;$install_dir/bin&quot; || fail</span><br><span class="line"></span><br><span class="line">run_shared=(./dontstarve_dedicated_server_nullrenderer)</span><br><span class="line">run_shared+=(-console)</span><br><span class="line">run_shared+=(-cluster &quot;$cluster_name&quot;)</span><br><span class="line">run_shared+=(-monitor_parent_process $$)</span><br><span class="line">run_shared+=(-shard)</span><br><span class="line"></span><br><span class="line">&quot;$&#123;run_shared[@]&#125;&quot; Caves | sed &#x27;s/^/Caves: /&#x27; &amp;</span><br><span class="line">&quot;$&#123;run_shared[@]&#125;&quot; Master | sed &#x27;s/^/Master: /&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>给脚本文件可执行权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo chmod u+x /root/bash/startDST.sh</span><br></pre></td></tr></table></figure>

<p>执行脚本用 ：<code>./root/bash/startDST.sh</code></p>
</li>
<li><p>添加mod</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /root/Steam/DSTserver/mods/dedicated_server_mods_setup.lua</span><br></pre></td></tr></table></figure>

<p>编辑文件内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ServerModCollectionSetup(&quot;2606822598&quot;) </span><br><span class="line">-- 括号内数字替换为自己需要订阅的合集id</span><br><span class="line">ServerModSetup(&quot;1505270912&quot;)</span><br><span class="line">-- 括号内数字替换为自己需要订阅的mod的id</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.mstzf.cn/blog/202302011838697.png" alt="image-20230201183857430"></p>
</li>
<li><p>上传世界存档文件夹</p>
<p>上传服务器的方式有很多</p>
<p>软件方式可以使用FileZilla</p>
<a class="tag-Link" target="_blank" href="FileZilla">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/FileZilla.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title"></div>
            <div class="tag-link-sitename">FileZilla中文网 - 免费开源的FTP解决方案</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<p>上传到服务器后将文件夹保存到：<code>/root/.klei/DoNotStarveTogether/</code>下面，并修改启动脚本中**<code>cluster_name</code>**的值</p>
<p>找不到文件夹的可以先<code>./root/Steam/DSTServer/bin/dontstarve_dedicated_server_nullrenderer</code>运行一下</p>
<p><strong>完成后就可以运行启动脚本，启动饥荒联机服务器</strong></p>
</li>
<li><p>后台运行</p>
<p>推荐使用screen</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">下载</span><br><span class="line">sudo apt install screen -y</span><br><span class="line">启动</span><br><span class="line">screen -S DST</span><br><span class="line">关闭</span><br><span class="line">Ctrl+A+D</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="双服务器分开地面和洞穴"><a href="#双服务器分开地面和洞穴" class="headerlink" title="双服务器分开地面和洞穴"></a>双服务器分开地面和洞穴</h2><p>要带一些大型模组的多人长期档，一个性能低的服务器可能无法满足，此时如果有多个服务器可以采用不同服务器跑不同部分的办法实现。</p>
<p>要使用这一方法，需要在每个服务器都安装饥荒服务器环境，并且都要上传饥荒游戏存档。</p>
<p>主要要编辑洞穴服务器的cluster.ini文件</p>
<p><img src="https://pic.mstzf.cn/blog/202302020215663.png" alt="image-20230202021547548"></p>
<p>对于启动文件，只需要将最后的两部分根据需要注释掉就可以了</p>
<p>如果是主世界的启动程序就注释带有Caves的那一行，如果是洞穴就注释带有Master的那一行，然后要保证主世界先运行起来再启动洞穴</p>
<p><img src="https://pic.mstzf.cn/blog/202302020219461.png" alt="image-20230202021920313"></p>
]]></content>
      <categories>
        <category>娱乐</category>
        <category>饥荒服务器</category>
      </categories>
      <tags>
        <tag>娱乐</tag>
        <tag>饥荒服务器</tag>
      </tags>
  </entry>
  <entry>
    <title>饥荒联机版控制台代码大全</title>
    <url>/posts/DoNotStarveTogether/</url>
    <content><![CDATA[<div class="note info simple"><p>本文章为饥荒进阶控制台代码，其他更高级的控制代码请参考饥荒联机版控制台物品代码大全</p>
</div>

<a class="tag-Link" target="_blank" href="https://blog.teohzy.com/posts/DoNotStarveTogether_article/index.html">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.teohzy.com/posts/DoNotStarveTogether_article/index.html.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">饥荒联机版控制台代码物品大全</div>
            <div class="tag-link-sitename">TeohZY</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<div class="note info simple"><p>文中大多数内容都并非原创，只是做了简单的整合，方便本人查看</p>
</div>

<a class="tag-Link" target="_blank" href="https://dontstarve.fandom.com/zh/wiki/Don%27t_Starve_%E4%B8%AD%E6%96%87%E7%B6%AD%E5%9F%BA">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/dontstarve.fandom.com/zh/wiki/Don%27t_Starve_%E4%B8%AD%E6%96%87%E7%B6%AD%E5%9F%BA.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">Don't Starve 中文維基</div>
            <div class="tag-link-sitename">饥荒维基</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<h2 id="对玩家"><a href="#对玩家" class="headerlink" title="对玩家"></a>对玩家</h2><p><strong>创造模式：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ThePlayer.components.builder:GiveAllRecipes()</span><br></pre></td></tr></table></figure>

<p><strong>设置最大生命值：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ThePlayer.components.health:SetMaxHealth()</span><br></pre></td></tr></table></figure>

<p>括号内设置生命数值</p>
<p><strong>设置最大理智值：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ThePlayer.components.sanity:SetMax()</span><br></pre></td></tr></table></figure>

<p>括号内设置理智数值</p>
<p><strong>设置最饥饿值：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ThePlayer.components.hunger:SetMax(value)</span><br></pre></td></tr></table></figure>

<p>括号内设置最大饥饿值</p>
<p><strong>伤害倍数：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ThePlayer.components.combat.damagemultiplier = 数值</span><br></pre></td></tr></table></figure>



<p><strong>设置生命值：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_sethealth()</span><br></pre></td></tr></table></figure>

<p>百分比血量，括号内值为0%到100%，可以使用对应分数</p>
<p><strong>设置理智值：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_setsanity()</span><br></pre></td></tr></table></figure>

<p>百分比血量，括号内值为0%到100%，可以使用对应分数</p>
<p><strong>设置饱食度：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_sethunger()</span><br></pre></td></tr></table></figure>

<p>百分比血量，括号内值为0%到100%，可以使用对应分数</p>
<p><strong>设置温度：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_settemperature()</span><br></pre></td></tr></table></figure>

<p>括号内取值为：-20到85</p>
<p><strong>设置湿度：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_setmoisture()</span><br></pre></td></tr></table></figure>

<p>百分比，括号内值为0%到100%，可以使用对应分数</p>
<p><strong>上帝模式：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_godmode()</span><br></pre></td></tr></table></figure>

<p><strong>超级上帝模式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_supergodmode()</span><br></pre></td></tr></table></figure>

<p><strong>修改速度：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_speedmult()</span><br></pre></td></tr></table></figure>

<p>在括号内设置速度倍数</p>
<h3 id="对其他玩家命令"><a href="#对其他玩家命令" class="headerlink" title="对其他玩家命令"></a>对其他玩家命令</h3><p><strong>列出玩家用户名和编号：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_listallplayers()</span><br></pre></td></tr></table></figure>

<p>在游戏中使用时可能由于显示原因，没有列出玩家列表</p>
<p>可在自建服务器中使用</p>
<p>玩家编号可通过Tab键最右边查看，有概率会不一样，但如果是自建服务器就只能这样使用</p>
<p><strong>对某一玩家使用命令：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AllPlayers[]</span><br></pre></td></tr></table></figure>

<p><code>[]</code>内使用玩家编号来选择玩家</p>
<p><strong>对所有玩家使用命令：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for k,v in pairs(AllPlayers) do command end</span><br></pre></td></tr></table></figure>

<p>只修改command，用其他命令代替command，使用 “v” 代替命令中的 AllPlayers[number]。例如， “for k,v in pairs(AllPlayers) do c_move(v) end” 将会把所有玩家都移动到鼠标所指的位置。</p>
<p><strong>移动一个玩家：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_move(AllPlayers[number])</span><br></pre></td></tr></table></figure>

<p>移动玩家到鼠标指定位置</p>
<p><strong>复活玩家：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AllPlayers[number]:PushEvent(&#x27;death&#x27;)</span><br></pre></td></tr></table></figure>

<p><strong>传送至玩家：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_goto(AllPlayers[number])</span><br></pre></td></tr></table></figure>

<p>number为玩家编号</p>
<p><strong>丢弃玩家物品栏物品：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AllPlayers[number].components.inventory:DropEverything()</span><br></pre></td></tr></table></figure>

<p><strong>玩家重选角色：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_despawn(AllPlayers[number])</span><br></pre></td></tr></table></figure>

<p>number为玩家编号</p>
<h2 id="服务器指令"><a href="#服务器指令" class="headerlink" title="服务器指令"></a>服务器指令</h2><p><strong>踢出或封禁玩家：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheNet:Kick(userid)</span><br><span class="line">TheNet:Ban(userid)</span><br></pre></td></tr></table></figure>

<p>userid可通过Tab查看，或者使用玩家编号<code>AllPlayers[#].userid</code></p>
<p><strong>临时封禁：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheNet:BanForTime(userid,time_in_seconds)</span><br></pre></td></tr></table></figure>

<p>userid可通过Tab查看，或者使用玩家编号<code>AllPlayers[#].userid</code></p>
<p>time_in_seconds为要封禁的秒数</p>
<p><strong>连接服务器：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_connect(&quot;IP address&quot;, port, &quot;password&quot;)</span><br></pre></td></tr></table></figure>

<p>如果无法进行常规的连接，可以使用该命令直接连接一个IP地址。默认情况下，端口是10999。如果服务器没有密码的话，你可以不填密码参数：c_connect(“10.0.0.8”, 10999)</p>
<p><strong>重新加载世界:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_reset() </span><br></pre></td></tr></table></figure>

<p>不保存游戏并重载世界（也就是重载到上一个储存点）。如果你是一个客户端的话，该命令可能会造成你的游戏崩溃（除非你用远程命令模式发送该命令）。</p>
<p><strong>重新生成世界：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_regenerateworld()</span><br></pre></td></tr></table></figure>

<p>重生生成世界。</p>
<p><strong>重新生成世界碎片：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_regenerateshard()</span><br></pre></td></tr></table></figure>

<p>重新生成世界碎片。</p>
<p><strong>保存：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_save()</span><br></pre></td></tr></table></figure>

<p>强制服务器立即保存。（服务器通常在夜晚结束的时候自动保存）</p>
<ul>
<li><strong>关闭服务器：</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_shutdown( true / false)</span><br></pre></td></tr></table></figure>

<p><em>true 会保存游戏，false 不会保存游戏。 c_shutdown() 和 c_shutdown(true) 是一样的。</em></p>
<p><strong>回档：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_rollback(count)</span><br></pre></td></tr></table></figure>

<p>回档服务器一定次数。 c_rollback() 会回档一次，c_rollback(3) 会回档三次。</p>
<p><strong>启用&#x2F;禁用新玩家加入：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheNet:SetAllowIncomingConnections( true / false )</span><br></pre></td></tr></table></figure>

<p><em>默认情况下设置为 true （新玩家可以加入）。设置为 false 将禁止玩家进入。</em></p>
<p><strong>发送一个服务器公告：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_announce(&quot;announcement&quot;)</span><br></pre></td></tr></table></figure>

<p>可以发送一个公告给玩家，例如即将关闭 &#x2F; 重启服务器，让玩家知道即将断线。</p>
<h2 id="对世界"><a href="#对世界" class="headerlink" title="对世界"></a>对世界</h2><p><strong>传送：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_gonext(&quot;prefab&quot;)</span><br></pre></td></tr></table></figure>

<p>可以将玩家传送到世界存在的实体处，如果存在多处，执行后依次传送</p>
<p><strong>删除实体：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ConsoleWorldEntityUnderMouse():Remove()</span><br><span class="line">c_select():Remove()</span><br></pre></td></tr></table></figure>

<p>输入该命令后，将会删除你鼠标下的物品。在专用服务器上使用第二个命令，因为第一个不能在专用服务器上使用。</p>
<p><strong>显示地图：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">minimap = TheSim:FindFirstEntityWithTag(&quot;mini­map&quot;)</span><br><span class="line">TheWorld.minimap.MiniMap:ShowArea (0,0,0,10000)</span><br></pre></td></tr></table></figure>

<p>这是一个本地命令，且客户端不可用。</p>
<p><strong>跳过一天</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_nextcycle&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>跳过时间</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld.net.components.clock:OnUpdate(16*30*x) </span><br></pre></td></tr></table></figure>

<p>跳过 x 天。将 x 修改为所要跳的天数（例如，16*30*4.5 为跳过4.5天）<strong>警告</strong>：<strong>数值太大可能会冻结游戏。（取决于电脑的运算速度</strong>）</p>
<p><strong>跳过时间单元并更新</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">LongUpdate(X)</span><br></pre></td></tr></table></figure>

<p><em>对世界对象执行 “LongUpdate” 事件并跳过X个时间单元</em></p>
<p><strong>注：</strong>每一个时间部分有30个时间单元。想要跳过一天可以使用 LongUpdate(480) 或者用乘法计算，例如 LongUpdate(X<em>16</em>30) 或者 LongUpdate(X*TUNING.TOTAL_DAY_TIME) X 为想要跳过的天数</p>
<p><em><strong>译者注：</strong></em>每天有16个小部分，每部分有30个时间单元，每单元为现实中的一秒，所以一天为现实中的8分钟。（详见日夜周期 ）</p>
<p><strong>跳过时钟阶段</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_nextphase&quot;)</span><br></pre></td></tr></table></figure>

<p>跳过当前时钟阶段。</p>
<p><strong>设置时钟阶段</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_setclocksegs&quot;, &#123;day=x,dusk=y,night=z&#125;) </span><br></pre></td></tr></table></figure>

<p>设置每个时钟阶段的时间部分的数量。如果 x + y + z 加起来超过 16 将会产生错误。注意这样的修改第二天会复原。<br>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_setclocksegs&quot;, &#123;day=14,dusk=1,night=1&#125;)</span><br></pre></td></tr></table></figure>

<p>非常长的白天，非常短的黄昏和夜晚（只给黄昏一个时间部分和夜晚一个时间部分）</p>
<p><strong>设置季节的时钟阶段</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_setseasonclocksegs&quot;, &#123;summer=&#123;day=sx,dusk=sy,night=sz&#125;, winter=&#123;day=wx,dusk=wy,night=wz&#125;&#125;) </span><br></pre></td></tr></table></figure>

<p>为指定季节设置每个时钟阶段的时间部分的数量。如果 x + y + z 加起来超过 16 将会生错误。不像设置时钟阶段一样，该设置是永久性的。<br>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_setseasonclocksegs&quot;, &#123;summer=&#123;day=14,dusk=1,night=1&#125;, winter=&#123;day=13,dusk=1,night=2&#125;&#125;)</span><br></pre></td></tr></table></figure>

<p>非常长的白天，非常短的黄昏和夜晚（夏天：只给黄昏一个时间部分和夜晚一个时间部分，冬天：只给黄昏一个时间部分和夜晚两个个时间部分）</p>
<p><strong>设置季节长度</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_setseasonlength&quot;, &#123;season=&quot;summer&quot;, length=15&#125;)</span><br></pre></td></tr></table></figure>

<p>设置季节的长度。</p>
<p><strong>进入夏季</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_setseason&quot;, &quot;summer&quot;)</span><br></pre></td></tr></table></figure>

<p>进入夏季</p>
<p><strong>进入冬季</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_setseason&quot;, &quot;winter&quot;)</span><br></pre></td></tr></table></figure>

<p><em>进入冬季</em></p>
<p>当添加了巨人的统治DLC，会有额外的命令TheWorld:PushEvent(“ms_setseason”, “spring”) 和 TheWorld:PushEvent(“ms_setseason”, “autumn”)</p>
<p><strong>开始下雨</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_forceprecipitation&quot;)</span><br></pre></td></tr></table></figure>

<p>开始下雨</p>
<p><strong>停止下雨</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_forceprecipitation&quot;, false) </span><br></pre></td></tr></table></figure>

<p>停止下雨。这包括青蛙雨。</p>
<p><strong>生成闪电</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TheWorld:PushEvent(&quot;ms_sendlightningstrike&quot;, ConsoleWorldPosition())</span><br></pre></td></tr></table></figure>

<p>闪电击中玩家，如果靠近避雷针的话，则击中避雷针。</p>
<p><strong>陨星撞击</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_spawn(&quot;shadowmeteor&quot;, 1)</span><br></pre></td></tr></table></figure>

<p>陨星撞击在鼠标的位置。随机生成不同类型的岩石。</p>
<p><strong>激活所有的事件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for k, v in pairs(SPECIAL_EVENTS) do if v ~= SPECIAL_EVENTS.NONE then local tech = TECH[k] if tech ~= nil then tech.SCIENCE = 0 end end end function IsSpecialEventActive(event) return true end</span><br></pre></td></tr></table></figure>

<p>同一事件内激活所有事件 。</p>
<p><strong>测量距离</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print(math.sqrt(ThePlayer:GetDistanceSqToInst(ConsoleWorldEntityUnderMouse()))) </span><br></pre></td></tr></table></figure>

<p>在控制台日志中输出玩家和鼠标指着的物体的距离（默认情况下按Ctrl + L显示控制台日志）。</p>
<h2 id="交易小店宠物属性"><a href="#交易小店宠物属性" class="headerlink" title="交易小店宠物属性"></a>交易小店宠物属性</h2><h3 id="修改宠物品种"><a href="#修改宠物品种" class="headerlink" title="修改宠物品种"></a>修改宠物品种</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Profile:SetKitBuild(&quot;宠物品种&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>宠物小猫品种如下</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">森林浣小猫：kitcoon_forest_build</span><br><span class="line">热带草原浣小猫：kitcoon_savanna_build</span><br><span class="line">桦树林浣小猫：kitcoon_deciduous_build</span><br><span class="line">沼泽浣小猫：kitcoon_marsh_build</span><br><span class="line">草地浣小猫：kitcoon_grass_build</span><br><span class="line">岩石浣小猫：kitcoon_rocky_build</span><br><span class="line">沙漠浣小猫：kitcoon_desert_build</span><br><span class="line">月岛浣小猫：kitcoon_moon_build</span><br><span class="line">虎年浣小猫：kitcoon_yot_build</span><br></pre></td></tr></table></figure>

<h3 id="修改名字"><a href="#修改名字" class="headerlink" title="修改名字"></a>修改名字</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Profile:SetKitName(&quot;新名字&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="修改地上便便数量"><a href="#修改地上便便数量" class="headerlink" title="修改地上便便数量"></a>修改地上便便数量</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Profile:SetKitPoops(M)</span><br></pre></td></tr></table></figure>

<p>M为需要修改的便便数量</p>
<h3 id="修改宠物体型"><a href="#修改宠物体型" class="headerlink" title="修改宠物体型"></a>修改宠物体型</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Profile:SetKitSize(N)</span><br></pre></td></tr></table></figure>

<p><strong>这里的N值不要设置得太大，猫猫最小的时候为0.3倍，最大为1.2倍</strong></p>
<h3 id="养猫小技巧"><a href="#养猫小技巧" class="headerlink" title="养猫小技巧"></a>养猫小技巧</h3><p>猫猫每天都要喂两次食物，摸两次；在离开前要把地上的便便清理干净，要不然猫猫会不开心</p>
<p>如果长时间不能登陆游戏，要把猫猫放到窝里冬眠</p>
<p><strong>希望大家的猫猫都不要感受到被冷落而离你而去</strong></p>
]]></content>
      <categories>
        <category>娱乐</category>
        <category>饥荒</category>
      </categories>
      <tags>
        <tag>娱乐</tag>
        <tag>饥荒</tag>
      </tags>
  </entry>
  <entry>
    <title>饥荒联机版控制台代码物品大全</title>
    <url>/posts/DoNotStarveTogether_article/</url>
    <content><![CDATA[<div class="note info simple"><p>本文章为饥荒相关物品代码，其他更高级的控制代码请参考饥荒联机版控制台代码大全</p>
</div>

<a class="tag-Link" target="_blank" href="https://blog.teohzy.com/posts/DoNotStarveTogether/index.html">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.teohzy.com/posts/DoNotStarveTogether/index.html.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">饥荒联机版控制台代码大全</div>
            <div class="tag-link-sitename">TeohZY</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<div class="note info simple"><p>文中大多数内容都并非原创，只是做了简单的整合，方便本人查看</p>
</div>

<a class="tag-Link" target="_blank" href="https://dontstarve.fandom.com/zh/wiki/Don%27t_Starve_%E4%B8%AD%E6%96%87%E7%B6%AD%E5%9F%BA">
    <div class="tag-link-tips">引用站外地址,不保证站点的可用性和安全性</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/dontstarve.fandom.com/zh/wiki/Don%27t_Starve_%E4%B8%AD%E6%96%87%E7%B6%AD%E5%9F%BA.png);"></div>
        <div class="tag-link-right">
            <div class="tag-link-title">Don't Starve 中文維基</div>
            <div class="tag-link-sitename">饥荒维基</div>
        </div>
        <i class="fa-solid fa-angle-right"></i>
    </div>
    </a>

<h2 id="生成物品"><a href="#生成物品" class="headerlink" title="生成物品"></a>生成物品</h2><p><strong>生成可被存储物：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_give(&quot;物品名称&quot;,数量)</span><br></pre></td></tr></table></figure>

<p>生成物会存储在格子或背包中，如果已满则生成在地上</p>
<p><strong>生成物品：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c_spawn(&quot;物品名称&quot;,数量)</span><br></pre></td></tr></table></figure>

<p>生成在鼠标指向处</p>
<p><code>可生成物品名称如下，在浏览器中可用Ctrl+F查询</code></p>
<h3 id="BOSS"><a href="#BOSS" class="headerlink" title="BOSS"></a>BOSS</h3><details class="toggle" ><summary class="toggle-button" style="">BOSS</summary><div class="toggle-content"><p>　　蜘蛛女王：spiderqueen</p>
<p>　　树精守卫：leif</p>
<p>　　树精守卫（稀少）：leif_sparse</p>
<p>　　坚果精：birchnutdrake</p>
<p>　　桦树精：deciduoustree</p>
<p>　　远古守护者：minotaur</p>
<p>　　鹿角鹅：moose</p>
<p>　　鹿角鹅蛋：mooseegg</p>
<p>　　小鹅：mossling</p>
<p>　　龙蝇：dragonfly</p>
<p>　　熊獾：bearger</p>
<p>　　巨鹿：deerclops</p>
<p>　　巨型蜂巢：beequeenhivegrown</p>
<p>　　女王蜂：beequeen</p>
<p>　　雄蜂：beegurd</p>
<p>　　毒蕈（蘑菇蛤）：toadstool</p>
<p>　　毒蕈树菇：mushroomsprout</p>
<p>　　克劳斯：klaus</p>
<p>　　克劳斯包裹：klaus_sack</p>
<p>　　宝石鹿（蓝&#x2F;红）：deer_blue&#x2F;red　　</p>
<p>　　森林守护者：DebugSpawn”stalker_forest”</p>
<p>　　远古狩猎者：DebugSpawn”stalker”</p>
<p>　　远古影织者：DebugSpawn”stalker_atrium”</p>
</div></details>

<h3 id="水中木物品"><a href="#水中木物品" class="headerlink" title="水中木物品"></a>水中木物品</h3><details class="toggle" ><summary class="toggle-button" style="">水中木</summary><div class="toggle-content"><p>　　海黾：spider_water</p>
<p>　　海黾巢穴：oceanvine_cocoon</p>
<p>　　甜味鱼：oceanfish_medium_9_inv</p>
<p>　　草鳄鱼：grassgator</p>
<p>　　大树根：watertree_root</p>
<p>　　疙瘩树桩：oceantree_stump</p>
<p>　　矮小的疙瘩树：oceantree_short</p>
<p>　　中等的疙瘩树：oceantree_normal</p>
<p>　　高大的疙瘩树：oceantree_tall</p>
<p>　　被烧毁的疙瘩树：oceantree_burnt</p>
<p>　　高出平均值的树干：oceantree_pillar</p>
<p>　　大树干(母树)：watertree_pillar</p>
<p>　　疙瘩树果：oceantreenut</p>
<p>　　苔藓藤条：oceanvine</p>
<p>　　藤条：oceanvine_deco</p>
<p>　　无花果：fig</p>
<p>　　做熟的无花果：fig_cooked</p>
<p>　　无花果意面：figatoni</p>
<p>　　无花果烤串：figkabab</p>
<p>　　无花果蛙腿三明治：frognewton</p>
<p>　　无花果酿树干：koalefig_trunk</p>
<p>　　树果酱：treegrowthsolution</p>
</div></details>

<h3 id="材料"><a href="#材料" class="headerlink" title="材料"></a>材料</h3><details class="toggle" ><summary class="toggle-button" style="">材料</summary><div class="toggle-content"><p>　　割下的草：cutgrass</p>
<p>　　树枝：twigs</p>
<p>　　木头：log</p>
<p>　　木炭：charcoal</p>
<p>　　灰：ash</p>
<p>　　采集的芦苇：cutreeds</p>
<p>　　花瓣：petals</p>
<p>　　噩梦花瓣：petals_evil</p>
<p>　　活木头：livinglog</p>
<p>　　叶子：foliage</p>
<p>　　荧光果：lightbulb</p>
<p>　　发光浆果：wormlight</p>
<p>　　冰：ice</p>
<p>　　燧石：flint</p>
<p>　　硝石：nitre</p>
<p>　　岩石：rocks</p>
<p>　　大理石：marble</p>
<p>　　月之石：moonrocknugget</p>
<p>　　黄金：goldnugget</p>
<p>　　铥矿石：thulecite</p>
<p>　　铥矿石碎片：thulecite_pieces</p>
<p>　　红宝石：redgem</p>
<p>　　蓝宝石：bluegem</p>
<p>　　紫宝石：purplegem</p>
<p>　　绿宝石：greengem</p>
<p>　　橙宝石：orangegem</p>
<p>　　黄宝石：yellowgem</p>
<p>　　彩色宝石：opalpreciousgem</p>
<p>　　绳子：rope</p>
<p>　　木板：boards</p>
<p>　　石砖：cutstone</p>
<p>　　莎草纸：papyrus</p>
<p>　　噩梦燃料：nightmarefuel</p>
<p>　　蜂蜡：beeswax</p>
<p>　　蜡纸：waxpaper</p>
<p>　　电器元件：transistor</p>
<p>　　狗牙：houndstooth</p>
<p>　　蜘蛛丝：silk</p>
<p>　　蜘蛛腺体：spidergland</p>
<p>　　胡子：beardhair</p>
<p>　　牛毛：beefalowool</p>
<p>　　牛角：horn</p>
<p>　　便便：poop</p>
<p>　　蜂巢：honeycomb</p>
<p>　　蜂刺：stinger</p>
<p>　　猪皮：pigskin</p>
<p>　　兔人尾巴：manrabbit_tail</p>
<p>　　猫尾：coontail</p>
<p>　　海象牙：walrus_tusk</p>
<p>　　胡须：beardhair</p>
<p>　　烂鸡蛋：rottenegg</p>
<p>　　乌鸦羽毛：feather_crow</p>
<p>　　红雀羽毛：feather_robin</p>
<p>　　雪雀羽毛：feather_robin_winter</p>
<p>　　金丝雀羽毛：feather_canary</p>
<p>　　鸟粪：guano</p>
<p>　　触手皮：tentaclespots</p>
<p>　　粘滑含糊虫（黏糊虫粘液）：slurtleslime</p>
<p>　　破碎的背壳：slurtle_shellpieces</p>
<p>　　蚊子血袋：mosquitosack</p>
<p>　　缀食者皮：slurper_pelt</p>
<p>　　远古守护者角：minotaurhorn</p>
<p>　　掉落的羽毛：goose_feather</p>
<p>　　鳞片：dragon_scales</p>
<p>　　厚皮毛：bearger_fur</p>
<p>　　巨鹿眼球：deerclops_eyeball</p>
<p>　　毒蕈皮：shroom_skin</p>
<p>　　闪电羊角：lightninggoathorn</p>
<p>　　格罗门翅膀：glommerwings</p>
<p>　　格罗门花（花瞬间死亡）：glommerflower</p>
<p>　　格罗门燃料：glommerfuel</p>
<p>　　冷冻虫卵：lavae_cocoon</p>
<p>　　暗影之心：shadowheart</p>
<p>　　鹿茸：deer_antler</p>
<p>　　克劳斯钥匙：klaussackkey</p>
<p>　　齿轮：gears</p>
<p>　　骨片：boneshard</p>
</div></details>

<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><details class="toggle" ><summary class="toggle-button" style="">工具</summary><div class="toggle-content"><p>　　斧头：axe</p>
<p>　　金斧头：goldenaxe</p>
<p>　　露西斧：lucy</p>
<p>　　鹤嘴锄：pickaxe</p>
<p>　　黄金鹤嘴锄：goldenpickaxe</p>
<p>　　铁铲：shovel</p>
<p>　　黄金铁铲（讲真黄金做的还能叫铁铲）：goldenshovel</p>
<p>　　镐斧：multitool_axe_pickaxe</p>
<p>　　锤子：hammer</p>
<p>　　草叉：pitchfork</p>
<p>　　剃刀：razor</p>
<p>　　捕虫网：bugnet</p>
<p>　　鱼竿：fishingrod</p>
<p>　　陷阱：trap</p>
<p>　　鸟陷阱：birdtrap</p>
<p>　　南瓜灯：pumpkin_lantern</p>
<p>　　提灯：lantern</p>
<p>　　漂亮太阳伞：grass_umbrella</p>
<p>　　雨伞：umbrella</p>
<p>　　保温石：heatrock</p>
<p>　　水球：waterballoon</p>
<p>　　指南针：compass</p>
<p>　　空包裹：bundlewrap</p>
<p>　　彩纸：giftwrap</p>
<p>　　稻草卷：bedroll_straw</p>
<p>　　毛皮铺盖：bedroll_furry</p>
<p>　　鹅毛扇：featherfan</p>
<p>　　狗牙陷阱：trap_teeth</p>
<p>　　麦斯威尔的利齿陷阱：trap_teeth_maxwell</p>
<p>　　背包：backpack</p>
<p>　　猪皮包：piggyback</p>
<p>　　隔热包：icepack</p>
<p>　　坎普斯背包：krampus_sack</p>
<p>　　糖果袋：candybag</p>
<p>　　羽毛笔：featherpencil</p>
<p>　　便便蓝：fertilizer</p>
<p>　　取鞍器：saddlehorn</p>
<p>　　鞍：saddle_basic</p>
<p>　　浴血战鞍：saddle_war</p>
<p>　　闪亮之鞍：saddle_race</p>
<p>　　刷子：brush</p>
<p>　　舐盐器：saltlick</p>
<p>​		长矛：spear</p>
<p>　　瓦丝格雷斯矛：spear_wathgrithr</p>
<p>　　气球：balloon</p>
<p>　　火腿球棒：hambat</p>
<p>　　触手尖刺：tentaclespike</p>
<p>　　晨星：nightstick</p>
<p>　　三脚猫的教诲：whip</p>
<p>　　暗影剑：nightsword</p>
<p>　　蝙蝠斧棍：batbat</p>
<p>　　铥矿棒：ruins_bat</p>
<p>　　冰魔杖（蓝）：icestaff</p>
<p>　　火魔杖（红）：firestaff</p>
<p>　　传送魔杖（紫）：telestaff</p>
<p>　　懒惰的探索者（橙）：orangestaff</p>
<p>　　星星呼唤者（黄）：yellowstaff</p>
<p>　　毁灭权杖（绿）：greenstaff</p>
<p>　　魔杖（单机用来找零件那个）：diviningrod</p>
<p>　　呼月者权杖：opalstaff</p>
<p>　　回旋镖：boomerang</p>
<p>　　吹箭：blowdart_pipe</p>
<p>　　燃烧吹箭：blowdart_fire</p>
<p>　　麻醉吹箭：blowdart_sleep</p>
<p>　　电磁吹箭：blowdart_yellow</p>
<p>　　旋风：staff_tornado</p>
<p>　　排箫：panflute</p>
<p>　　独奏乐器:onemanband</p>
<p>　　火药：gunpowder</p>
<p>　　蜜蜂地雷：beemine</p>
<p>　　恒迪尤斯·舒提尤斯（眼睛炮塔）：eyeturret</p>
<p>　　可放置的眼睛炮塔：eyeturret_item</p>
<p>　    缝纫工具包（为了方便而分类）：sewing_kit</p>
<p>　　猪皮头盔：footballhat</p>
<p>　　瓦丝格雷斯帽：wathgrithrhat</p>
<p>　　女王冠：hivehat</p>
<p>　　背壳头盔：slurtlehat</p>
<p>　　远古王冠：ruinshat</p>
<p>　　矿工帽：minerhat</p>
<p>　　地鼠帽：molehat</p>
<p>　　蜘蛛帽：spiderhat</p>
<p>　　高礼帽：tophat</p>
<p>　　雨帽：rainhat</p>
<p>　　眼球伞：eyebrellahat</p>
<p>　　养蜂人的帽子：beehat</p>
<p>　　羽毛帽：featherhat</p>
<p>　　丛林帽：bushhat</p>
<p>　　贝雷帽：walrushat</p>
<p>　　冰块：icehat</p>
<p>　　西瓜帽：watermelonhat</p>
<p>　　猫帽：catcoonhat</p>
<p>　　绿蘑菇帽：green_mushroomhat</p>
<p>　　蓝蘑菇帽：blue_mushroomhat</p>
<p>　　红蘑菇帽：red_mushroomhat</p>
<p>　　草地盔甲：armorgrass</p>
<p>　　木盔甲：armorwood</p>
<p>　　大理石盔甲：armormarble</p>
<p>　　暗影盔甲：armor_sanity</p>
<p>　　鳞甲：armordragonfly</p>
<p>　　圆壳蛞蝓壳：armorsnurtleshell</p>
<p>　　远古盔甲：armorruins</p>
<p>　　小巧背心：sweatervest</p>
<p>　　花纹衬衫：hawaiianshirt</p>
<p>　　夏季背心：reflectivevest</p>
<p>　　夏日背心：trunkvest_summer</p>
<p>　　寒冬背心：trunkvest_winter</p>
<p>　　熊皮背心：beargervest</p>
<p>　　雨衣：raincoat</p>
<p>　　饥饿腰带：armorslurper</p>
<p>　　提神护符（红）：amulet</p>
<p>　　寒冰护符（蓝）：blueamulet</p>
<p>　　护符（紫）：purpleamulet</p>
<p>　　魔力之光（黄）：yellowamulet</p>
<p>　　懒惰的强盗（橙）：orangeamulet</p>
<p>　　建造护符（绿）：greenamulet</p>
<p>　　铥矿奖章：nightmare_timepiece</p>
<p>　　行走手杖：cane</p>
</div></details>

<h3 id="药物"><a href="#药物" class="headerlink" title="药物"></a>药物</h3><details class="toggle" ><summary class="toggle-button" style="">药物</summary><div class="toggle-content"><p>　　救赎之心：reviver</p>
<p>　　治疗药膏：healingsalve</p>
<p>　　蜜蜂药膏：bandage</p>
<p>　　AGV试验药（强心针）：lifeinjector</p>
<p>　　果冻豆：jellybean</p>
</div></details>

<h3 id="食物"><a href="#食物" class="headerlink" title="食物"></a>食物</h3><details class="toggle" ><summary class="toggle-button" style="">食物</summary><div class="toggle-content"><p>　　胡萝卜：carrot</p>
<p>　　烤胡萝卜:carrot_cooked</p>
<p>　　玉米：corn</p>
<p>　　爆米花：corn_cooked</p>
<p>　　南瓜：pumpkin</p>
<p>　　热南瓜：pumpkin_cooked</p>
<p>　　茄子：eggplant</p>
<p>　　烤茄子：eggplant_cooked</p>
<p>　　红蘑菇：red_cap</p>
<p>　　烤红蘑菇：red_cap_cooked</p>
<p>　　绿蘑菇：green_cap</p>
<p>　　烤绿蘑菇：green_cap_cooked</p>
<p>　　蓝蘑菇：blue_cap</p>
<p>　　烤蓝蘑菇：blue_cap_cooked</p>
<p>　　石榴：pomegranate</p>
<p>　　烤石榴：pomegranate_cooked</p>
<p>　　榴莲：durian</p>
<p>　　烤榴莲：durian_cooked</p>
<p>　　火龙果：dragonfruit</p>
<p>　　精致火龙果（烤）：dragonfruit_cooked</p>
<p>　　浆果：berries</p>
<p>　　烤浆果：berries_cooked</p>
<p>　　西瓜：watermelon</p>
<p>　　烤熟的西瓜：watermelon_cooked</p>
<p>　　仙人掌肉：cactus_meat</p>
<p>　　仙人掌花：cactus_flower</p>
<p>　　采集的苔藓：cutlichen</p>
<p>　　肉：meat</p>
<p>　　大熟肉：meat_cooked</p>
<p>　　大肉干：meat_dried</p>
<p>　　小肉块：smallmeat</p>
<p>　　熟肉块：cookedsmallmeat</p>
<p>　　鸡腿：drumstick</p>
<p>　　烤鸡腿：drumstick_cooked</p>
<p>　　青蛙腿：froglegs</p>
<p>　　熟蛙腿：froglegs_cooked</p>
<p>　　怪物肉：monstermeat</p>
<p>　　烤怪物肉：cookedmonstermeat</p>
<p>　　怪物肉干：monstermeat_dried</p>
<p>　　多叶的肉：plantmeat</p>
<p>　　煮熟的多叶肉：plantmeat_cooked</p>
<p>　　鸡蛋：bird_egg</p>
<p>　　熟鸡蛋：bird_egg_cooked</p>
<p>　　油煎高脚鸟蛋：tallbirdegg_cooked</p>
<p>　　鱼：fish</p>
<p>　　熟鱼：fish_cooked</p>
<p>　　鳗鱼：eel</p>
<p>　　煮熟的鳗鱼：eel_cooked</p>
<p>　　烤坚果：acorn_cooked</p>
<p>　　蝴蝶翅膀：butterflywings</p>
<p>　　黄油：butter</p>
<p>　　蜂蜜：honey</p>
<p>　　蜂王浆：royal_jelly</p>
<p>　　曼德拉草：mandrake</p>
<p>　　烤熟的曼德拉草：cookedmandrake</p>
<p>　　蝙蝠翅膀：batwing</p>
<p>　　熟蝙蝠翅膀：batwing_cooked</p>
<p>　　夏象鼻：trunk_summer</p>
<p>　　冬象鼻：trunk_winter</p>
<p>　　熟象鼻：trunk_cooked</p>
<p>　　肉串：kabobs</p>
<p>　　肉丸：meatballs</p>
<p>　　蜜汁火腿：honeyham</p>
<p>　　肉汤：bonestew</p>
<p>　　火鸡正餐：turkeydinner</p>
<p>　　青蛙圆面包三明治：frogglebunwich</p>
<p>　　玉米饼包炸鱼：fishtacos</p>
<p>　　鱼肉条：fishsticks</p>
<p>　　火龙果派：dragonpie</p>
<p>　　太妃糖：taffy</p>
<p>　　南瓜饼：pumpkincookie</p>
<p>　　奶油松饼：butterflymuffin</p>
<p>　　芝士蛋糕：powcake</p>
<p>　　曼德拉草汤：mandrakesoup</p>
<p>　　鸡蛋火腿：baconeggs</p>
<p>　　甜蜜金砖：honeynuggets</p>
<p>　　半圆小酥饼：perogies</p>
<p>　　蹩脚的炖菜：ratatouille</p>
<p>　　水果拼盘：fruitmedley</p>
<p>　　花沙拉：flowersalad</p>
<p>　　华夫饼：waffles</p>
<p>　　果酱蜜饯：jammypreserves</p>
<p>　　香酥茄盒：stuffedeggplant</p>
<p>　　冰淇淋：icecream</p>
<p>　　西瓜冰：watermelonicle</p>
<p>　　水果杂烩：trailmix</p>
<p>　　辣椒酱：hotchili</p>
<p>　　鳄梨酱：guacamole</p>
<p>　　电羊奶：goatmilk</p>
<p>　　怪物千层饼：monsterlasagna</p>
<p>　　鳗鱼料理：unagi</p>
<p>　　湿腻焦糊：wetgoop</p>
<p>　　腐烂的食物：spoiled_food</p>
<p>　　圣诞食品（4种形状）：winter_food1&#x2F;2&#x2F;3&#x2F;4</p>
<p>　　万圣节糖果（11种类型）：halloweencandy_1&#x2F;….&#x2F;11</p>
</div></details>

<h3 id="普通生物"><a href="#普通生物" class="headerlink" title="普通生物"></a>普通生物</h3><details class="toggle" ><summary class="toggle-button" style="">普通生物</summary><div class="toggle-content"><p>　　猪人：pigman</p>
<p>　　猪人守卫：pigguard</p>
<p>　　猪王：pigking</p>
<p>　　鱼人：merm</p>
<p>　　兔人：bunnyman</p>
<p>　　兔子：rabbit</p>
<p>　　野牛（宝宝）：babybeefalo</p>
<p>　　野牛（青年）：</p>
<p>　　野牛（成年）：beefalo</p>
<p>　　海象：walrus</p>
<p>　　小海象：little_walrus</p>
<p>　　夏象：koalefant_summer</p>
<p>　　冬象：koalefant_winter</p>
<p>　　闪电羊：lightninggoat</p>
<p>　　钢羊：spat</p>
<p>　　无睛鹿：deer</p>
<p>　　蜘蛛：spider</p>
<p>　　蜘蛛战士：spider_warrior</p>
<p>　　洞穴蜘蛛：spider_hider</p>
<p>　　喷射蜘蛛：spider_spitter</p>
<p>　　白蜘蛛：spider_dropper</p>
<p>　　猎狗：hound</p>
<p>　　火狗：firehound</p>
<p>　　冰狗：icehound</p>
<p>　　高脚鸟（蛋）：tallbirdegg</p>
<p>　　高脚鸟蛋（孵化的）：tallbirdegg_cracked</p>
<p>　　高脚鸟（宝宝）：smallbird</p>
<p>　　高脚鸟（青年）：teenbird</p>
<p>　　高脚鸟（成年）：tallbird</p>
<p>　　乌鸦：crow</p>
<p>　　红雀：robin</p>
<p>　　雪雀：robin_winter</p>
<p>　　金丝雀：canary</p>
<p>　　火鸡：perd</p>
<p>　　企鹅：penguin</p>
<p>　　青蛙：frog</p>
<p>　　鼹鼠：mole</p>
<p>　　格罗姆：glommer</p>
<p>　　猫熊：catcoon</p>
<p>　　草蜥：grassgekko</p>
<p>　　蜜蜂：bee</p>
<p>　　杀人蜂：killerbee</p>
<p>　　萤火虫：fireflies</p>
<p>　　蚊子:mosquito</p>
<p>　　苍蝇：flies</p>
<p>　　蝴蝶：butterfly</p>
<p>　　岩浆虫：lavae</p>
<p>　　含糊虫：slurtle</p>
<p>　　黏糊虫：snurtle</p>
<p>　　切斯特：chester</p>
<p>　　切斯特骨眼：chester_eyebone</p>
<p>　　哈奇：hutch</p>
<p>　　星空：hutch_fishbowl</p>
<p>　　坎普斯：krampus</p>
<p>　　阿比盖尔：abigail</p>
<p>　　幽灵：ghost</p>
<p>　　食人花：lureplant</p>
<p>　　食人花眼睛：eyeplant</p>
<p>　　食人花种子：lureplantbulb</p>
<p>　　发条骑士：knight</p>
<p>　　主教：bishop</p>
<p>　　战车：root</p>
<p>　　爬行梦魇（正常版）：crawlinghorror</p>
<p>　　爬行梦魇（可立即攻击版）：crawlingnightmare</p>
<p>　　巨喙梦魇（正常版）：terrorbeak</p>
<p>　　巨喙梦魇（可立即攻击版）：nightmarebeak</p>
<p>　　暗影战车：shadow_rook</p>
<p>　　暗影主教：shadow_bishop</p>
<p>　　暗影骑士：shadow_knight</p>
<p>　　触手：tentacle</p>
<p>　　蝙蝠：bat</p>
<p>　　龙虾：rocky</p>
<p>　　猴子：monkey</p>
<p>　　缀食者：sluroer</p>
<p>　　远古虫子：worm</p>
<p>　　损坏的象（这个系列好想单独分个机器人）：bishop_nightmare</p>
<p>　　损坏的战车：rook_nightmare</p>
<p>　　损坏的骑士：knight_nightmare</p>
</div></details>

<h3 id="植物"><a href="#植物" class="headerlink" title="植物"></a>植物</h3><details class="toggle" ><summary class="toggle-button" style="">植物</summary><div class="toggle-content"><p>　　种子：seeds</p>
<p>　　松果：pinecone</p>
<p>　　坚果：acorn</p>
<p>　　花：flower</p>
<p>　　噩梦花：flower_evil</p>
<p>　　长在地上的胡萝卜：carrot_planted</p>
<p>　　草：grass</p>
<p>　　草根：depleted_grass</p>
<p>　　长草簇（可种植的草）：dug_grass</p>
<p>　　树苗：sapling</p>
<p>　　树苗（可种植的）：dug_sapling</p>
<p>　　浆果灌木丛：berrybush</p>
<p>　　浆果灌木丛（可种植的）：dug_berrybush</p>
<p>　　浆果灌木丛2：berrybush2</p>
<p>　　浆果灌木丛2（可种植的）：dug_berrybush2</p>
<p>　　蜜汁浆果丛：berrybush_juicy</p>
<p>　　尖刺灌木丛：marsh_bush</p>
<p>　　尖刺灌木丛（可种植的）：dug_marsh_bush</p>
<p>　　芦苇：reeds</p>
<p>　　洞穴苔藓：lichen</p>
<p>　　蕨类植物：cave_fern</p>
<p>　　常青树：evergreen</p>
<p>　　粗壮的常青树：evergreen_sparse</p>
<p>　　桦树：deciduoustree</p>
<p>　　多枝的树种：</p>
<p>　　多枝的树（从小到大4种形态）：twiggy_short&#x2F;normal&#x2F;（？）&#x2F;old</p>
<p>　　针叶树：marsh_tree</p>
<p>　　大理石树：marbletree</p>
<p>　　大理石魔豆：marblebean</p>
<p>　　大理石灌木：marbleshrub_tall</p>
<p>　　荧光草（单朵）：flower_cave</p>
<p>　　荧光草（双朵）：flower_cave_double</p>
<p>　　荧光草（三朵）：flower_cave_triple</p>
<p>　　滚草：tumbleweed</p>
<p>　　仙人掌：cactus</p>
<p>　　池塘边水草：marsh_plant</p>
<p>　　水藻：pond_algae</p>
<p>　　风滚草：tumbleweed</p>
<p>　　红蘑菇（地上种植的）：red_mushroom</p>
<p>　　绿蘑菇（地上种植的）：green_mushroom</p>
<p>　　蓝蘑菇（地上种植的）：blue_mushroom</p>
<p>　　红蘑菇树：mushtree_medium</p>
<p>　　绿蘑菇树：mushtree_small</p>
<p>　　蓝蘑菇树：mushtree_tall</p>
<p>　　带网的蓝蘑菇树：mushtree_tall_webbed</p>
<p>　　香蕉树：cave_banana_tree</p>
<p>　　完全正常的树（活树）：livingtree</p>
</div></details>

<h3 id="矿类"><a href="#矿类" class="headerlink" title="矿类"></a>矿类</h3><details class="toggle" ><summary class="toggle-button" style="">矿类</summary><div class="toggle-content"><p>　　卵石（只有岩石）：rock_flintless</p>
<p>　　卵石（带硝石）：rock1</p>
<p>　　卵石（带黄金）：rock2</p>
<p>　　陨石：rock_moon</p>
<p>　　石笋（高）：stalagmite_full</p>
<p>　　石笋（中）：stalagmite_med</p>
<p>　　石笋（矮）：stalagmite_low</p>
<p>　　尖石笋（高）：stalagmite_tall_full</p>
<p>　　尖石笋（中）：stalagmite_tall_med</p>
<p>　　尖石笋（矮）:stalagmite_tall_low</p>
<p>　　迷你冰川：rock_ice</p>
<p>　　玄武岩：basalt</p>
<p>　　玄武岩柱子：basalt_pillar</p>
<p>　　石化树（四个形态）：petrified_tree&#x2F;short&#x2F;tall&#x2F;old（？）</p>
</div></details>

<h3 id="建筑"><a href="#建筑" class="headerlink" title="建筑"></a>建筑</h3><details class="toggle" ><summary class="toggle-button" style="">建筑</summary><div class="toggle-content"><p>　　营火：campfire</p>
<p>　　石头篝火：firepit</p>
<p>　　火炬：torch</p>
<p>　　猪火炬：pigtorch</p>
<p>　　吸热营火：coldfire</p>
<p>　　吸热篝火：coldfirepit</p>
<p>　　科学机器：researchlab</p>
<p>　　炼金术引擎：researchlab2</p>
<p>　　魔法帽子：researchlab4</p>
<p>　　暗影操纵仪：researchlab3</p>
<p>　　远古遗迹：ancient_altar</p>
<p>　　损坏的远古遗迹：ancient_altar_broken</p>
<p>　　试金石：resurrectionstone</p>
<p>　　宝箱：treasurechest</p>
<p>　　骷髅箱子：skullchest</p>
<p>　　装饰箱：pandoraschest</p>
<p>　　大豪华箱子：minotaurchest</p>
<p>　　鳞片箱子：dragonflychest</p>
<p>　　基本农场：slow_farmplo</p>
<p>　　高级农场：fast_farmplot</p>
<p>　　蘑菇农场：mushroom_farm</p>
<p>　　晾肉架：meatrack</p>
<p>　　蜂箱：beebox</p>
<p>　　烹饪锅：cookpot</p>
<p>　　冰箱：icebox</p>
<p>　　帐篷：tent</p>
<p>　　简易小木棚：siestahut</p>
<p>　　路牌：homesign</p>
<p>　　小木牌：minisign_item</p>
<p>　　路标：</p>
<p>　　木栅栏：fence</p>
<p>　　可放置木栅栏：fence_item</p>
<p>　　木门：fence_gate</p>
<p>　　可放置木门：fence_gate_item</p>
<p>　　干草墙：wall_hay</p>
<p>　　可放置干草墙：wall_hay_item</p>
<p>　　木墙wall_wood</p>
<p>　　可放置木墙：wall_wood_item</p>
<p>　　石墙：wall_stone</p>
<p>　　可放置石墙：wall_stone_item</p>
<p>　　月石墙：wall_moonrock</p>
<p>　　可放置月石墙：wall_moonrock_item</p>
<p>　　铥矿墙壁：wall_ruins</p>
<p>　　可放置铥矿墙壁：wall_ruins_item</p>
<p>　　衣柜：Wardrobe</p>
<p>　　猪舍：pighouse</p>
<p>　　兔子窝：rabbithole</p>
<p>　　人鱼舍：mermhouse</p>
<p>　　鸟笼：birdcage</p>
<p>　　肉块雕像：resurrectionstatue</p>
<p>　　温度测量器：winterometer</p>
<p>　　雨量计：rainometer</p>
<p>　　避雷针：lightning_rod</p>
<p>　　雪球发射机：firesuppressor</p>
<p>　　传送核心：telebase</p>
<p>　　宝石看台：gemsocket</p>
<p>　　制图桌：cartographydesk</p>
<p>　　陶艺转盘：sculptingtable</p>
<p>　　月石基座：moonbase</p>
<p>　　月相盘：moondial</p>
<p>　　真眼守卫：sentryward</p>
<p>　　萤菇灯：mushroom_light</p>
<p>　　炽菇灯：mushroom_light2</p>
<p>　　暗夜照明灯：nightlight</p>
<p>　　龙鳞火炉：dragonflyfurnace</p>
<p>　　岩石洞穴：critterlab</p>
<p>　　卵石路：turf_road</p>
<p>　　墓碑：gravestone（需测试）</p>
<p>　　坟墓土堆：mound</p>
<p>　　骨架：skeleton</p>
<p>　　猎犬尸骨：houndbone</p>
<p>　　可疑的土堆：dirtpile</p>
<p>　　池塘：pond</p>
<p>　　洞穴池塘：pond_cave</p>
<p>　　猪人头：pighead</p>
<p>　　鱼人头：mermhead</p>
<p>　　兔子洞：rabbithole</p>
<p>　　蜂窝：beehive</p>
<p>　　杀人蜂窝：wasphive</p>
<p>　　蛛网岩：spiderhole</p>
<p>　　海象巢穴：walrus_camp</p>
<p>　　高脚鸟巢：tallbirdnest</p>
<p>　　猎犬丘：houndmound</p>
<p>　　含糊虫土堆（黏糊虫）：slurtlehole</p>
<p>　　蝙蝠洞：batcave</p>
<p>　　猴子桶：monkeybarrel</p>
<p>　　蜘蛛巢穴：spiderden</p>
<p>　　鼹鼠丘：molehill</p>
<p>　　中空树桩：catcoonden</p>
<p>　　远古头像：ruins_statue_head</p>
<p>　　远古法师雕像：ruins_statue_mage</p>
<p>　　麦斯威尔雕像：statuemaxwell</p>
<p>　　大理石柱子：marblepillar</p>
<p>　　直立雕像：statueharp</p>
<p>　　格罗姆雕像：statueglommer</p>
<p>　　破碎的时钟1&#x2F;2&#x2F;3：chessjunk1&#x2F;2&#x2F;3</p>
<p>　　虫洞：wormhole</p>
<p>　　限定版虫洞：wormhole_limited_1</p>
<p>　　传送门：multiplayer_portal（？）</p>
</div></details>

<h3 id="玩具"><a href="#玩具" class="headerlink" title="玩具"></a>玩具</h3><details class="toggle" ><summary class="toggle-button" style="">玩具</summary><div class="toggle-content"><p>　　trinket_1~5（融化的大理石、假卡祖笛、歌德结、地精玩偶）</p>
<p>　　trinket_6~10（小型火箭飞船、破烂电线、球与奖杯、硬化橡胶塞、不匹配的纽扣、二手假牙）</p>
<p>　　trinket_11~14（半躺机器人、干瘪触手、地精、漏水的茶杯）</p>
<p>　　trinket_17~24（弯曲的叉勺、玩具木马、陀螺、挠痒器、敲打锤、不耐磨的毛线、蹄脚、幸运猫罐）</p>
<p>　　trinket_25~27（空气“清新”剂、土豆杯、钢丝绳）</p>
<p>　　迷你主教象棋（白&#x2F;黑（白色被翻译做白葡萄酒））：trinket_15&#x2F;16</p>
<p>　　迷你战车象棋（白&#x2F;黑）：trinket_28&#x2F;29</p>
<p>　　迷你骑士象棋（白&#x2F;黑）：trinket_30&#x2F;31</p>
<p>　　trinket_32~37（方晶锆球、蜘蛛指环、猴爪、容量瓶、假牙、断桩）</p>
</div></details>

<h3 id="装饰"><a href="#装饰" class="headerlink" title="装饰"></a>装饰</h3><details class="toggle" ><summary class="toggle-button" style="">装饰</summary><div class="toggle-content"><p>　　木质地板：turf_woodfloor</p>
<p>　　方格地板：turf_checkerfloor</p>
<p>　　地毯地板：turf_carpetfloor</p>
<p>　　龙鳞地板：</p>
<p>　　盆栽：pottedfern</p>
<p>　　茶几：endtable</p>
<p>　　友善的稻草人：scarecrow（感觉除了召唤金丝雀也没什么用就变成装饰吧）</p>
<p>　　烟斗（白&#x2F;黑）：chesspiece_pipe_marble&#x2F;stone</p>
<p>　　禁卫（白&#x2F;黑）：chesspiece_pawn_marble&#x2F;stone</p>
<p>　　龙角烩（白&#x2F;黑）：chesspiece_hornucopia_marble&#x2F;stone</p>
<p>　　皇后（白&#x2F;黑）：chesspiece_muse_marble&#x2F;stone</p>
<p>　　国王（白&#x2F;黑）：chesspiece_formal_marble&#x2F;stone</p>
<p>　　骑士（白&#x2F;黑）：chesspiece_knight_marble&#x2F;stone</p>
<p>　　主教（白&#x2F;黑）：chesspiece_bishop_marble&#x2F;stone</p>
<p>　　战车（白&#x2F;黑）：chesspiece_rook_marble&#x2F;stone</p>
<p>　　鬣犬(活）：gargoyle_houndatk</p>
<p>　　鬣犬(死)：gargoyle_hounddeath</p>
<p>　　野猪(活)：gargoyle_werepigatk</p>
<p>　　野猪(嘶吼)：gargoyle_werepighowl</p>
<p>　　野猪(死)：gargoyle_werepigdeath</p>
<p>　　方尖碑：insanityrock</p>
<p>　　方尖碑（可伸缩）：sanityrock</p>
<p>　　奇怪的化石骨架：fossil_stalker（需测试）</p>
<p>　　熔岩池：lava_pond</p>
<p>　　圣诞树盆：winter_tree（其实调出来我无法使用）</p>
<p>　　礼物（空的）：gift</p>
<p>　　包裹（空的）：bundle</p>
<p>　　圣诞灯泡（红&#x2F;绿&#x2F;蓝&#x2F;白）：winter_ornament_light1&#x2F;2&#x2F;3&#x2F;4</p>
<p>　　圣诞灯饰（4种形状）：winter_ornament_fancy1&#x2F;2&#x2F;3&#x2F;4</p>
<p>　　圣诞灯饰（8种色彩）：winter_ornament_plain1&#x2F;2&#x2F;3&#x2F;4&#x2F;5&#x2F;6&#x2F;7&#x2F;8</p>
</div></details>

<h3 id="宠物"><a href="#宠物" class="headerlink" title="宠物"></a>宠物</h3><details class="toggle" ><summary class="toggle-button" style="">宠物</summary><div class="toggle-content"><p>　　小浣猫：critterlab_kitten</p>
<p>　　小座狼：critterlab_puppy</p>
<p>　　小钢羊：critterlab_lamb</p>
<p>　　小龙蝇：critterlab_dragonling</p>
<p>　　小格罗姆：critterlab_glomling</p>
<p>　　人工养殖型岩浆虫：lavae_pet（？）</p>
</div></details>

<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><details class="toggle" ><summary class="toggle-button" style="">其他</summary><div class="toggle-content"><p>　　动物足迹：animal_track</p>
<p>　　矮人明星：stafflight</p>
<p>　　远古桌子：ruins_table</p>
<p>　　远古椅子：ruins_chair</p>
<p>　　远古花瓶：ruins_vase</p>
<p>　　地图卷轴：mapscroll</p>
<p>　　主教头部：sculpture_bishophead</p>
<p>　　骑士头部：sculpture_knighthead</p>
<p>　　战车鼻部：sculpture_rooknose</p>
<p>　　主教雕塑：sculpture_bishopbody</p>
<p>　　战车雕塑：sculpture_rookbody</p>
<p>　　骑士雕塑：sculpture_knightbody</p>
<p>　　环状传送机零件（不知道这个系列在联机里到底还有什么用）：teleportato_ring</p>
<p>　　盒状传送机零件：teleportato_box</p>
<p>　　曲柄状传送机零件：teleportato_crank</p>
<p>　　球状传送机零件：teleportato_potato</p>
</div></details>
]]></content>
      <categories>
        <category>娱乐</category>
        <category>饥荒</category>
      </categories>
      <tags>
        <tag>娱乐</tag>
        <tag>饥荒</tag>
      </tags>
  </entry>
</search>
